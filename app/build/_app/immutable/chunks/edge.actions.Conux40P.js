import{r as gt,s as fe,X as Ge,e as Pe,c as ze,d as de,g as F,u as X,a4 as te,j as x,T as be,Y as Ue,Z as Je,_ as Qe,ab as mn,m as Q,b as Se,t as Tn,h as Ee,f as In,l as Dn,a5 as He,i as ke,z as Y,v as ge,Q as Ke,o as we,R as Le,ac as Zt,q as Xn,U as li,a8 as Yn,w as _i,ad as Ro,ae as bi,x as yn,a3 as he,k as ht,$ as wt,n as $e,a0 as _n,a1 as bn,a2 as Ko,S as sr,C as ar,af as ur,ag as cr,ah as fr,a as dr}from"./scheduler.DNWCPQjj.js";import{t as J,a as U,S as ae,i as ue,b as le,d as ce,m as re,e as se,g as We,c as Be}from"./index.CUHYGlZl.js";import{w as j,d as Tt,r as pe}from"./index.C7zb2tMt.js";import{M as hr}from"./style.C6_5yCrO.js";const gr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function It(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function wi(e,t){J(e,1,1,()=>{t.delete(e.key)})}function vi(e,t,n,i,o,l,s,r,a,u,c,d){let f=e.length,h=l.length,y=f;const b={};for(;y--;)b[e[y].key]=y;const P=[],g=new Map,v=new Map,S=[];for(y=h;y--;){const z=d(o,l,y),A=n(z);let D=s.get(A);D?i&&S.push(()=>D.p(z,t)):(D=u(A,z),D.c()),g.set(A,P[y]=D),A in b&&v.set(A,Math.abs(y-b[A]))}const w=new Set,k=new Set;function C(z){U(z,1),z.m(r,c),s.set(z.key,z),c=z.first,h--}for(;f&&h;){const z=P[h-1],A=e[f-1],D=z.key,H=A.key;z===A?(c=z.first,f--,h--):g.has(H)?!s.has(D)||w.has(D)?C(z):k.has(H)?f--:v.get(D)>v.get(H)?(k.add(D),C(z)):(w.add(H),f--):(a(A,s),f--)}for(;f--;){const z=e[f];g.has(z.key)||a(z,s)}for(;h;)C(P[h-1]);return gt(S),P}function ki(e,t){const n={},i={},o={$$scope:1};let l=e.length;for(;l--;){const s=e[l],r=t[l];if(r){for(const a in s)a in r||(i[a]=1);for(const a in r)o[a]||(n[a]=r[a],o[a]=1);e[l]=r}else for(const a in s)o[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function mr(e){return typeof e=="object"&&e!==null?e:{}}function Oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Oe(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yr={value:()=>{}};function Vn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new fn(n)}function fn(e){this._=e}function _r(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}fn.prototype=Vn.prototype={constructor:fn,on:function(e,t){var n=this._,i=_r(e+"",n),o,l=-1,s=i.length;if(arguments.length<2){for(;++l<s;)if((o=(e=i[l]).type)&&(o=br(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<s;)if(o=(e=i[l]).type)n[o]=Xi(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Xi(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,l;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,o=l.length;i<o;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,l=i.length;o<l;++o)i[o].value.apply(t,n)}};function br(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function Xi(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=yr,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ri="http://www.w3.org/1999/xhtml";const Yi={svg:"http://www.w3.org/2000/svg",xhtml:ri,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yi.hasOwnProperty(t)?{space:Yi[t],local:e}:e}function wr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ri&&t.documentElement.namespaceURI===ri?t.createElement(e):t.createElementNS(n,e)}}function vr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lo(e){var t=Rn(e);return(t.local?vr:wr)(t)}function kr(){}function Si(e){return e==null?kr:function(){return this.querySelector(e)}}function Sr(e){typeof e!="function"&&(e=Si(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],s=l.length,r=i[o]=new Array(s),a,u,c=0;c<s;++c)(a=l[c])&&(u=e.call(a,a.__data__,c,l))&&("__data__"in a&&(u.__data__=a.__data__),r[c]=u);return new Ye(i,this._parents)}function Er(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mr(){return[]}function Wo(e){return e==null?Mr:function(){return this.querySelectorAll(e)}}function Pr(e){return function(){return Er(e.apply(this,arguments))}}function zr(e){typeof e=="function"?e=Pr(e):e=Wo(e);for(var t=this._groups,n=t.length,i=[],o=[],l=0;l<n;++l)for(var s=t[l],r=s.length,a,u=0;u<r;++u)(a=s[u])&&(i.push(e.call(a,a.__data__,u,s)),o.push(a));return new Ye(i,o)}function Bo(e){return function(){return this.matches(e)}}function Fo(e){return function(t){return t.matches(e)}}var Nr=Array.prototype.find;function Ar(e){return function(){return Nr.call(this.children,e)}}function Or(){return this.firstElementChild}function Cr(e){return this.select(e==null?Or:Ar(typeof e=="function"?e:Fo(e)))}var Hr=Array.prototype.filter;function Tr(){return Array.from(this.children)}function Ir(e){return function(){return Hr.call(this.children,e)}}function Dr(e){return this.selectAll(e==null?Tr:Ir(typeof e=="function"?e:Fo(e)))}function Xr(e){typeof e!="function"&&(e=Bo(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],s=l.length,r=i[o]=[],a,u=0;u<s;++u)(a=l[u])&&e.call(a,a.__data__,u,l)&&r.push(a);return new Ye(i,this._parents)}function qo(e){return new Array(e.length)}function Yr(){return new Ye(this._enter||this._groups.map(qo),this._parents)}function wn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wn.prototype={constructor:wn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Vr(e){return function(){return e}}function Rr(e,t,n,i,o,l){for(var s=0,r,a=t.length,u=l.length;s<u;++s)(r=t[s])?(r.__data__=l[s],i[s]=r):n[s]=new wn(e,l[s]);for(;s<a;++s)(r=t[s])&&(o[s]=r)}function Kr(e,t,n,i,o,l,s){var r,a,u=new Map,c=t.length,d=l.length,f=new Array(c),h;for(r=0;r<c;++r)(a=t[r])&&(f[r]=h=s.call(a,a.__data__,r,t)+"",u.has(h)?o[r]=a:u.set(h,a));for(r=0;r<d;++r)h=s.call(e,l[r],r,l)+"",(a=u.get(h))?(i[r]=a,a.__data__=l[r],u.delete(h)):n[r]=new wn(e,l[r]);for(r=0;r<c;++r)(a=t[r])&&u.get(f[r])===a&&(o[r]=a)}function Lr(e){return e.__data__}function Wr(e,t){if(!arguments.length)return Array.from(this,Lr);var n=t?Kr:Rr,i=this._parents,o=this._groups;typeof e!="function"&&(e=Vr(e));for(var l=o.length,s=new Array(l),r=new Array(l),a=new Array(l),u=0;u<l;++u){var c=i[u],d=o[u],f=d.length,h=Br(e.call(c,c&&c.__data__,u,i)),y=h.length,b=r[u]=new Array(y),P=s[u]=new Array(y),g=a[u]=new Array(f);n(c,d,b,P,g,h,t);for(var v=0,S=0,w,k;v<y;++v)if(w=b[v]){for(v>=S&&(S=v+1);!(k=P[S])&&++S<y;);w._next=k||null}}return s=new Ye(s,i),s._enter=r,s._exit=a,s}function Br(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fr(){return new Ye(this._exit||this._groups.map(qo),this._parents)}function qr(e,t,n){var i=this.enter(),o=this,l=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?l.remove():n(l),i&&o?i.merge(o).order():o}function Zr(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,l=i.length,s=Math.min(o,l),r=new Array(o),a=0;a<s;++a)for(var u=n[a],c=i[a],d=u.length,f=r[a]=new Array(d),h,y=0;y<d;++y)(h=u[y]||c[y])&&(f[y]=h);for(;a<o;++a)r[a]=n[a];return new Ye(r,this._parents)}function Gr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,l=i[o],s;--o>=0;)(s=i[o])&&(l&&s.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(s,l),l=s);return this}function Ur(e){e||(e=Jr);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var s=n[l],r=s.length,a=o[l]=new Array(r),u,c=0;c<r;++c)(u=s[c])&&(a[c]=u);a.sort(t)}return new Ye(o,this._parents).order()}function Jr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Qr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jr(){return Array.from(this)}function xr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length;o<l;++o){var s=i[o];if(s)return s}return null}function pr(){let e=0;for(const t of this)++e;return e}function $r(){return!this.node()}function es(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],l=0,s=o.length,r;l<s;++l)(r=o[l])&&e.call(r,r.__data__,l,o);return this}function ts(e){return function(){this.removeAttribute(e)}}function ns(e){return function(){this.removeAttributeNS(e.space,e.local)}}function is(e,t){return function(){this.setAttribute(e,t)}}function os(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ls(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ss(e,t){var n=Rn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ns:ts:typeof t=="function"?n.local?rs:ls:n.local?os:is)(n,t))}function Zo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function as(e){return function(){this.style.removeProperty(e)}}function us(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cs(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function fs(e,t,n){return arguments.length>1?this.each((t==null?as:typeof t=="function"?cs:us)(e,t,n??"")):Dt(this.node(),e)}function Dt(e,t){return e.style.getPropertyValue(t)||Zo(e).getComputedStyle(e,null).getPropertyValue(t)}function ds(e){return function(){delete this[e]}}function hs(e,t){return function(){this[e]=t}}function gs(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ms(e,t){return arguments.length>1?this.each((t==null?ds:typeof t=="function"?gs:hs)(e,t)):this.node()[e]}function Go(e){return e.trim().split(/^|\s+/)}function Ei(e){return e.classList||new Uo(e)}function Uo(e){this._node=e,this._names=Go(e.getAttribute("class")||"")}Uo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jo(e,t){for(var n=Ei(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function Qo(e,t){for(var n=Ei(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function ys(e){return function(){Jo(this,e)}}function _s(e){return function(){Qo(this,e)}}function bs(e,t){return function(){(t.apply(this,arguments)?Jo:Qo)(this,e)}}function ws(e,t){var n=Go(e+"");if(arguments.length<2){for(var i=Ei(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?bs:t?ys:_s)(n,t))}function vs(){this.textContent=""}function ks(e){return function(){this.textContent=e}}function Ss(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Es(e){return arguments.length?this.each(e==null?vs:(typeof e=="function"?Ss:ks)(e)):this.node().textContent}function Ms(){this.innerHTML=""}function Ps(e){return function(){this.innerHTML=e}}function zs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ns(e){return arguments.length?this.each(e==null?Ms:(typeof e=="function"?zs:Ps)(e)):this.node().innerHTML}function As(){this.nextSibling&&this.parentNode.appendChild(this)}function Os(){return this.each(As)}function Cs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hs(){return this.each(Cs)}function Ts(e){var t=typeof e=="function"?e:Lo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Is(){return null}function Ds(e,t){var n=typeof e=="function"?e:Lo(e),i=t==null?Is:typeof t=="function"?t:Si(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Xs(){var e=this.parentNode;e&&e.removeChild(this)}function Ys(){return this.each(Xs)}function Vs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ks(e){return this.select(e?Rs:Vs)}function Ls(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ws(e){return function(t){e.call(this,t,this.__data__)}}function Bs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Fs(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,l;n<o;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function qs(e,t,n){return function(){var i=this.__on,o,l=Ws(t);if(i){for(var s=0,r=i.length;s<r;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=t;return}}this.addEventListener(e.type,l,n),o={type:e.type,name:e.name,value:t,listener:l,options:n},i?i.push(o):this.__on=[o]}}function Zs(e,t,n){var i=Bs(e+""),o,l=i.length,s;if(arguments.length<2){var r=this.node().__on;if(r){for(var a=0,u=r.length,c;a<u;++a)for(o=0,c=r[a];o<l;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(r=t?qs:Fs,o=0;o<l;++o)this.each(r(i[o],t,n));return this}function jo(e,t,n){var i=Zo(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Gs(e,t){return function(){return jo(this,e,t)}}function Us(e,t){return function(){return jo(this,e,t.apply(this,arguments))}}function Js(e,t){return this.each((typeof t=="function"?Us:Gs)(e,t))}function*Qs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length,s;o<l;++o)(s=i[o])&&(yield s)}var xo=[null];function Ye(e,t){this._groups=e,this._parents=t}function xt(){return new Ye([[document.documentElement]],xo)}function js(){return this}Ye.prototype=xt.prototype={constructor:Ye,select:Sr,selectAll:zr,selectChild:Cr,selectChildren:Dr,filter:Xr,data:Wr,enter:Yr,exit:Fr,join:qr,merge:Zr,selection:js,order:Gr,sort:Ur,call:Qr,nodes:jr,node:xr,size:pr,empty:$r,each:es,attr:ss,style:fs,property:ms,classed:ws,text:Es,html:Ns,raise:Os,lower:Hs,append:Ts,insert:Ds,remove:Ys,clone:Ks,datum:Ls,on:Zs,dispatch:Js,[Symbol.iterator]:Qs};function Re(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],xo)}function xs(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qe(e,t){if(e=xs(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ps={passive:!1},Gt={capture:!0,passive:!1};function jn(e){e.stopImmediatePropagation()}function Ot(e){e.preventDefault(),e.stopImmediatePropagation()}function po(e){var t=e.document.documentElement,n=Re(e).on("dragstart.drag",Ot,Gt);"onselectstart"in t?n.on("selectstart.drag",Ot,Gt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $o(e,t){var n=e.document.documentElement,i=Re(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ot,Gt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nn=e=>()=>e;function si(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:l,x:s,y:r,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}si.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $s(e){return!e.ctrlKey&&!e.button}function ea(){return this.parentNode}function ta(e,t){return t??{x:e.x,y:e.y}}function na(){return navigator.maxTouchPoints||"ontouchstart"in this}function ia(){var e=$s,t=ea,n=ta,i=na,o={},l=Vn("start","drag","end"),s=0,r,a,u,c,d=0;function f(w){w.on("mousedown.drag",h).filter(i).on("touchstart.drag",P).on("touchmove.drag",g,ps).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,k){if(!(c||!e.call(this,w,k))){var C=S(this,t.call(this,w,k),w,k,"mouse");C&&(Re(w.view).on("mousemove.drag",y,Gt).on("mouseup.drag",b,Gt),po(w.view),jn(w),u=!1,r=w.clientX,a=w.clientY,C("start",w))}}function y(w){if(Ot(w),!u){var k=w.clientX-r,C=w.clientY-a;u=k*k+C*C>d}o.mouse("drag",w)}function b(w){Re(w.view).on("mousemove.drag mouseup.drag",null),$o(w.view,u),Ot(w),o.mouse("end",w)}function P(w,k){if(e.call(this,w,k)){var C=w.changedTouches,z=t.call(this,w,k),A=C.length,D,H;for(D=0;D<A;++D)(H=S(this,z,w,k,C[D].identifier,C[D]))&&(jn(w),H("start",w,C[D]))}}function g(w){var k=w.changedTouches,C=k.length,z,A;for(z=0;z<C;++z)(A=o[k[z].identifier])&&(Ot(w),A("drag",w,k[z]))}function v(w){var k=w.changedTouches,C=k.length,z,A;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),z=0;z<C;++z)(A=o[k[z].identifier])&&(jn(w),A("end",w,k[z]))}function S(w,k,C,z,A,D){var H=l.copy(),m=qe(D||C,k),K,O,_;if((_=n.call(w,new si("beforestart",{sourceEvent:C,target:f,identifier:A,active:s,x:m[0],y:m[1],dx:0,dy:0,dispatch:H}),z))!=null)return K=_.x-m[0]||0,O=_.y-m[1]||0,function N(E,I,R){var W=m,q;switch(E){case"start":o[A]=N,q=s++;break;case"end":delete o[A],--s;case"drag":m=qe(R||I,k),q=s;break}H.call(E,w,new si(E,{sourceEvent:I,subject:_,target:f,identifier:A,active:q,x:m[0]+K,y:m[1]+O,dx:m[0]-W[0],dy:m[1]-W[1],dispatch:H}),z)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:nn(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:nn(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:nn(w),f):n},f.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:nn(!!w),f):i},f.on=function(){var w=l.on.apply(l,arguments);return w===l?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function Mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function el(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function pt(){}var Ut=.7,vn=1/Ut,Ct="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oa=/^#([0-9a-f]{3,8})$/,la=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),ra=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),sa=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${Jt}\\)$`),aa=new RegExp(`^rgba\\(${et},${et},${et},${Jt}\\)$`),ua=new RegExp(`^hsl\\(${Jt},${et},${et}\\)$`),ca=new RegExp(`^hsla\\(${Jt},${et},${et},${Jt}\\)$`),Vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mi(pt,Qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ri,formatHex:Ri,formatHex8:fa,formatHsl:da,formatRgb:Ki,toString:Ki});function Ri(){return this.rgb().formatHex()}function fa(){return this.rgb().formatHex8()}function da(){return tl(this).formatHsl()}function Ki(){return this.rgb().formatRgb()}function Qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Li(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?on(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?on(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=la.exec(e))?new Te(t[1],t[2],t[3],1):(t=ra.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sa.exec(e))?on(t[1],t[2],t[3],t[4]):(t=aa.exec(e))?on(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ua.exec(e))?Fi(t[1],t[2]/100,t[3]/100,1):(t=ca.exec(e))?Fi(t[1],t[2]/100,t[3]/100,t[4]):Vi.hasOwnProperty(e)?Li(Vi[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function Li(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function on(e,t,n,i){return i<=0&&(e=t=n=NaN),new Te(e,t,n,i)}function ha(e){return e instanceof pt||(e=Qt(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function ai(e,t,n,i){return arguments.length===1?ha(e):new Te(e,t,n,i??1)}function Te(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Mi(Te,ai,el(pt,{brighter(e){return e=e==null?vn:Math.pow(vn,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ut:Math.pow(Ut,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te(bt(this.r),bt(this.g),bt(this.b),kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wi,formatHex:Wi,formatHex8:ga,formatRgb:Bi,toString:Bi}));function Wi(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}`}function ga(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}${_t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bi(){const e=kn(this.opacity);return`${e===1?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${e===1?")":`, ${e})`}`}function kn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _t(e){return e=bt(e),(e<16?"0":"")+e.toString(16)}function Fi(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,i)}function tl(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof pt||(e=Qt(e)),!e)return new Ze;if(e instanceof Ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),l=Math.max(t,n,i),s=NaN,r=l-o,a=(l+o)/2;return r?(t===l?s=(n-i)/r+(n<i)*6:n===l?s=(i-t)/r+2:s=(t-n)/r+4,r/=a<.5?l+o:2-l-o,s*=60):r=a>0&&a<1?0:s,new Ze(s,r,a,e.opacity)}function ma(e,t,n,i){return arguments.length===1?tl(e):new Ze(e,t,n,i??1)}function Ze(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Mi(Ze,ma,el(pt,{brighter(e){return e=e==null?vn:Math.pow(vn,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ut:Math.pow(Ut,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Te(xn(e>=240?e-240:e+120,o,i),xn(e,o,i),xn(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new Ze(qi(this.h),ln(this.s),ln(this.l),kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kn(this.opacity);return`${e===1?"hsl(":"hsla("}${qi(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qi(e){return e=(e||0)%360,e<0?e+360:e}function ln(e){return Math.max(0,Math.min(1,e||0))}function xn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const nl=e=>()=>e;function ya(e,t){return function(n){return e+n*t}}function _a(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ba(e){return(e=+e)==1?il:function(t,n){return n-t?_a(t,n,e):nl(isNaN(t)?n:t)}}function il(e,t){var n=t-e;return n?ya(e,n):nl(isNaN(e)?t:e)}const Zi=function e(t){var n=ba(t);function i(o,l){var s=n((o=ai(o)).r,(l=ai(l)).r),r=n(o.g,l.g),a=n(o.b,l.b),u=il(o.opacity,l.opacity);return function(c){return o.r=s(c),o.g=r(c),o.b=a(c),o.opacity=u(c),o+""}}return i.gamma=e,i}(1);function dt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pn=new RegExp(ui.source,"g");function wa(e){return function(){return e}}function va(e){return function(t){return e(t)+""}}function ka(e,t){var n=ui.lastIndex=pn.lastIndex=0,i,o,l,s=-1,r=[],a=[];for(e=e+"",t=t+"";(i=ui.exec(e))&&(o=pn.exec(t));)(l=o.index)>n&&(l=t.slice(n,l),r[s]?r[s]+=l:r[++s]=l),(i=i[0])===(o=o[0])?r[s]?r[s]+=o:r[++s]=o:(r[++s]=null,a.push({i:s,x:dt(i,o)})),n=pn.lastIndex;return n<t.length&&(l=t.slice(n),r[s]?r[s]+=l:r[++s]=l),r.length<2?a[0]?va(a[0].x):wa(t):(t=a.length,function(u){for(var c=0,d;c<t;++c)r[(d=a[c]).i]=d.x(u);return r.join("")})}var Gi=180/Math.PI,ci={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ol(e,t,n,i,o,l){var s,r,a;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(r=Math.sqrt(n*n+i*i))&&(n/=r,i/=r,a/=r),e*i<t*n&&(e=-e,t=-t,a=-a,s=-s),{translateX:o,translateY:l,rotate:Math.atan2(t,e)*Gi,skewX:Math.atan(a)*Gi,scaleX:s,scaleY:r}}var rn;function Sa(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ci:ol(t.a,t.b,t.c,t.d,t.e,t.f)}function Ea(e){return e==null||(rn||(rn=document.createElementNS("http://www.w3.org/2000/svg","g")),rn.setAttribute("transform",e),!(e=rn.transform.baseVal.consolidate()))?ci:(e=e.matrix,ol(e.a,e.b,e.c,e.d,e.e,e.f))}function ll(e,t,n,i){function o(u){return u.length?u.pop()+" ":""}function l(u,c,d,f,h,y){if(u!==d||c!==f){var b=h.push("translate(",null,t,null,n);y.push({i:b-4,x:dt(u,d)},{i:b-2,x:dt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:dt(u,c)})):c&&d.push(o(d)+"rotate("+c+i)}function r(u,c,d,f){u!==c?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:dt(u,c)}):c&&d.push(o(d)+"skewX("+c+i)}function a(u,c,d,f,h,y){if(u!==d||c!==f){var b=h.push(o(h)+"scale(",null,",",null,")");y.push({i:b-4,x:dt(u,d)},{i:b-2,x:dt(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),r(u.skewX,c.skewX,d,f),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var y=-1,b=f.length,P;++y<b;)d[(P=f[y]).i]=P.x(h);return d.join("")}}}var Ma=ll(Sa,"px, ","px)","deg)"),Pa=ll(Ea,", ",")",")"),za=1e-12;function Ui(e){return((e=Math.exp(e))+1/e)/2}function Na(e){return((e=Math.exp(e))-1/e)/2}function Aa(e){return((e=Math.exp(2*e))-1)/(e+1)}const Oa=function e(t,n,i){function o(l,s){var r=l[0],a=l[1],u=l[2],c=s[0],d=s[1],f=s[2],h=c-r,y=d-a,b=h*h+y*y,P,g;if(b<za)g=Math.log(f/u)/t,P=function(z){return[r+z*h,a+z*y,u*Math.exp(t*z*g)]};else{var v=Math.sqrt(b),S=(f*f-u*u+i*b)/(2*u*n*v),w=(f*f-u*u-i*b)/(2*f*n*v),k=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(w*w+1)-w);g=(C-k)/t,P=function(z){var A=z*g,D=Ui(k),H=u/(n*v)*(D*Aa(t*A+k)-Na(k));return[r+H*h,a+H*y,u*D/Ui(t*A+k)]}}return P.duration=g*1e3*t/Math.SQRT2,P}return o.rho=function(l){var s=Math.max(.001,+l),r=s*s,a=r*r;return e(s,r,a)},o}(Math.SQRT2,2,4);var Xt=0,Bt=0,Rt=0,rl=1e3,Sn,Ft,En=0,vt=0,Kn=0,jt=typeof performance=="object"&&performance.now?performance:Date,sl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pi(){return vt||(sl(Ca),vt=jt.now()+Kn)}function Ca(){vt=0}function Mn(){this._call=this._time=this._next=null}Mn.prototype=al.prototype={constructor:Mn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pi():+n)+(t==null?0:+t),!this._next&&Ft!==this&&(Ft?Ft._next=this:Sn=this,Ft=this),this._call=e,this._time=n,fi()},stop:function(){this._call&&(this._call=null,this._time=1/0,fi())}};function al(e,t,n){var i=new Mn;return i.restart(e,t,n),i}function Ha(){Pi(),++Xt;for(var e=Sn,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xt}function Ji(){vt=(En=jt.now())+Kn,Xt=Bt=0;try{Ha()}finally{Xt=0,Ia(),vt=0}}function Ta(){var e=jt.now(),t=e-En;t>rl&&(Kn-=t,En=e)}function Ia(){for(var e,t=Sn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Sn=n);Ft=e,fi(i)}function fi(e){if(!Xt){Bt&&(Bt=clearTimeout(Bt));var t=e-vt;t>24?(e<1/0&&(Bt=setTimeout(Ji,e-jt.now()-Kn)),Rt&&(Rt=clearInterval(Rt))):(Rt||(En=jt.now(),Rt=setInterval(Ta,rl)),Xt=1,sl(Ji))}}function Qi(e,t,n){var i=new Mn;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var Da=Vn("start","end","cancel","interrupt"),Xa=[],ul=0,ji=1,di=2,dn=3,xi=4,hi=5,hn=6;function Ln(e,t,n,i,o,l){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ya(e,n,{name:t,index:i,group:o,on:Da,tween:Xa,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:ul})}function zi(e,t){var n=je(e,t);if(n.state>ul)throw new Error("too late; already scheduled");return n}function nt(e,t){var n=je(e,t);if(n.state>dn)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ya(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=al(l,0,n.time);function l(u){n.state=ji,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==ji)return a();for(c in i)if(h=i[c],h.name===n.name){if(h.state===dn)return Qi(s);h.state===xi?(h.state=hn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=hn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Qi(function(){n.state===dn&&(n.state=xi,n.timer.restart(r,n.delay,n.time),r(u))}),n.state=di,n.on.call("start",e,e.__data__,n.index,n.group),n.state===di){for(n.state=dn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function r(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=hi,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===hi&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=hn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function gn(e,t){var n=e.__transition,i,o,l=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){l=!1;continue}o=i.state>di&&i.state<hi,i.state=hn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}l&&delete e.__transition}}function Va(e){return this.each(function(){gn(this,e)})}function Ra(e,t){var n,i;return function(){var o=nt(this,e),l=o.tween;if(l!==n){i=n=l;for(var s=0,r=i.length;s<r;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Ka(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var l=nt(this,e),s=l.tween;if(s!==i){o=(i=s).slice();for(var r={name:t,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===t){o[a]=r;break}a===u&&o.push(r)}l.tween=o}}function La(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=je(this.node(),n).tween,o=0,l=i.length,s;o<l;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((t==null?Ra:Ka)(n,e,t))}function Ni(e,t,n){var i=e._id;return e.each(function(){var o=nt(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return je(o,i).value[t]}}function cl(e,t){var n;return(typeof t=="number"?dt:t instanceof Qt?Zi:(n=Qt(t))?(t=n,Zi):ka)(e,t)}function Wa(e){return function(){this.removeAttribute(e)}}function Ba(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fa(e,t,n){var i,o=n+"",l;return function(){var s=this.getAttribute(e);return s===o?null:s===i?l:l=t(i=s,n)}}function qa(e,t,n){var i,o=n+"",l;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?l:l=t(i=s,n)}}function Za(e,t,n){var i,o,l;return function(){var s,r=n(this),a;return r==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=r+"",s===a?null:s===i&&a===o?l:(o=a,l=t(i=s,r)))}}function Ga(e,t,n){var i,o,l;return function(){var s,r=n(this),a;return r==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=r+"",s===a?null:s===i&&a===o?l:(o=a,l=t(i=s,r)))}}function Ua(e,t){var n=Rn(e),i=n==="transform"?Pa:cl;return this.attrTween(e,typeof t=="function"?(n.local?Ga:Za)(n,i,Ni(this,"attr."+e,t)):t==null?(n.local?Ba:Wa)(n):(n.local?qa:Fa)(n,i,t))}function Ja(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Qa(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ja(e,t){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&Qa(e,l)),n}return o._value=t,o}function xa(e,t){var n,i;function o(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&Ja(e,l)),n}return o._value=t,o}function pa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Rn(e);return this.tween(n,(i.local?ja:xa)(i,t))}function $a(e,t){return function(){zi(this,e).delay=+t.apply(this,arguments)}}function eu(e,t){return t=+t,function(){zi(this,e).delay=t}}function tu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$a:eu)(t,e)):je(this.node(),t).delay}function nu(e,t){return function(){nt(this,e).duration=+t.apply(this,arguments)}}function iu(e,t){return t=+t,function(){nt(this,e).duration=t}}function ou(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nu:iu)(t,e)):je(this.node(),t).duration}function lu(e,t){if(typeof t!="function")throw new Error;return function(){nt(this,e).ease=t}}function ru(e){var t=this._id;return arguments.length?this.each(lu(t,e)):je(this.node(),t).ease}function su(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nt(this,e).ease=n}}function au(e){if(typeof e!="function")throw new Error;return this.each(su(this._id,e))}function uu(e){typeof e!="function"&&(e=Bo(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l=t[o],s=l.length,r=i[o]=[],a,u=0;u<s;++u)(a=l[u])&&e.call(a,a.__data__,u,l)&&r.push(a);return new rt(i,this._parents,this._name,this._id)}function cu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,l=Math.min(i,o),s=new Array(i),r=0;r<l;++r)for(var a=t[r],u=n[r],c=a.length,d=s[r]=new Array(c),f,h=0;h<c;++h)(f=a[h]||u[h])&&(d[h]=f);for(;r<i;++r)s[r]=t[r];return new rt(s,this._parents,this._name,this._id)}function fu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function du(e,t,n){var i,o,l=fu(t)?zi:nt;return function(){var s=l(this,e),r=s.on;r!==i&&(o=(i=r).copy()).on(t,n),s.on=o}}function hu(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(du(n,e,t))}function gu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mu(){return this.on("end.remove",gu(this._id))}function yu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Si(e));for(var i=this._groups,o=i.length,l=new Array(o),s=0;s<o;++s)for(var r=i[s],a=r.length,u=l[s]=new Array(a),c,d,f=0;f<a;++f)(c=r[f])&&(d=e.call(c,c.__data__,f,r))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Ln(u[f],t,n,f,u,je(c,n)));return new rt(l,this._parents,t,n)}function _u(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wo(e));for(var i=this._groups,o=i.length,l=[],s=[],r=0;r<o;++r)for(var a=i[r],u=a.length,c,d=0;d<u;++d)if(c=a[d]){for(var f=e.call(c,c.__data__,d,a),h,y=je(c,n),b=0,P=f.length;b<P;++b)(h=f[b])&&Ln(h,t,n,b,f,y);l.push(f),s.push(c)}return new rt(l,s,t,n)}var bu=xt.prototype.constructor;function wu(){return new bu(this._groups,this._parents)}function vu(e,t){var n,i,o;return function(){var l=Dt(this,e),s=(this.style.removeProperty(e),Dt(this,e));return l===s?null:l===n&&s===i?o:o=t(n=l,i=s)}}function fl(e){return function(){this.style.removeProperty(e)}}function ku(e,t,n){var i,o=n+"",l;return function(){var s=Dt(this,e);return s===o?null:s===i?l:l=t(i=s,n)}}function Su(e,t,n){var i,o,l;return function(){var s=Dt(this,e),r=n(this),a=r+"";return r==null&&(a=r=(this.style.removeProperty(e),Dt(this,e))),s===a?null:s===i&&a===o?l:(o=a,l=t(i=s,r))}}function Eu(e,t){var n,i,o,l="style."+t,s="end."+l,r;return function(){var a=nt(this,e),u=a.on,c=a.value[l]==null?r||(r=fl(t)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(s,o=c),a.on=i}}function Mu(e,t,n){var i=(e+="")=="transform"?Ma:cl;return t==null?this.styleTween(e,vu(e,i)).on("end.style."+e,fl(e)):typeof t=="function"?this.styleTween(e,Su(e,i,Ni(this,"style."+e,t))).each(Eu(this._id,e)):this.styleTween(e,ku(e,i,t),n).on("end.style."+e,null)}function Pu(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function zu(e,t,n){var i,o;function l(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&Pu(e,s,n)),i}return l._value=t,l}function Nu(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,zu(e,t,n??""))}function Au(e){return function(){this.textContent=e}}function Ou(e){return function(){var t=e(this);this.textContent=t??""}}function Cu(e){return this.tween("text",typeof e=="function"?Ou(Ni(this,"text",e)):Au(e==null?"":e+""))}function Hu(e){return function(t){this.textContent=e.call(this,t)}}function Tu(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Hu(o)),t}return i._value=e,i}function Iu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Tu(e))}function Du(){for(var e=this._name,t=this._id,n=dl(),i=this._groups,o=i.length,l=0;l<o;++l)for(var s=i[l],r=s.length,a,u=0;u<r;++u)if(a=s[u]){var c=je(a,t);Ln(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rt(i,this._parents,e,n)}function Xu(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(l,s){var r={value:s},a={value:function(){--o===0&&l()}};n.each(function(){var u=nt(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(r),t._.interrupt.push(r),t._.end.push(a)),u.on=t}),o===0&&l()})}var Yu=0;function rt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function dl(){return++Yu}var it=xt.prototype;rt.prototype={constructor:rt,select:yu,selectAll:_u,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:uu,merge:cu,selection:wu,transition:Du,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:hu,attr:Ua,attrTween:pa,style:Mu,styleTween:Nu,text:Cu,textTween:Iu,remove:mu,tween:La,delay:tu,duration:ou,ease:ru,easeVarying:au,end:Xu,[Symbol.iterator]:it[Symbol.iterator]};function Vu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ru={time:null,delay:0,duration:250,ease:Vu};function Ku(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Lu(e){var t,n;e instanceof rt?(t=e._id,e=e._name):(t=dl(),(n=Ru).time=Pi(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var s=i[l],r=s.length,a,u=0;u<r;++u)(a=s[u])&&Ln(a,e,t,u,s,n||Ku(a,t));return new rt(i,this._parents,e,t)}xt.prototype.interrupt=Va;xt.prototype.transition=Lu;const sn=e=>()=>e;function Wu(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ot(e,t,n){this.k=e,this.x=t,this.y=n}ot.prototype={constructor:ot,scale:function(e){return e===1?this:new ot(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ot(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wn=new ot(1,0,0);hl.prototype=ot.prototype;function hl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Wn;return e.__zoom}function $n(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function Bu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Fu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function pi(){return this.__zoom||Wn}function qu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gu(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>l?(l+s)/2:Math.min(0,l)||Math.max(0,s))}function gl(){var e=Bu,t=Fu,n=Gu,i=qu,o=Zu,l=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],r=250,a=Oa,u=Vn("start","zoom","end"),c,d,f,h=500,y=150,b=0,P=10;function g(_){_.property("__zoom",pi).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",H).filter(o).on("touchstart.zoom",m).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,N,E,I){var R=_.selection?_.selection():_;R.property("__zoom",pi),_!==R?k(_,N,E,I):R.interrupt().each(function(){C(this,arguments).event(I).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},g.scaleBy=function(_,N,E,I){g.scaleTo(_,function(){var R=this.__zoom.k,W=typeof N=="function"?N.apply(this,arguments):N;return R*W},E,I)},g.scaleTo=function(_,N,E,I){g.transform(_,function(){var R=t.apply(this,arguments),W=this.__zoom,q=E==null?w(R):typeof E=="function"?E.apply(this,arguments):E,Z=W.invert(q),T=typeof N=="function"?N.apply(this,arguments):N;return n(S(v(W,T),q,Z),R,s)},E,I)},g.translateBy=function(_,N,E,I){g.transform(_,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),s)},null,I)},g.translateTo=function(_,N,E,I,R){g.transform(_,function(){var W=t.apply(this,arguments),q=this.__zoom,Z=I==null?w(W):typeof I=="function"?I.apply(this,arguments):I;return n(Wn.translate(Z[0],Z[1]).scale(q.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof E=="function"?-E.apply(this,arguments):-E),W,s)},I,R)};function v(_,N){return N=Math.max(l[0],Math.min(l[1],N)),N===_.k?_:new ot(N,_.x,_.y)}function S(_,N,E){var I=N[0]-E[0]*_.k,R=N[1]-E[1]*_.k;return I===_.x&&R===_.y?_:new ot(_.k,I,R)}function w(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function k(_,N,E,I){_.on("start.zoom",function(){C(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(I).end()}).tween("zoom",function(){var R=this,W=arguments,q=C(R,W).event(I),Z=t.apply(R,W),T=E==null?w(Z):typeof E=="function"?E.apply(R,W):E,p=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),$=R.__zoom,ie=typeof N=="function"?N.apply(R,W):N,B=a($.invert(T).concat(p/$.k),ie.invert(T).concat(p/ie.k));return function(ee){if(ee===1)ee=ie;else{var oe=B(ee),_e=p/oe[2];ee=new ot(_e,T[0]-oe[0]*_e,T[1]-oe[1]*_e)}q.zoom(null,ee)}})}function C(_,N,E){return!E&&_.__zooming||new z(_,N)}function z(_,N){this.that=_,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,N),this.taps=0}z.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,N){return this.mouse&&_!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var N=Re(this.that).datum();u.call(_,this.that,new Wu(_,{sourceEvent:this.sourceEvent,target:g,type:_,transform:this.that.__zoom,dispatch:u}),N)}};function A(_,...N){if(!e.apply(this,arguments))return;var E=C(this,N).event(_),I=this.__zoom,R=Math.max(l[0],Math.min(l[1],I.k*Math.pow(2,i.apply(this,arguments)))),W=qe(_);if(E.wheel)(E.mouse[0][0]!==W[0]||E.mouse[0][1]!==W[1])&&(E.mouse[1]=I.invert(E.mouse[0]=W)),clearTimeout(E.wheel);else{if(I.k===R)return;E.mouse=[W,I.invert(W)],gn(this),E.start()}Kt(_),E.wheel=setTimeout(q,y),E.zoom("mouse",n(S(v(I,R),E.mouse[0],E.mouse[1]),E.extent,s));function q(){E.wheel=null,E.end()}}function D(_,...N){if(f||!e.apply(this,arguments))return;var E=_.currentTarget,I=C(this,N,!0).event(_),R=Re(_.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",p,!0),W=qe(_,E),q=_.clientX,Z=_.clientY;po(_.view),$n(_),I.mouse=[W,this.__zoom.invert(W)],gn(this),I.start();function T($){if(Kt($),!I.moved){var ie=$.clientX-q,B=$.clientY-Z;I.moved=ie*ie+B*B>b}I.event($).zoom("mouse",n(S(I.that.__zoom,I.mouse[0]=qe($,E),I.mouse[1]),I.extent,s))}function p($){R.on("mousemove.zoom mouseup.zoom",null),$o($.view,I.moved),Kt($),I.event($).end()}}function H(_,...N){if(e.apply(this,arguments)){var E=this.__zoom,I=qe(_.changedTouches?_.changedTouches[0]:_,this),R=E.invert(I),W=E.k*(_.shiftKey?.5:2),q=n(S(v(E,W),I,R),t.apply(this,N),s);Kt(_),r>0?Re(this).transition().duration(r).call(k,q,I,_):Re(this).call(g.transform,q,I,_)}}function m(_,...N){if(e.apply(this,arguments)){var E=_.touches,I=E.length,R=C(this,N,_.changedTouches.length===I).event(_),W,q,Z,T;for($n(_),q=0;q<I;++q)Z=E[q],T=qe(Z,this),T=[T,this.__zoom.invert(T),Z.identifier],R.touch0?!R.touch1&&R.touch0[2]!==T[2]&&(R.touch1=T,R.taps=0):(R.touch0=T,W=!0,R.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(R.taps<2&&(d=T[0],c=setTimeout(function(){c=null},h)),gn(this),R.start())}}function K(_,...N){if(this.__zooming){var E=C(this,N).event(_),I=_.changedTouches,R=I.length,W,q,Z,T;for(Kt(_),W=0;W<R;++W)q=I[W],Z=qe(q,this),E.touch0&&E.touch0[2]===q.identifier?E.touch0[0]=Z:E.touch1&&E.touch1[2]===q.identifier&&(E.touch1[0]=Z);if(q=E.that.__zoom,E.touch1){var p=E.touch0[0],$=E.touch0[1],ie=E.touch1[0],B=E.touch1[1],ee=(ee=ie[0]-p[0])*ee+(ee=ie[1]-p[1])*ee,oe=(oe=B[0]-$[0])*oe+(oe=B[1]-$[1])*oe;q=v(q,Math.sqrt(ee/oe)),Z=[(p[0]+ie[0])/2,(p[1]+ie[1])/2],T=[($[0]+B[0])/2,($[1]+B[1])/2]}else if(E.touch0)Z=E.touch0[0],T=E.touch0[1];else return;E.zoom("touch",n(S(q,Z,T),E.extent,s))}}function O(_,...N){if(this.__zooming){var E=C(this,N).event(_),I=_.changedTouches,R=I.length,W,q;for($n(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),W=0;W<R;++W)q=I[W],E.touch0&&E.touch0[2]===q.identifier?delete E.touch0:E.touch1&&E.touch1[2]===q.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(q=qe(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<P)){var Z=Re(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:sn(+_),g):i},g.filter=function(_){return arguments.length?(e=typeof _=="function"?_:sn(!!_),g):e},g.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:sn(!!_),g):o},g.extent=function(_){return arguments.length?(t=typeof _=="function"?_:sn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):t},g.scaleExtent=function(_){return arguments.length?(l[0]=+_[0],l[1]=+_[1],g):[l[0],l[1]]},g.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(r=+_,g):r},g.interpolate=function(_){return arguments.length?(a=_,g):a},g.on=function(){var _=u.on.apply(u,arguments);return _===u?g:_},g.clickDistance=function(_){return arguments.length?(b=(_=+_)*_,g):Math.sqrt(b)},g.tapDistance=function(_){return arguments.length?(P=+_,g):P},g}const $t={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${n&&i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ye=Symbol.for("internals"),$i=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var kt;(function(e){e.Strict="strict",e.Loose="loose"})(kt||(kt={}));var tt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(tt||(tt={}));var Pn;(function(e){e.Partial="partial",e.Full="full"})(Pn||(Pn={}));var Ht;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ht||(Ht={}));var zn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zn||(zn={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));function Uu(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function eo(e,t,n){if(!n)return;const i=[];e.forEach((o,l)=>{t!=null&&t.has(l)||i.push(o)}),i.length&&n(i)}const Ju=e=>"id"in e&&"source"in e&&"target"in e,Qu=e=>"id"in e&&!("source"in e)&&!("target"in e),en=(e,t=[0,0])=>{var r;if(!e)return{position:{x:0,y:0},positionAbsolute:{x:0,y:0}};const{width:n,height:i}=qn(e),o=n*t[0],l=i*t[1],s={x:e.position.x-o,y:e.position.y-l};return{position:s,positionAbsolute:(r=e.computed)!=null&&r.positionAbsolute?{x:e.computed.positionAbsolute.x-o,y:e.computed.positionAbsolute.y-l}:s}},Bn=(e,t={nodeOrigin:[0,0],useRelativePosition:!1})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,o)=>{const l=en(o,o.origin||t.nodeOrigin);return Ai(i,Nn({...l[t.useRelativePosition?"position":"positionAbsolute"],...qn(o)}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Oi(n)},ml=(e,t,[n,i,o]=[0,0,1],l=!1,s=!1,r=[0,0])=>{const a={...Fn(t,[n,i,o]),width:t.width/o,height:t.height/o};return e.reduce((c,d)=>{const{computed:f,selectable:h=!0,hidden:y=!1}=d,b=(f==null?void 0:f.width)??d.width??d.initialWidth??null,P=(f==null?void 0:f.height)??d.height??d.initialHeight??null;if(s&&!h||y)return c;const g=An(a,mi(d,r)),v=b===null||P===null,S=l&&g>0,w=(b??0)*(P??0);return(v||S||g>=w||d.dragging)&&c.push(d),c},[])},gi=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function ju({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:l,nodeOrigin:s=[0,0]},r){const a=e.filter(u=>{var d,f,h;const c=((d=u.computed)==null?void 0:d.width)&&((f=u.computed)==null?void 0:f.height)&&((r==null?void 0:r.includeHiddenNodes)||!u.hidden);return(h=r==null?void 0:r.nodes)!=null&&h.length?c&&(r==null?void 0:r.nodes.some(y=>y.id===u.id)):c});if(a.length>0){const u=Bn(a,{nodeOrigin:s}),c=Hi(u,t,n,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??l,(r==null?void 0:r.padding)??.1);return i.setViewport(c,{duration:r==null?void 0:r.duration}),!0}return!1}function xu(e,t){var n,i;return!t||t==="parent"?t:[t[0],[t[1][0]-(((n=e.computed)==null?void 0:n.width)??0),t[1][1]-(((i=e.computed)==null?void 0:i.height)??0)]]}function pu({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:l}){var f,h,y,b;const s=n.get(e),r=s.parentNode?n.get(s.parentNode):void 0,{x:a,y:u}=r?en(r,r.origin||i).positionAbsolute:{x:0,y:0};let c=xu(s,s.extent||o);if(s.extent==="parent"&&!s.expandParent)if(!r)l==null||l("005",$t.error005());else{const P=(f=s.computed)==null?void 0:f.width,g=(h=s.computed)==null?void 0:h.height,v=(y=r==null?void 0:r.computed)==null?void 0:y.width,S=(b=r==null?void 0:r.computed)==null?void 0:b.height;if(P&&g&&v&&S){const w=s.origin||i,k=a+P*w[0],C=u+g*w[1];c=[[k,C],[k+v-P,C+S-g]]}}else r&&io(s.extent)&&(c=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const d=io(c)?$u(t,c):t;return{position:{x:d.x-a,y:d.y-u},positionAbsolute:d}}async function yl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const l=e.map(f=>f.id),s=[];for(const f of n){if(f.deletable===!1)continue;const h=l.includes(f.id),y=!h&&f.parentNode&&s.find(b=>b.id===f.parentNode);(h||y)&&s.push(f)}const r=t.map(f=>f.id),a=i.filter(f=>f.deletable!==!1),c=gi(s,a);for(const f of a)r.includes(f.id)&&!c.find(y=>y.id===f.id)&&c.push(f);if(!o)return{edges:c,nodes:s};const d=await o({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const Yt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$u=(e={x:0,y:0},t)=>({x:Yt(e.x,t[0][0],t[1][0]),y:Yt(e.y,t[0][1],t[1][1])}),to=(e,t,n)=>e<t?Yt(Math.abs(e-t),1,50)/50:e>n?-Yt(Math.abs(e-n),1,50)/50:0,_l=(e,t)=>{const n=to(e.x,35,t.width-35)*20,i=to(e.y,35,t.height-35)*20;return[n,i]},Ai=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Nn=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Oi=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),mi=(e,t=[0,0])=>{var i,o;const{positionAbsolute:n}=en(e,e.origin||t);return{...n,width:((i=e.computed)==null?void 0:i.width)??e.width??0,height:((o=e.computed)==null?void 0:o.height)??e.height??0}},no=(e,t=[0,0])=>{var i,o;const{positionAbsolute:n}=en(e,e.origin||t);return{...n,x2:n.x+(((i=e.computed)==null?void 0:i.width)??e.width??0),y2:n.y+(((o=e.computed)==null?void 0:o.height)??e.height??0)}},bh=(e,t)=>Oi(Ai(Nn(e),Nn(t))),An=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},ec=e=>qt(e.width)&&qt(e.height)&&qt(e.x)&&qt(e.y),qt=e=>!isNaN(e)&&isFinite(e),tc=(e,t)=>{},nc=({x:e,y:t,width:n,height:i,origin:o=[0,0]})=>!n||!i||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-i*o[1]},Ci=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Fn=({x:e,y:t},[n,i,o],l=!1,s=[1,1])=>{const r={x:(e-n)/o,y:(t-i)/o};return l?Ci(r,s):r},bl=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i}),Hi=(e,t,n,i,o,l)=>{const s=t/(e.width*(1+l)),r=n/(e.height*(1+l)),a=Math.min(s,r),u=Yt(a,i,o),c=e.x+e.width/2,d=e.y+e.height/2,f=t/2-c*u,h=n/2-d*u;return{x:f,y:h,zoom:u}},On=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function io(e){return e!==void 0&&e!=="parent"}function qn(e){var t,n;return{width:((t=e.computed)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.computed)==null?void 0:n.height)??e.height??e.initialHeight??0}}function oo(e){var t,n;return(((t=e.computed)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.computed)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function ei(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:l}=lt(e),s=Fn({x:o,y:l},i),{x:r,y:a}=n?Ci(s,t):s;return{xSnapped:r,ySnapped:a,...s}}const wl=e=>({width:e.offsetWidth,height:e.offsetHeight}),ic=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},oc=["INPUT","SELECT","TEXTAREA"];function lc(e){var i,o;const t=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||e.target;return oc.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const vl=e=>"clientX"in e,lt=(e,t)=>{var l,s;const n=vl(e),i=n?e.clientX:(l=e.touches)==null?void 0:l[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},lo=(e,t,n,i=[0,0])=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const l=Array.from(o),s=t.getBoundingClientRect(),r={x:s.width*i[0],y:s.height*i[1]};return l.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(u.left-s.left-r.x)/n,y:(u.top-s.top-r.y)/n,...wl(a)}})};function rc({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:s,targetControlY:r}){const a=e*.125+o*.375+s*.375+n*.125,u=t*.125+l*.375+r*.375+i*.125,c=Math.abs(a-e),d=Math.abs(u-t);return[a,u,c,d]}function an(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ro({pos:e,x1:t,y1:n,x2:i,y2:o,c:l}){switch(e){case ne.Left:return[t-an(t-i,l),n];case ne.Right:return[t+an(i-t,l),n];case ne.Top:return[t,n-an(n-o,l)];case ne.Bottom:return[t,n+an(o-n,l)]}}function kl({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:i,targetY:o,targetPosition:l=ne.Top,curvature:s=.25}){const[r,a]=ro({pos:n,x1:e,y1:t,x2:i,y2:o,c:s}),[u,c]=ro({pos:l,x1:i,y1:o,x2:e,y2:t,c:s}),[d,f,h,y]=rc({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${r},${a} ${u},${c} ${i},${o}`,d,f,h,y]}function Sl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,l=n<e?n+o:n-o,s=Math.abs(i-t)/2,r=i<t?i+s:i-s;return[l,r,o,s]}function sc({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){var r,a;if(!o)return i;const l=n||t.selected||e.selected,s=Math.max(((r=e[ye])==null?void 0:r.z)||0,((a=t[ye])==null?void 0:a.z)||0,1e3);return i+(l?s:0)}function ac({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const l=Ai(no(e),no(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return An(s,Oi(l))>0}const uc=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,cc=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),fc=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ju(e)?n={...e}:n={...e,id:uc(e)},cc(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function El({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,l,s,r]=Sl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,l,s,r]}const so={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},dc=({source:e,sourcePosition:t=ne.Bottom,target:n})=>t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ao=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function hc({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:i=ne.Top,center:o,offset:l}){const s=so[t],r=so[i],a={x:e.x+s.x*l,y:e.y+s.y*l},u={x:n.x+r.x*l,y:n.y+r.y*l},c=dc({source:a,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h=[],y,b;const P={x:0,y:0},g={x:0,y:0},[v,S,w,k]=Sl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*r[d]===-1){y=o.x??v,b=o.y??S;const z=[{x:y,y:a.y},{x:y,y:u.y}],A=[{x:a.x,y:b},{x:u.x,y:b}];s[d]===f?h=d==="x"?z:A:h=d==="x"?A:z}else{const z=[{x:a.x,y:u.y}],A=[{x:u.x,y:a.y}];if(d==="x"?h=s.x===f?A:z:h=s.y===f?z:A,t===i){const O=Math.abs(e[d]-n[d]);if(O<=l){const _=Math.min(l-1,l-O);s[d]===f?P[d]=(a[d]>e[d]?-1:1)*_:g[d]=(u[d]>n[d]?-1:1)*_}}if(t!==i){const O=d==="x"?"y":"x",_=s[d]===r[O],N=a[O]>u[O],E=a[O]<u[O];(s[d]===1&&(!_&&N||_&&E)||s[d]!==1&&(!_&&E||_&&N))&&(h=d==="x"?z:A)}const D={x:a.x+P.x,y:a.y+P.y},H={x:u.x+g.x,y:u.y+g.y},m=Math.max(Math.abs(D.x-h[0].x),Math.abs(H.x-h[0].x)),K=Math.max(Math.abs(D.y-h[0].y),Math.abs(H.y-h[0].y));m>=K?(y=(D.x+H.x)/2,b=h[0].y):(y=h[0].x,b=(D.y+H.y)/2)}return[[e,{x:a.x+P.x,y:a.y+P.y},...h,{x:u.x+g.x,y:u.y+g.y},n],y,b,w,k]}function gc(e,t,n,i){const o=Math.min(ao(e,t)/2,ao(t,n)/2,i),{x:l,y:s}=t;if(e.x===l&&l===n.x||e.y===s&&s===n.y)return`L${l} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${l+o*u},${s}Q ${l},${s} ${l},${s+o*c}`}const r=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${l},${s+o*a}Q ${l},${s} ${l+o*r},${s}`}function Cn({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:i,targetY:o,targetPosition:l=ne.Top,borderRadius:s=5,centerX:r,centerY:a,offset:u=20}){const[c,d,f,h,y]=hc({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:r,y:a},offset:u});return[c.reduce((P,g,v)=>{let S="";return v>0&&v<c.length-1?S=gc(c[v-1],g,c[v+1],s):S=`${v===0?"M":"L"}${g.x} ${g.y}`,P+=S,P},""),d,f,h,y]}function uo(e){var t,n,i;return!!((t=e==null?void 0:e[ye])!=null&&t.handleBounds||(n=e==null?void 0:e.handles)!=null&&n.length)&&!!((i=e==null?void 0:e.computed)!=null&&i.width||e!=null&&e.width||e!=null&&e.initialWidth)}function mc(e){var h,y,b;const{sourceNode:t,targetNode:n}=e;if(!uo(t)||!uo(n))return null;const i=((h=t[ye])==null?void 0:h.handleBounds)||co(t.handles),o=((y=n[ye])==null?void 0:y.handleBounds)||co(n.handles),l=ho((i==null?void 0:i.source)??[],e.sourceHandle),s=ho(e.connectionMode===kt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle),r=(l==null?void 0:l.position)||ne.Bottom,a=(s==null?void 0:s.position)||ne.Top;if(!l||!s)return(b=e.onError)==null||b.call(e,"008",$t.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const[u,c]=fo(r,t,l),[d,f]=fo(a,n,s);return{sourceX:u,sourceY:c,targetX:d,targetY:f,sourcePosition:r,targetPosition:a}}function co(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function fo(e,t,n=null){var r,a,u,c;const i=((n==null?void 0:n.x)??0)+(((a=(r=t.computed)==null?void 0:r.positionAbsolute)==null?void 0:a.x)??0),o=((n==null?void 0:n.y)??0)+(((c=(u=t.computed)==null?void 0:u.positionAbsolute)==null?void 0:c.y)??0),{width:l,height:s}=n??qn(t);switch(e){case ne.Top:return[i+l/2,o];case ne.Right:return[i+l,o+s/2];case ne.Bottom:return[i+l/2,o+s];case ne.Left:return[i,o+s/2]}}function ho(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function yi(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function yc(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const l=new Set;return e.reduce((s,r)=>([r.markerStart||i,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=yi(a,t);l.has(u)||(s.push({id:u,color:a.color||n,...a}),l.add(u))}}),s),[]).sort((s,r)=>s.id.localeCompare(r.id))}function _c(e,t,n=[0,0],i){return e.map(o=>{var l,s,r,a,u,c;if(o.parentNode&&!t.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||i!=null&&i[o.id]){const d=o.parentNode?t.get(o.parentNode):null,{x:f,y:h,z:y}=Pl(o,e,t,{...o.position,z:((l=o[ye])==null?void 0:l.z)??0},(d==null?void 0:d.origin)||n),b=f!==((r=(s=o.computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)||h!==((u=(a=o.computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y);o.computed.positionAbsolute=b?{x:f,y:h}:(c=o.computed)==null?void 0:c.positionAbsolute,o[ye].z=y,i!=null&&i[o.id]&&(o[ye].isParent=!0)}return o})}function Ml(e,t,n={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const i=new Map(t);t.clear();const o={},l=n!=null&&n.elevateNodesOnSelect?1e3:0,s=e.map(a=>{var h,y,b;const u=i.get(a.id);if(a===((h=u==null?void 0:u[ye])==null?void 0:h.userProvidedNode))return t.set(a.id,u),u;const c={...n.defaults,...a,computed:{positionAbsolute:a.position,width:(y=a.computed)==null?void 0:y.width,height:(b=a.computed)==null?void 0:b.height}},d=(qt(a.zIndex)?a.zIndex:0)+(a.selected?l:0),f=(a==null?void 0:a[ye])||(u==null?void 0:u[ye]);return c.parentNode&&(o[c.parentNode]=!0),Object.defineProperty(c,ye,{enumerable:!1,value:{handleBounds:f==null?void 0:f.handleBounds,z:d,userProvidedNode:a}}),t.set(c.id,c),c});return _c(s,t,n.nodeOrigin,o)}function Pl(e,t,n,i,o){var r,a;if(!e.parentNode)return i;const l=n.get(e.parentNode),{position:s}=en(l,(l==null?void 0:l.origin)||o);return Pl(l,t,n,{x:(i.x??0)+s.x,y:(i.y??0)+s.y,z:(((r=l[ye])==null?void 0:r.z)??0)>(i.z??0)?((a=l[ye])==null?void 0:a.z)??0:i.z??0},l.origin||o)}function bc(e,t,n,i,o,l){const s=i==null?void 0:i.querySelector(".xyflow__viewport");if(!s)return null;const r=window.getComputedStyle(s),{m22:a}=new window.DOMMatrixReadOnly(r.transform);return t.map(c=>{var f,h;const d=e.get(c.id);if(d){const y=wl(d.nodeElement);if(!!(y.width&&y.height&&(((f=c.computed)==null?void 0:f.width)!==y.width||((h=c.computed)==null?void 0:h.height)!==y.height||d.forceUpdate))){l==null||l(c.id,y);const P={...c,computed:{...c.computed,...y},[ye]:{...c[ye],handleBounds:{source:lo(".source",d.nodeElement,a,c.origin||o),target:lo(".target",d.nodeElement,a,c.origin||o)}}};return n.set(c.id,P),P}}return c})}function wc({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:l}){if(!t||!e.x&&!e.y)return!1;const s=t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,l]],i);return!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2])}function zl(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:l,sourceHandle:s=null,targetHandle:r=null}=i,a=`${o}-source-${s}`,u=`${l}-target-${r}`,c=e.get(a)||new Map,d=e.get(u)||new Map,f={edgeId:i.id,source:o,target:l,sourceHandle:s,targetHandle:r};t.set(i.id,i),e.set(a,c.set(`${l}-${r}`,f)),e.set(u,d.set(`${o}-${s}`,f))}}function ti(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Nl(e,t){if(!e.parentNode)return!1;const n=t.find(i=>i.id===i.parentNode);return n?n.selected?!0:Nl(n,t):!1}function go(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function vc(e,t,n,i){return e.filter(o=>(o.selected||o.id===i)&&(!o.parentNode||!Nl(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var l,s,r,a,u,c,d;return{id:o.id,position:o.position||{x:0,y:0},distance:{x:n.x-(((s=(l=o.computed)==null?void 0:l.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((a=(r=o.computed)==null?void 0:r.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,origin:o.origin,expandParent:o.expandParent,computed:{positionAbsolute:((u=o.computed)==null?void 0:u.positionAbsolute)||{x:0,y:0},width:((c=o.computed)==null?void 0:c.width)||0,height:((d=o.computed)==null?void 0:d.height)||0}}})}function ni({nodeId:e,dragItems:t,nodeLookup:n}){const i=t.map(o=>({...n.get(o.id),position:o.position,computed:{...o.computed,positionAbsolute:o.computed.positionAbsolute}}));return[e?i.find(o=>o.id===e):i[0],i]}function kc({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let l={x:null,y:null},s=0,r=[],a=!1,u={x:0,y:0},c=null,d=!1,f=null;function h({noDragClassName:b,handleSelector:P,domNode:g,isSelectable:v,nodeId:S}){f=Re(g);function w({x:A,y:D},H){const{nodeLookup:m,nodeExtent:K,snapGrid:O,snapToGrid:_,nodeOrigin:N,onNodeDrag:E,onSelectionDrag:I,onError:R,updateNodePositions:W}=t();l={x:A,y:D};let q=!1,Z={x:0,y:0,x2:0,y2:0};if(r.length>1&&K){const T=Bn(r,{nodeOrigin:N});Z=Nn(T)}if(r=r.map(T=>{var ee,oe;let p={x:A-T.distance.x,y:D-T.distance.y};_&&(p=Ci(p,O));const $=[[K[0][0],K[0][1]],[K[1][0],K[1][1]]];r.length>1&&K&&!T.extent&&($[0][0]=T.computed.positionAbsolute.x-Z.x+K[0][0],$[1][0]=T.computed.positionAbsolute.x+(((ee=T.computed)==null?void 0:ee.width)??0)-Z.x2+K[1][0],$[0][1]=T.computed.positionAbsolute.y-Z.y+K[0][1],$[1][1]=T.computed.positionAbsolute.y+(((oe=T.computed)==null?void 0:oe.height)??0)-Z.y2+K[1][1]);const{position:ie,positionAbsolute:B}=pu({nodeId:T.id,nextPosition:p,nodeLookup:m,nodeExtent:$,nodeOrigin:N,onError:R});return q=q||T.position.x!==ie.x||T.position.y!==ie.y,T.position=ie,T.computed.positionAbsolute=B,T}),!!q&&(W(r,!0),H&&(i||E||!S&&I))){const[T,p]=ni({nodeId:S,dragItems:r,nodeLookup:m});i==null||i(H,r,T,p),E==null||E(H,T,p),S||ti(I)(H,T,p)}}function k(){if(!c)return;const[A,D]=_l(u,c);if(A!==0||D!==0){const{transform:H,panBy:m}=t();l.x=(l.x??0)-A/H[2],l.y=(l.y??0)-D/H[2],m({x:A,y:D})&&w(l,null)}s=requestAnimationFrame(k)}function C(A){var Z;const{nodes:D,nodeLookup:H,multiSelectionActive:m,nodesDraggable:K,transform:O,snapGrid:_,snapToGrid:N,selectNodesOnDrag:E,onNodeDragStart:I,onSelectionDragStart:R,unselectNodesAndEdges:W}=t();d=!0,(!E||!v)&&!m&&S&&((Z=H.get(S))!=null&&Z.selected||W()),v&&E&&S&&(e==null||e(S));const q=ei(A.sourceEvent,{transform:O,snapGrid:_,snapToGrid:N});if(l=q,r=vc(D,K,q,S),r.length>0&&(n||I||!S&&R)){const[T,p]=ni({nodeId:S,dragItems:r,nodeLookup:H});n==null||n(A.sourceEvent,r,T,p),I==null||I(A.sourceEvent,T,p),S||ti(R)(A.sourceEvent,T,p)}}const z=ia().on("start",A=>{const{domNode:D,nodeDragThreshold:H,transform:m,snapGrid:K,snapToGrid:O}=t();H===0&&C(A),l=ei(A.sourceEvent,{transform:m,snapGrid:K,snapToGrid:O}),c=(D==null?void 0:D.getBoundingClientRect())||null,u=lt(A.sourceEvent,c)}).on("drag",A=>{const{autoPanOnNodeDrag:D,transform:H,snapGrid:m,snapToGrid:K,nodeDragThreshold:O}=t(),_=ei(A.sourceEvent,{transform:H,snapGrid:m,snapToGrid:K});if(!a&&D&&d&&(a=!0,k()),!d){const N=_.xSnapped-(l.x??0),E=_.ySnapped-(l.y??0);Math.sqrt(N*N+E*E)>O&&C(A)}(l.x!==_.xSnapped||l.y!==_.ySnapped)&&r&&d&&(u=lt(A.sourceEvent,c),w(_,A.sourceEvent))}).on("end",A=>{if(d&&(a=!1,d=!1,cancelAnimationFrame(s),r.length>0)){const{nodeLookup:D,updateNodePositions:H,onNodeDragStop:m,onSelectionDragStop:K}=t();if(H(r,!1),o||m||!S&&K){const[O,_]=ni({nodeId:S,dragItems:r,nodeLookup:D});o==null||o(A.sourceEvent,r,O,_),m==null||m(A.sourceEvent,O,_),S||ti(K)(A.sourceEvent,O,_)}}}).filter(A=>{const D=A.target;return!A.button&&(!b||!go(D,`.${b}`,g))&&(!P||go(D,P,g))});f.call(z)}function y(){f==null||f.on(".drag",null)}return{update:h,destroy:y}}function mo(e,t,n,i){return(t[n]||[]).reduce((o,l)=>{var s,r,a,u;return`${e.id}-${l.id}-${n}`!==i&&o.push({id:l.id||null,type:n,nodeId:e.id,x:(((r=(s=e.computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)??0)+l.x+l.width/2,y:(((u=(a=e.computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y)??0)+l.y+l.height/2}),o},[])}function Sc(e,t,n){let i=[],o=1/0;for(const l of n){const s=Math.sqrt(Math.pow(l.x-e.x,2)+Math.pow(l.y-e.y,2));s<=t&&(s<o?i=[l]:s===o&&i.push(l),o=s)}return i.length?i.length===1?i[0]:i.find(l=>l.type==="target")||i[0]:null}function Ec({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((o,l)=>{if(l[ye]){const{handleBounds:s}=l[ye];let r=[],a=[];s&&(r=mo(l,s,"source",`${t}-${n}-${i}`),a=mo(l,s,"target",`${t}-${n}-${i}`)),o.push(...r,...a)}return o},[])}function Al(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Mc(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Ol=()=>!0;let un=null;function Pc(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:l,isTarget:s,domNode:r,nodes:a,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:y,onConnect:b,onConnectEnd:P,isValidConnection:g=Ol,onEdgeUpdateEnd:v,updateConnection:S,getTransform:w}){const k=ic(e.target);let C=0,z;const{x:A,y:D}=lt(e),H=k==null?void 0:k.elementFromPoint(A,D),m=Al(l,H),K=r==null?void 0:r.getBoundingClientRect();if(!K||!m)return;let O=lt(e,K),_=!1,N=null,E=!1,I=null;const R=Ec({nodes:a,nodeId:o,handleId:i,handleType:m});function W(){if(!c||!K)return;const[T,p]=_l(O,K);f({x:T,y:p}),C=requestAnimationFrame(W)}un={nodeId:o,handleId:i,type:m},S({connectionPosition:O,connectionStatus:null,connectionStartHandle:un,connectionEndHandle:null}),y==null||y(e,{nodeId:o,handleId:i,handleType:m});function q(T){const p=w();O=lt(T,K),z=Sc(Fn(O,p,!1,[1,1]),n,R),_||(W(),_=!0);const $=Cl(T,{handle:z,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:k,lib:u,flowId:d});I=$.handleDomNode,N=$.connection,E=$.isValid,S({connectionStartHandle:un,connectionPosition:z&&E?bl({x:z.x,y:z.y},p):O,connectionStatus:Mc(!!z,E),connectionEndHandle:$.endHandle})}function Z(T){(z||I)&&N&&E&&(b==null||b(N)),P==null||P(T),l&&(v==null||v(T)),h(),cancelAnimationFrame(C),_=!1,E=!1,N=null,I=null,un=null,k.removeEventListener("mousemove",q),k.removeEventListener("mouseup",Z),k.removeEventListener("touchmove",q),k.removeEventListener("touchend",Z)}k.addEventListener("mousemove",q),k.addEventListener("mouseup",Z),k.addEventListener("touchmove",q),k.addEventListener("touchend",Z)}function Cl(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:l,doc:s,lib:r,flowId:a,isValidConnection:u=Ol}){const c=l==="target",d=t?s.querySelector(`.${r}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:f,y:h}=lt(e),y=s.elementFromPoint(f,h),b=y!=null&&y.classList.contains(`${r}-flow__handle`)?y:d,P={handleDomNode:b,isValid:!1,connection:null,endHandle:null};if(b){const g=Al(void 0,b),v=b.getAttribute("data-nodeid"),S=b.getAttribute("data-handleid"),w=b.classList.contains("connectable"),k=b.classList.contains("connectableend");if(!v)return P;const C={source:c?v:i,sourceHandle:c?S:o,target:c?i:v,targetHandle:c?o:S};P.connection=C,w&&k&&(n===kt.Strict?c&&g==="source"||!c&&g==="target":v!==i||S!==o)&&(P.endHandle={nodeId:v,handleId:S,type:g},P.isValid=u(C))}return P}const zc={onPointerDown:Pc,isValid:Cl};function wh({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const o=Re(e);function l({translateExtent:r,width:a,height:u,zoomStep:c=10,pannable:d=!0,zoomable:f=!0,inversePan:h=!1}){const y=g=>{const v=n();if(g.sourceEvent.type!=="wheel"||!t)return;const S=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,w=v[2]*Math.pow(2,S);t.scaleTo(w)},b=g=>{const v=n();if(g.sourceEvent.type!=="mousemove"||!t)return;const S=i()*Math.max(v[2],Math.log(v[2]))*(h?-1:1),w={x:v[0]-g.sourceEvent.movementX*S,y:v[1]-g.sourceEvent.movementY*S},k=[[0,0],[a,u]];t.setViewportConstrained({x:w.x,y:w.y,zoom:v[2]},k,r)},P=gl().on("zoom",d?b:null).on("zoom.wheel",f?y:null);o.call(P,{})}function s(){o.on("zoom",null)}return{update:l,destroy:s,pointer:qe}}const Nc=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Zn=e=>({x:e.x,y:e.y,zoom:e.k}),ii=({x:e,y:t,zoom:n})=>Wn.translate(e,t).scale(n),At=(e,t)=>e.target.closest(`.${t}`),Hl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),oi=(e,t=0)=>typeof t=="number"&&t>0?e.transition().duration(t):e,Tl=e=>{const t=e.ctrlKey&&On()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Ac({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:s,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(At(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1,f=On();if(c.ctrlKey&&s&&f){const g=qe(c),v=Tl(c),S=d*Math.pow(2,v);i.scaleTo(n,S,g,c);return}const h=c.deltaMode===1?20:1;let y=o===tt.Vertical?0:c.deltaX*h,b=o===tt.Horizontal?0:c.deltaY*h;!f&&c.shiftKey&&o!==tt.Vertical&&(y=c.deltaY*h,b=0),i.translateBy(n,-(y/d)*l,-(b/d)*l,{internal:!0});const P=Zn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,r==null||r(c,P)),e.isPanScrolling&&(a==null||a(c,P),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,P),e.isPanScrolling=!1},150))}}function Oc({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){if(!t||At(i,e))return null;i.preventDefault(),n.call(this,i,o)}}function Cc({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var l,s,r;if((l=i.sourceEvent)!=null&&l.internal)return;const o=Zn(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((r=i.sourceEvent)==null?void 0:r.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,o))}}function Hc({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return l=>{var s,r;e.usedRightMouseButton=!!(n&&Hl(t,e.mouseButton??0)),(s=l.sourceEvent)!=null&&s.sync||i([l.transform.x,l.transform.y,l.transform.k]),o&&!((r=l.sourceEvent)!=null&&r.internal)&&(o==null||o(l.sourceEvent,Zn(l.transform)))}}function Tc({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:l}){return s=>{var r;if(!((r=s.sourceEvent)!=null&&r.internal)&&(e.isZoomingOrPanning=!1,l&&Hl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&l(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o&&Nc(e.prevViewport,s.transform))){const a=Zn(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,a)},n?150:0)}}}function Ic({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:s,noWheelClassName:r,noPanClassName:a,lib:u}){return c=>{const d=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(At(c,`${u}-flow__node`)||At(c,`${u}-flow__edge`)))return!0;if(!i&&!d&&!o&&!l&&!n||s||!l&&c.type==="dblclick"||At(c,r)&&c.type==="wheel"||At(c,a)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel"||!d&&!o&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&(c.type==="mousedown"||c.type==="touchstart"))return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function Dc({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:o,onPanZoom:l,onPanZoomStart:s,onPanZoomEnd:r,onTransformChange:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=gl().scaleExtent([t,n]).translateExtent(i),h=Re(e).call(f);v({x:o.x,y:o.y,zoom:Yt(o.zoom,t,n)},[[0,0],[d.width,d.height]],i);const y=h.on("wheel.zoom");f.wheelDelta(Tl);function b(H,m){h&&(f==null||f.transform(oi(h,m==null?void 0:m.duration),H))}function P({noWheelClassName:H,noPanClassName:m,onPaneContextMenu:K,userSelectionActive:O,panOnScroll:_,panOnDrag:N,panOnScrollMode:E,panOnScrollSpeed:I,preventScrolling:R,zoomOnPinch:W,zoomOnScroll:q,zoomOnDoubleClick:Z,zoomActivationKeyPressed:T,lib:p}){O&&!c.isZoomingOrPanning&&g();const ie=_&&!T&&!O?Ac({zoomPanValues:c,noWheelClassName:H,d3Selection:h,d3Zoom:f,panOnScrollMode:E,panOnScrollSpeed:I,zoomOnPinch:W,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:r}):Oc({noWheelClassName:H,preventScrolling:R,d3ZoomHandler:y});if(h.on("wheel.zoom",ie,{passive:!1}),!O){const ee=Cc({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});f.on("start",ee);const oe=Hc({zoomPanValues:c,panOnDrag:N,onPaneContextMenu:!!K,onPanZoom:l,onTransformChange:a});f.on("zoom",oe);const _e=Tc({zoomPanValues:c,panOnDrag:N,panOnScroll:_,onPaneContextMenu:K,onPanZoomEnd:r,onDraggingChange:u});f.on("end",_e)}const B=Ic({zoomActivationKeyPressed:T,panOnDrag:N,zoomOnScroll:q,panOnScroll:_,zoomOnDoubleClick:Z,zoomOnPinch:W,userSelectionActive:O,noPanClassName:m,noWheelClassName:H,lib:p});f.filter(B)}function g(){f.on("zoom",null)}function v(H,m,K){const O=ii(H),_=f==null?void 0:f.constrain()(O,m,K);return _&&b(_),_}function S(H,m){const K=ii(H);return b(K,m),K}function w(H){if(h){const m=ii(H),K=h.property("__zoom");(K.k!==H.zoom||K.x!==H.x||K.y!==H.y)&&(f==null||f.transform(h,m,null,{sync:!0}))}}function k(){const H=h?hl(h.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function C(H,m){h&&(f==null||f.scaleTo(oi(h,m==null?void 0:m.duration),H))}function z(H,m){h&&(f==null||f.scaleBy(oi(h,m==null?void 0:m.duration),H))}function A(H){f==null||f.scaleExtent(H)}function D(H){f==null||f.translateExtent(H)}return{update:P,destroy:g,setViewport:S,setViewportConstrained:v,getViewport:k,scaleTo:C,scaleBy:z,setScaleExtent:A,setTranslateExtent:D,syncViewport:w}}var yo;(function(e){e.Line="line",e.Handle="handle"})(yo||(yo={}));function Xc(e){let t,n,i,o,l,s;const r=e[41].default,a=Ge(r,e,e[40],null);return{c(){t=Pe("div"),a&&a.c(),this.h()},l(u){t=ze(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var c=de(t);a&&a.l(c),c.forEach(F),this.h()},h(){X(t,"data-handleid",e[13]),X(t,"data-nodeid",e[11]),X(t,"data-handlepos",e[2]),X(t,"data-id",n=e[9]+"-"+e[11]+"-"+(e[0]||null)+"-"+e[1]),X(t,"class",i=Oe(["svelte-flow__handle",`svelte-flow__handle-${e[2]}`,"nodrag","nopan",e[2],{valid:e[6],connectingto:e[5],connectingfrom:e[7]},e[4]])),X(t,"style",e[3]),X(t,"role","button"),X(t,"tabindex","-1"),te(t,"source",!e[10]),te(t,"target",e[10]),te(t,"connectablestart",e[8]),te(t,"connectableend",e[8]),te(t,"connectable",e[8]),te(t,"connectionindicator",e[8])},m(u,c){x(u,t,c),a&&a.m(t,null),o=!0,l||(s=[be(t,"mousedown",e[30]),be(t,"touchstart",e[30])],l=!0)},p(u,c){a&&a.p&&(!o||c[1]&512)&&Ue(a,r,u,u[40],o?Qe(r,u[40],c,null):Je(u[40]),null),(!o||c[0]&4)&&X(t,"data-handlepos",u[2]),(!o||c[0]&515&&n!==(n=u[9]+"-"+u[11]+"-"+(u[0]||null)+"-"+u[1]))&&X(t,"data-id",n),(!o||c[0]&244&&i!==(i=Oe(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],{valid:u[6],connectingto:u[5],connectingfrom:u[7]},u[4]])))&&X(t,"class",i),(!o||c[0]&8)&&X(t,"style",u[3]),(!o||c[0]&1268)&&te(t,"source",!u[10]),(!o||c[0]&1268)&&te(t,"target",u[10]),(!o||c[0]&500)&&te(t,"connectablestart",u[8]),(!o||c[0]&500)&&te(t,"connectableend",u[8]),(!o||c[0]&500)&&te(t,"connectable",u[8]),(!o||c[0]&500)&&te(t,"connectionindicator",u[8])},i(u){o||(U(a,u),o=!0)},o(u){J(a,u),o=!1},d(u){u&&F(t),a&&a.d(u),l=!1,gt(s)}}}function Yc(e,t,n){let i,o,l,s,r,a,u,c,d,f,h,y,b,P,g,v,S,w,k,C,z,{$$slots:A={},$$scope:D}=t,{id:H=void 0}=t,{type:m="source"}=t,{position:K=ne.Top}=t,{style:O=void 0}=t,{isConnectable:_=void 0}=t,{onconnect:N=void 0}=t,{ondisconnect:E=void 0}=t,{class:I=void 0}=t;const R=m==="target",W=mn("svelteflow__node_id"),q=mn("svelteflow__node_connectable");Q(e,q,G=>n(39,z=G));const Z=H||null,T=Me(),{connectionMode:p,domNode:$,nodes:ie,connectionRadius:B,viewport:ee,isValidConnection:oe,lib:_e,addEdge:L,onedgecreate:ve,panBy:Ve,cancelConnection:Ie,updateConnection:De,autoPanOnConnect:me,edges:mt,connectionLookup:yt,onconnect:st,onconnectstart:at,onconnectend:ut,flowId:ct,connection:ft}=T;Q(e,p,G=>n(50,S=G)),Q(e,$,G=>n(52,k=G)),Q(e,ie,G=>n(51,w=G)),Q(e,B,G=>n(53,C=G)),Q(e,ee,G=>n(42,c=G)),Q(e,oe,G=>n(47,b=G)),Q(e,_e,G=>n(49,v=G)),Q(e,ve,G=>n(46,y=G)),Q(e,me,G=>n(48,g=G)),Q(e,mt,G=>n(38,u=G)),Q(e,yt,G=>n(37,a=G)),Q(e,st,G=>n(45,h=G)),Q(e,at,G=>n(44,f=G)),Q(e,ut,G=>n(43,d=G)),Q(e,ct,G=>n(9,P=G)),Q(e,ft,G=>n(36,r=G));function St(G){const Ne=vl(G);(Ne&&G.button===0||!Ne)&&zc.onPointerDown(G,{handleId:Z,nodeId:W,isTarget:R,connectionRadius:C,domNode:k,nodes:w,connectionMode:S,lib:v,autoPanOnConnect:g,flowId:P,isValidConnection:b,updateConnection:De,cancelConnection:Ie,panBy:Ve,onConnect:Ce=>{const Xe=y?y(Ce):Ce;Xe&&(L(Xe),h==null||h(Ce))},onConnectStart:(Ce,Xe)=>{f==null||f(Ce,{nodeId:Xe.nodeId,handleId:Xe.handleId,handleType:Xe.handleType})},onConnectEnd:Ce=>{d==null||d(Ce)},getTransform:()=>[c.x,c.y,c.zoom]})}let V=null,Fe;return e.$$set=G=>{"id"in G&&n(0,H=G.id),"type"in G&&n(1,m=G.type),"position"in G&&n(2,K=G.position),"style"in G&&n(3,O=G.style),"isConnectable"in G&&n(31,_=G.isConnectable),"onconnect"in G&&n(32,N=G.onconnect),"ondisconnect"in G&&n(33,E=G.ondisconnect),"class"in G&&n(4,I=G.class),"$$scope"in G&&n(40,D=G.$$scope)},e.$$.update=()=>{var G,Ne,Ce,Xe,Et,Mt;if(e.$$.dirty[1]&257&&n(8,i=_!==void 0?_:z),e.$$.dirty[0]&3|e.$$.dirty[1]&198&&(N||E)&&n(35,Fe=a.get(`${W}-${m}-${H||null}`)),e.$$.dirty[1]&30){if(V&&!Uu(Fe,V)){const Pt=Fe??new Map;eo(V,Pt,E),eo(Pt,V,N)}n(34,V=Fe??new Map)}e.$$.dirty[0]&2|e.$$.dirty[1]&32&&n(7,o=((G=r.startHandle)==null?void 0:G.nodeId)===W&&((Ne=r.startHandle)==null?void 0:Ne.type)===m&&((Ce=r.startHandle)==null?void 0:Ce.handleId)===Z),e.$$.dirty[0]&2|e.$$.dirty[1]&32&&n(5,l=((Xe=r.endHandle)==null?void 0:Xe.nodeId)===W&&((Et=r.endHandle)==null?void 0:Et.type)===m&&((Mt=r.endHandle)==null?void 0:Mt.handleId)===Z),e.$$.dirty[0]&32|e.$$.dirty[1]&32&&n(6,s=l&&r.status==="valid")},[H,m,K,O,I,l,s,o,i,P,R,W,q,Z,p,$,ie,B,ee,oe,_e,ve,me,mt,yt,st,at,ut,ct,ft,St,_,N,E,V,Fe,r,a,u,z,D,A]}class Vc extends ae{constructor(t){super(),ue(this,t,Yc,Xc,fe,{id:0,type:1,position:2,style:3,isConnectable:31,onconnect:32,ondisconnect:33,class:4},null,[-1,-1])}}const Hn=Vc;function Rc(e){var a;let t,n,i=((a=e[0])==null?void 0:a.label)+"",o,l,s,r;return t=new Hn({props:{type:"target",position:e[1]}}),s=new Hn({props:{type:"source",position:e[2]}}),{c(){le(t.$$.fragment),n=Se(),o=Tn(i),l=Se(),le(s.$$.fragment)},l(u){ce(t.$$.fragment,u),n=Ee(u),o=In(u,i),l=Ee(u),ce(s.$$.fragment,u)},m(u,c){re(t,u,c),x(u,n,c),x(u,o,c),x(u,l,c),re(s,u,c),r=!0},p(u,[c]){var h;const d={};c&2&&(d.position=u[1]),t.$set(d),(!r||c&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+"")&&Dn(o,i);const f={};c&4&&(f.position=u[2]),s.$set(f)},i(u){r||(U(t.$$.fragment,u),U(s.$$.fragment,u),r=!0)},o(u){J(t.$$.fragment,u),J(s.$$.fragment,u),r=!1},d(u){u&&(F(n),F(o),F(l)),se(t,u),se(s,u)}}}function Kc(e,t,n){let{data:i={label:"Node"}}=t,{targetPosition:o=ne.Top}=t,{sourcePosition:l=ne.Bottom}=t,{id:s=""}=t,{width:r=void 0}=t,{height:a=void 0}=t,{selected:u=void 0}=t,{type:c=void 0}=t,{dragging:d=!1}=t,{dragHandle:f=void 0}=t,{positionAbsoluteX:h=0}=t,{positionAbsoluteY:y=0}=t,{isConnectable:b}=t,{zIndex:P}=t;return e.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"sourcePosition"in g&&n(2,l=g.sourcePosition),"id"in g&&n(3,s=g.id),"width"in g&&n(4,r=g.width),"height"in g&&n(5,a=g.height),"selected"in g&&n(6,u=g.selected),"type"in g&&n(7,c=g.type),"dragging"in g&&n(8,d=g.dragging),"dragHandle"in g&&n(9,f=g.dragHandle),"positionAbsoluteX"in g&&n(10,h=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(11,y=g.positionAbsoluteY),"isConnectable"in g&&n(12,b=g.isConnectable),"zIndex"in g&&n(13,P=g.zIndex)},[i,o,l,s,r,a,u,c,d,f,h,y,b,P]}class Lc extends ae{constructor(t){super(),ue(this,t,Kc,Rc,fe,{data:0,targetPosition:1,sourcePosition:2,id:3,width:4,height:5,selected:6,type:7,dragging:8,dragHandle:9,positionAbsoluteX:10,positionAbsoluteY:11,isConnectable:12,zIndex:13})}}const Il=Lc;function Wc(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,l;return o=new Hn({props:{type:"source",position:e[1]}}),{c(){n=Tn(t),i=Se(),le(o.$$.fragment)},l(r){n=In(r,t),i=Ee(r),ce(o.$$.fragment,r)},m(r,a){x(r,n,a),x(r,i,a),re(o,r,a),l=!0},p(r,[a]){var c;(!l||a&1)&&t!==(t=((c=r[0])==null?void 0:c.label)+"")&&Dn(n,t);const u={};a&2&&(u.position=r[1]),o.$set(u)},i(r){l||(U(o.$$.fragment,r),l=!0)},o(r){J(o.$$.fragment,r),l=!1},d(r){r&&(F(n),F(i)),se(o,r)}}}function Bc(e,t,n){let{data:i={label:"Node"}}=t,{sourcePosition:o=ne.Bottom}=t,{id:l=""}=t,{width:s=void 0}=t,{height:r=void 0}=t,{selected:a=void 0}=t,{targetPosition:u=void 0}=t,{type:c=void 0}=t,{dragging:d=!1}=t,{dragHandle:f=void 0}=t,{positionAbsoluteX:h=0}=t,{positionAbsoluteY:y=0}=t,{isConnectable:b}=t,{zIndex:P}=t;return e.$$set=g=>{"data"in g&&n(0,i=g.data),"sourcePosition"in g&&n(1,o=g.sourcePosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,s=g.width),"height"in g&&n(4,r=g.height),"selected"in g&&n(5,a=g.selected),"targetPosition"in g&&n(6,u=g.targetPosition),"type"in g&&n(7,c=g.type),"dragging"in g&&n(8,d=g.dragging),"dragHandle"in g&&n(9,f=g.dragHandle),"positionAbsoluteX"in g&&n(10,h=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(11,y=g.positionAbsoluteY),"isConnectable"in g&&n(12,b=g.isConnectable),"zIndex"in g&&n(13,P=g.zIndex)},[i,o,l,s,r,a,u,c,d,f,h,y,b,P]}class Fc extends ae{constructor(t){super(),ue(this,t,Bc,Wc,fe,{data:0,sourcePosition:1,id:2,width:3,height:4,selected:5,targetPosition:6,type:7,dragging:8,dragHandle:9,positionAbsoluteX:10,positionAbsoluteY:11,isConnectable:12,zIndex:13})}}const qc=Fc;function Zc(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,l;return o=new Hn({props:{type:"target",position:e[1]}}),{c(){n=Tn(t),i=Se(),le(o.$$.fragment)},l(r){n=In(r,t),i=Ee(r),ce(o.$$.fragment,r)},m(r,a){x(r,n,a),x(r,i,a),re(o,r,a),l=!0},p(r,[a]){var c;(!l||a&1)&&t!==(t=((c=r[0])==null?void 0:c.label)+"")&&Dn(n,t);const u={};a&2&&(u.position=r[1]),o.$set(u)},i(r){l||(U(o.$$.fragment,r),l=!0)},o(r){J(o.$$.fragment,r),l=!1},d(r){r&&(F(n),F(i)),se(o,r)}}}function Gc(e,t,n){let{data:i={label:"Node"}}=t,{targetPosition:o=ne.Top}=t,{id:l=""}=t,{width:s=void 0}=t,{height:r=void 0}=t,{selected:a=void 0}=t,{sourcePosition:u=void 0}=t,{type:c=void 0}=t,{dragging:d=!1}=t,{dragHandle:f=void 0}=t,{positionAbsoluteX:h=0}=t,{positionAbsoluteY:y=0}=t,{isConnectable:b}=t,{zIndex:P}=t;return e.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,s=g.width),"height"in g&&n(4,r=g.height),"selected"in g&&n(5,a=g.selected),"sourcePosition"in g&&n(6,u=g.sourcePosition),"type"in g&&n(7,c=g.type),"dragging"in g&&n(8,d=g.dragging),"dragHandle"in g&&n(9,f=g.dragHandle),"positionAbsoluteX"in g&&n(10,h=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(11,y=g.positionAbsoluteY),"isConnectable"in g&&n(12,b=g.isConnectable),"zIndex"in g&&n(13,P=g.zIndex)},[i,o,l,s,r,a,u,c,d,f,h,y,b,P]}class Uc extends ae{constructor(t){super(),ue(this,t,Gc,Zc,fe,{data:0,targetPosition:1,id:2,width:3,height:4,selected:5,sourcePosition:6,type:7,dragging:8,dragHandle:9,positionAbsoluteX:10,positionAbsoluteY:11,isConnectable:12,zIndex:13})}}const Jc=Uc;function Qc(e,t,n){let{id:i=""}=t,{width:o=void 0}=t,{height:l=void 0}=t,{data:s={}}=t,{selected:r=void 0}=t,{sourcePosition:a=void 0}=t,{targetPosition:u=void 0}=t,{type:c=void 0}=t,{dragging:d=!1}=t,{dragHandle:f=void 0}=t,{positionAbsoluteX:h=0}=t,{positionAbsoluteY:y=0}=t,{isConnectable:b}=t,{zIndex:P}=t;return e.$$set=g=>{"id"in g&&n(0,i=g.id),"width"in g&&n(1,o=g.width),"height"in g&&n(2,l=g.height),"data"in g&&n(3,s=g.data),"selected"in g&&n(4,r=g.selected),"sourcePosition"in g&&n(5,a=g.sourcePosition),"targetPosition"in g&&n(6,u=g.targetPosition),"type"in g&&n(7,c=g.type),"dragging"in g&&n(8,d=g.dragging),"dragHandle"in g&&n(9,f=g.dragHandle),"positionAbsoluteX"in g&&n(10,h=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(11,y=g.positionAbsoluteY),"isConnectable"in g&&n(12,b=g.isConnectable),"zIndex"in g&&n(13,P=g.zIndex)},[i,o,l,s,r,a,u,c,d,f,h,y,b,P]}class jc extends ae{constructor(t){super(),ue(this,t,Qc,null,fe,{id:0,width:1,height:2,data:3,selected:4,sourcePosition:5,targetPosition:6,type:7,dragging:8,dragHandle:9,positionAbsoluteX:10,positionAbsoluteY:11,isConnectable:12,zIndex:13})}}const xc=jc;function _o(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function pc(e,{target:t,domNode:n}){return _o(e,n,t),{async update({target:i,domNode:o}){_o(e,o,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}function $c(e){let t,n,i,o,l;const s=e[3].default,r=Ge(s,e,e[2],null);return{c(){t=Pe("div"),r&&r.c()},l(a){t=ze(a,"DIV",{});var u=de(t);r&&r.l(u),u.forEach(F)},m(a,u){x(a,t,u),r&&r.m(t,null),i=!0,o||(l=He(n=pc.call(null,t,{target:".svelte-flow__edgelabel-renderer",domNode:e[0]})),o=!0)},p(a,[u]){r&&r.p&&(!i||u&4)&&Ue(r,s,a,a[2],i?Qe(s,a[2],u,null):Je(a[2]),null),n&&ke(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(U(r,a),i=!0)},o(a){J(r,a),i=!1},d(a){a&&F(t),r&&r.d(a),o=!1,l()}}}function ef(e,t,n){let i,{$$slots:o={},$$scope:l}=t;const{domNode:s}=Me();return Q(e,s,r=>n(0,i=r)),e.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[i,s,l,o]}class tf extends ae{constructor(t){super(),ue(this,t,ef,$c,fe,{})}}function Dl(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:l,elementsSelectable:s}=Me();return r=>{const a=Y(e).get(r);if(!a){console.warn("012",$t.error012(r));return}(a.selectable||Y(s)&&typeof a.selectable>"u")&&(t.set(null),n.set(null),a.selected?a.selected&&Y(i)&&l({nodes:[],edges:[a]}):o([r]))}}function nf(e){let t,n,i=`translate(-50%, -50%) translate(${e[1]}px,${e[2]}px)`,o,l,s;const r=e[5].default,a=Ge(r,e,e[7],null);return{c(){t=Pe("div"),a&&a.c(),this.h()},l(u){t=ze(u,"DIV",{class:!0,style:!0,role:!0});var c=de(t);a&&a.l(c),c.forEach(F),this.h()},h(){X(t,"class","svelte-flow__edge-label"),X(t,"style",n="pointer-events: all;"+e[0]),X(t,"role","button"),ge(t,"transform",i)},m(u,c){x(u,t,c),a&&a.m(t,null),o=!0,l||(s=be(t,"click",e[6]),l=!0)},p(u,c){a&&a.p&&(!o||c&128)&&Ue(a,r,u,u[7],o?Qe(r,u[7],c,null):Je(u[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+u[0]))&&X(t,"style",n);const d=c&1;(c&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||d)&&ge(t,"transform",i)},i(u){o||(U(a,u),o=!0)},o(u){J(a,u),o=!1},d(u){u&&F(t),a&&a.d(u),l=!1,s()}}}function of(e){let t,n;return t=new tf({props:{$$slots:{default:[nf]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const l={};o&135&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function lf(e,t,n){let{$$slots:i={},$$scope:o}=t,{style:l=void 0}=t,{x:s=void 0}=t,{y:r=void 0}=t;const a=Dl(),u=mn("svelteflow__edge_id"),c=()=>{u&&a(u)};return e.$$set=d=>{"style"in d&&n(0,l=d.style),"x"in d&&n(1,s=d.x),"y"in d&&n(2,r=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[l,s,r,a,u,i,c,o]}class rf extends ae{constructor(t){super(),ue(this,t,lf,of,fe,{style:0,x:1,y:2})}}const sf=rf;function af(e){let t;return{c(){t=Ke("path"),this.h()},l(n){t=Le(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),de(t).forEach(F),this.h()},h(){X(t,"d",e[1]),X(t,"stroke-opacity",0),X(t,"stroke-width",e[10]),X(t,"fill","none"),X(t,"class","svelte-flow__edge-interaction")},m(n,i){x(n,t,i)},p(n,i){i&2&&X(t,"d",n[1])},d(n){n&&F(t)}}}function bo(e){let t,n;return t=new sf({props:{x:e[3],y:e[4],style:e[5],$$slots:{default:[uf]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,o){const l={};o&8&&(l.x=i[3]),o&16&&(l.y=i[4]),o&32&&(l.style=i[5]),o&4100&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function uf(e){let t;return{c(){t=Tn(e[2])},l(n){t=In(n,e[2])},m(n,i){x(n,t,i)},p(n,i){i&4&&Dn(t,n[2])},d(n){n&&F(t)}}}function cf(e){let t,n,i,o,l,s,r=e[10]&&af(e),a=e[2]&&bo(e);return{c(){t=Ke("path"),i=Se(),r&&r.c(),o=Se(),a&&a.c(),l=we(),this.h()},l(u){t=Le(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),de(t).forEach(F),i=Ee(u),r&&r.l(u),o=Ee(u),a&&a.l(u),l=we(),this.h()},h(){X(t,"id",e[0]),X(t,"d",e[1]),X(t,"class",n=Oe(["svelte-flow__edge-path",e[9]])),X(t,"marker-start",e[6]),X(t,"marker-end",e[7]),X(t,"fill","none"),X(t,"style",e[8])},m(u,c){x(u,t,c),x(u,i,c),r&&r.m(u,c),x(u,o,c),a&&a.m(u,c),x(u,l,c),s=!0},p(u,[c]){(!s||c&1)&&X(t,"id",u[0]),(!s||c&2)&&X(t,"d",u[1]),(!s||c&512&&n!==(n=Oe(["svelte-flow__edge-path",u[9]])))&&X(t,"class",n),(!s||c&64)&&X(t,"marker-start",u[6]),(!s||c&128)&&X(t,"marker-end",u[7]),(!s||c&256)&&X(t,"style",u[8]),u[10]&&r.p(u,c),u[2]?a?(a.p(u,c),c&4&&U(a,1)):(a=bo(u),a.c(),U(a,1),a.m(l.parentNode,l)):a&&(We(),J(a,1,1,()=>{a=null}),Be())},i(u){s||(U(a),s=!0)},o(u){J(a),s=!1},d(u){u&&(F(t),F(i),F(o),F(l)),r&&r.d(u),a&&a.d(u)}}}function ff(e,t,n){let{id:i=void 0}=t,{path:o}=t,{label:l=void 0}=t,{labelX:s=void 0}=t,{labelY:r=void 0}=t,{labelStyle:a=void 0}=t,{markerStart:u=void 0}=t,{markerEnd:c=void 0}=t,{style:d=void 0}=t,{interactionWidth:f=20}=t,{class:h=void 0}=t,y=f===void 0?20:f;return e.$$set=b=>{"id"in b&&n(0,i=b.id),"path"in b&&n(1,o=b.path),"label"in b&&n(2,l=b.label),"labelX"in b&&n(3,s=b.labelX),"labelY"in b&&n(4,r=b.labelY),"labelStyle"in b&&n(5,a=b.labelStyle),"markerStart"in b&&n(6,u=b.markerStart),"markerEnd"in b&&n(7,c=b.markerEnd),"style"in b&&n(8,d=b.style),"interactionWidth"in b&&n(11,f=b.interactionWidth),"class"in b&&n(9,h=b.class)},[i,o,l,s,r,a,u,c,d,h,y,f]}class df extends ae{constructor(t){super(),ue(this,t,ff,cf,fe,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}const Gn=df;function hf(e){let t,n;return t=new Gn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function gf(e,t,n){let i,o,l,{id:s=""}=t,{source:r=""}=t,{target:a=""}=t,{type:u="default"}=t,{animated:c=void 0}=t,{selected:d=void 0}=t,{label:f=void 0}=t,{labelStyle:h=void 0}=t,{data:y=void 0}=t,{style:b=void 0}=t,{markerStart:P=void 0}=t,{markerEnd:g=void 0}=t,{interactionWidth:v=void 0}=t,{sourceX:S}=t,{sourceY:w}=t,{sourcePosition:k}=t,{sourceHandleId:C=void 0}=t,{targetX:z}=t,{targetY:A}=t,{targetPosition:D}=t,{targetHandleId:H=void 0}=t;return e.$$set=m=>{"id"in m&&n(9,s=m.id),"source"in m&&n(10,r=m.source),"target"in m&&n(11,a=m.target),"type"in m&&n(12,u=m.type),"animated"in m&&n(13,c=m.animated),"selected"in m&&n(14,d=m.selected),"label"in m&&n(0,f=m.label),"labelStyle"in m&&n(1,h=m.labelStyle),"data"in m&&n(15,y=m.data),"style"in m&&n(2,b=m.style),"markerStart"in m&&n(3,P=m.markerStart),"markerEnd"in m&&n(4,g=m.markerEnd),"interactionWidth"in m&&n(5,v=m.interactionWidth),"sourceX"in m&&n(16,S=m.sourceX),"sourceY"in m&&n(17,w=m.sourceY),"sourcePosition"in m&&n(18,k=m.sourcePosition),"sourceHandleId"in m&&n(19,C=m.sourceHandleId),"targetX"in m&&n(20,z=m.targetX),"targetY"in m&&n(21,A=m.targetY),"targetPosition"in m&&n(22,D=m.targetPosition),"targetHandleId"in m&&n(23,H=m.targetHandleId)},e.$$.update=()=>{e.$$.dirty&7798784&&n(8,[i,o,l]=kl({sourceX:S,sourceY:w,targetX:z,targetY:A,sourcePosition:k,targetPosition:D}),i,(n(7,o),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)),(n(6,l),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)))},[f,h,b,P,g,v,l,o,i,s,r,a,u,c,d,y,S,w,k,C,z,A,D,H]}class mf extends ae{constructor(t){super(),ue(this,t,gf,hf,fe,{id:9,source:10,target:11,type:12,animated:13,selected:14,label:0,labelStyle:1,data:15,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:16,sourceY:17,sourcePosition:18,sourceHandleId:19,targetX:20,targetY:21,targetPosition:22,targetHandleId:23})}}const Xl=mf;function yf(e){let t,n;return t=new Gn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function _f(e,t,n){let i,o,l,{id:s=""}=t,{source:r=""}=t,{target:a=""}=t,{type:u="smoothstep"}=t,{animated:c=void 0}=t,{selected:d=void 0}=t,{label:f=void 0}=t,{labelStyle:h=void 0}=t,{data:y=void 0}=t,{style:b=void 0}=t,{markerStart:P=void 0}=t,{markerEnd:g=void 0}=t,{interactionWidth:v=void 0}=t,{sourceX:S}=t,{sourceY:w}=t,{sourcePosition:k}=t,{sourceHandleId:C=void 0}=t,{targetX:z}=t,{targetY:A}=t,{targetPosition:D}=t,{targetHandleId:H=void 0}=t;return e.$$set=m=>{"id"in m&&n(9,s=m.id),"source"in m&&n(10,r=m.source),"target"in m&&n(11,a=m.target),"type"in m&&n(12,u=m.type),"animated"in m&&n(13,c=m.animated),"selected"in m&&n(14,d=m.selected),"label"in m&&n(0,f=m.label),"labelStyle"in m&&n(1,h=m.labelStyle),"data"in m&&n(15,y=m.data),"style"in m&&n(2,b=m.style),"markerStart"in m&&n(3,P=m.markerStart),"markerEnd"in m&&n(4,g=m.markerEnd),"interactionWidth"in m&&n(5,v=m.interactionWidth),"sourceX"in m&&n(16,S=m.sourceX),"sourceY"in m&&n(17,w=m.sourceY),"sourcePosition"in m&&n(18,k=m.sourcePosition),"sourceHandleId"in m&&n(19,C=m.sourceHandleId),"targetX"in m&&n(20,z=m.targetX),"targetY"in m&&n(21,A=m.targetY),"targetPosition"in m&&n(22,D=m.targetPosition),"targetHandleId"in m&&n(23,H=m.targetHandleId)},e.$$.update=()=>{e.$$.dirty&7798784&&n(8,[i,o,l]=Cn({sourceX:S,sourceY:w,targetX:z,targetY:A,sourcePosition:k,targetPosition:D}),i,(n(7,o),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)),(n(6,l),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)))},[f,h,b,P,g,v,l,o,i,s,r,a,u,c,d,y,S,w,k,C,z,A,D,H]}class bf extends ae{constructor(t){super(),ue(this,t,_f,yf,fe,{id:9,source:10,target:11,type:12,animated:13,selected:14,label:0,labelStyle:1,data:15,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:16,sourceY:17,sourcePosition:18,sourceHandleId:19,targetX:20,targetY:21,targetPosition:22,targetHandleId:23})}}const wf=bf;function vf(e){let t,n;return t=new Gn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function kf(e,t,n){let i,o,l,{id:s=""}=t,{source:r=""}=t,{target:a=""}=t,{type:u="straight"}=t,{animated:c=void 0}=t,{selected:d=void 0}=t,{label:f=void 0}=t,{labelStyle:h=void 0}=t,{data:y=void 0}=t,{style:b=void 0}=t,{markerStart:P=void 0}=t,{markerEnd:g=void 0}=t,{interactionWidth:v=void 0}=t,{sourceX:S}=t,{sourceY:w}=t,{sourcePosition:k}=t,{sourceHandleId:C=void 0}=t,{targetX:z}=t,{targetY:A}=t,{targetPosition:D}=t,{targetHandleId:H=void 0}=t;return e.$$set=m=>{"id"in m&&n(9,s=m.id),"source"in m&&n(10,r=m.source),"target"in m&&n(11,a=m.target),"type"in m&&n(12,u=m.type),"animated"in m&&n(13,c=m.animated),"selected"in m&&n(14,d=m.selected),"label"in m&&n(0,f=m.label),"labelStyle"in m&&n(1,h=m.labelStyle),"data"in m&&n(15,y=m.data),"style"in m&&n(2,b=m.style),"markerStart"in m&&n(3,P=m.markerStart),"markerEnd"in m&&n(4,g=m.markerEnd),"interactionWidth"in m&&n(5,v=m.interactionWidth),"sourceX"in m&&n(16,S=m.sourceX),"sourceY"in m&&n(17,w=m.sourceY),"sourcePosition"in m&&n(18,k=m.sourcePosition),"sourceHandleId"in m&&n(19,C=m.sourceHandleId),"targetX"in m&&n(20,z=m.targetX),"targetY"in m&&n(21,A=m.targetY),"targetPosition"in m&&n(22,D=m.targetPosition),"targetHandleId"in m&&n(23,H=m.targetHandleId)},e.$$.update=()=>{e.$$.dirty&3342336&&n(8,[i,o,l]=El({sourceX:S,sourceY:w,targetX:z,targetY:A}),i,(n(7,o),n(16,S),n(17,w),n(20,z),n(21,A)),(n(6,l),n(16,S),n(17,w),n(20,z),n(21,A)))},[f,h,b,P,g,v,l,o,i,s,r,a,u,c,d,y,S,w,k,C,z,A,D,H]}class Sf extends ae{constructor(t){super(),ue(this,t,kf,vf,fe,{id:9,source:10,target:11,type:12,animated:13,selected:14,label:0,labelStyle:1,data:15,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:16,sourceY:17,sourcePosition:18,sourceHandleId:19,targetX:20,targetY:21,targetPosition:22,targetHandleId:23})}}const Ef=Sf;function Mf(e){let t,n;return t=new Gn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function Pf(e,t,n){let i,o,l,{id:s=""}=t,{source:r=""}=t,{target:a=""}=t,{type:u="step"}=t,{animated:c=void 0}=t,{selected:d=void 0}=t,{label:f=void 0}=t,{data:h=void 0}=t,{labelStyle:y=void 0}=t,{style:b=void 0}=t,{markerStart:P=void 0}=t,{markerEnd:g=void 0}=t,{interactionWidth:v=void 0}=t,{sourceX:S}=t,{sourceY:w}=t,{sourcePosition:k}=t,{sourceHandleId:C=void 0}=t,{targetX:z}=t,{targetY:A}=t,{targetPosition:D}=t,{targetHandleId:H=void 0}=t;return e.$$set=m=>{"id"in m&&n(9,s=m.id),"source"in m&&n(10,r=m.source),"target"in m&&n(11,a=m.target),"type"in m&&n(12,u=m.type),"animated"in m&&n(13,c=m.animated),"selected"in m&&n(14,d=m.selected),"label"in m&&n(0,f=m.label),"data"in m&&n(15,h=m.data),"labelStyle"in m&&n(1,y=m.labelStyle),"style"in m&&n(2,b=m.style),"markerStart"in m&&n(3,P=m.markerStart),"markerEnd"in m&&n(4,g=m.markerEnd),"interactionWidth"in m&&n(5,v=m.interactionWidth),"sourceX"in m&&n(16,S=m.sourceX),"sourceY"in m&&n(17,w=m.sourceY),"sourcePosition"in m&&n(18,k=m.sourcePosition),"sourceHandleId"in m&&n(19,C=m.sourceHandleId),"targetX"in m&&n(20,z=m.targetX),"targetY"in m&&n(21,A=m.targetY),"targetPosition"in m&&n(22,D=m.targetPosition),"targetHandleId"in m&&n(23,H=m.targetHandleId)},e.$$.update=()=>{e.$$.dirty&7798784&&n(8,[i,o,l]=Cn({sourceX:S,sourceY:w,targetX:z,targetY:A,sourcePosition:k,targetPosition:D,borderRadius:0}),i,(n(7,o),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)),(n(6,l),n(16,S),n(17,w),n(20,z),n(21,A),n(18,k),n(22,D)))},[f,y,b,P,g,v,l,o,i,s,r,a,u,c,d,h,S,w,k,C,z,A,D,H]}class zf extends ae{constructor(t){super(),ue(this,t,Pf,Mf,fe,{id:9,source:10,target:11,type:12,animated:13,selected:14,label:0,data:15,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:16,sourceY:17,sourcePosition:18,sourceHandleId:19,targetX:20,targetY:21,targetPosition:22,targetHandleId:23})}}const Nf=zf;function Af(e,t){const n=e.set,i=t.set,o=Y(e),l=Y(t);let r=o.length===0&&l.length>0?l:o;e.set(r);const a=u=>{const c=n(u);return r=c,i(r),c};e.set=t.set=a,e.update=t.update=u=>a(u(r))}function Of(e,t){const n=e.set,i=t.set;let o=Y(t);e.set(o);const l=s=>{n(s),i(s),o=s};e.set=t.set=l,e.update=t.update=s=>l(s(o))}const Cf=(e,t,n)=>{if(!n)return;const i=Y(e),o=t.set,l=n.set;let s=n?Y(n):{x:0,y:0,zoom:1};t.set(s),t.set=r=>(o(r),l(r),s=r,r),n.set=r=>(i==null||i.syncViewport(r),o(r),l(r),s=r,r),t.update=r=>{t.set(r(s))},n.update=r=>{n.set(r(s))}},Hf=(e,t)=>{const{subscribe:n,set:i,update:o}=j([]);let l=e,s={},r=!0;const a=f=>(l=Ml(f,t,{elevateNodesOnSelect:r,defaults:s}),i(l),l),u=f=>a(f(l)),c=f=>{s=f},d=f=>{r=f.elevateNodesOnSelect??r};return a(l),{subscribe:n,set:a,update:u,setDefaultOptions:c,setOptions:d}},Tf=(e,t,n,i)=>{const{subscribe:o,set:l,update:s}=j([]);let r=e,a=i||{};const u=f=>{const h=a?f.map(y=>({...a,...y})):f;zl(t,n,h),r=h,l(r)},c=f=>u(f(r)),d=f=>{a=f};return u(r),{subscribe:o,set:u,update:c,setDefaultOptions:d}},Yl={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},If={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top};function Df(e,t){return Tt([t,e.connectionLineType,e.connectionMode,e.nodeLookup,e.viewport],([n,i,o,l,s])=>{var k,C,z,A,D,H,m,K,O,_,N,E,I;if(!((k=n.connectionStartHandle)!=null&&k.nodeId))return Yl;const r=l.get((C=n.connectionStartHandle)==null?void 0:C.nodeId),a=(z=r==null?void 0:r[ye])==null?void 0:z.handleBounds,u=(a==null?void 0:a[n.connectionStartHandle.type||"source"])||[],c=u||(a==null?void 0:a[((A=n==null?void 0:n.connectionStartHandle)==null?void 0:A.type)==="source"?"target":"source"]),d=o===kt.Strict?u:c,f=(D=n.connectionStartHandle)!=null&&D.handleId?d.find(R=>{var W;return R.id===((W=n.connectionStartHandle)==null?void 0:W.handleId)}):d[0],h=f?f.x+f.width/2:(((H=r==null?void 0:r.computed)==null?void 0:H.width)??0)/2,y=f?f.y+f.height/2:((m=r==null?void 0:r.computed)==null?void 0:m.height)??0,b=(((O=(K=r==null?void 0:r.computed)==null?void 0:K.positionAbsolute)==null?void 0:O.x)??0)+h,P=(((N=(_=r==null?void 0:r.computed)==null?void 0:_.positionAbsolute)==null?void 0:N.y)??0)+y,g=f==null?void 0:f.position,v=g?If[g]:void 0,S={sourceX:b,sourceY:P,sourcePosition:g,targetX:((((E=n.connectionPosition)==null?void 0:E.x)??0)-s.x)/s.zoom,targetY:((((I=n.connectionPosition)==null?void 0:I.y)??0)-s.y)/s.zoom,targetPosition:v};let w="";return i===Ht.Bezier?[w]=kl(S):i===Ht.Step?[w]=Cn({...S,borderRadius:0}):i===Ht.SmoothStep?[w]=Cn(S):[w]=El(S),{path:w,...S,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const Vl={input:qc,output:Jc,default:Il,group:xc},Rl={straight:Ef,smoothstep:wf,default:Xl,step:Nf},Xf=({nodes:e=[],edges:t=[],width:n,height:i,fitView:o})=>{const l=new Map,s=Ml(e,l,{nodeOrigin:[0,0],elevateNodesOnSelect:!1}),r=new Map,a=new Map;zl(r,a,t);let u={x:0,y:0,zoom:1};if(o&&n&&i){const c=s.filter(f=>f.width&&f.height||f.initialWidth&&f.initialHeight),d=Bn(c,{nodeOrigin:[0,0]});u=Hi(d,n,i,.5,2,.1)}return{flowId:j(null),nodes:Hf(s,l),nodeLookup:pe(l),edgeLookup:pe(a),visibleNodes:pe([]),edges:Tf(t,r,a),visibleEdges:pe([]),connectionLookup:pe(r),height:j(500),width:j(500),minZoom:j(.5),maxZoom:j(2),nodeOrigin:j([0,0]),nodeDragThreshold:j(1),nodeExtent:j($i),translateExtent:j($i),autoPanOnNodeDrag:j(!0),autoPanOnConnect:j(!0),fitViewOnInit:j(!1),fitViewOnInitDone:j(!1),fitViewOptions:j(void 0),panZoom:j(null),snapGrid:j(null),dragging:j(!1),selectionRect:j(null),selectionKeyPressed:j(!1),multiselectionKeyPressed:j(!1),deleteKeyPressed:j(!1),panActivationKeyPressed:j(!1),zoomActivationKeyPressed:j(!1),selectionRectMode:j(null),selectionMode:j(Pn.Partial),nodeTypes:j(Vl),edgeTypes:j(Rl),viewport:j(u),connectionMode:j(kt.Strict),domNode:j(null),connection:pe(Yl),connectionLineType:j(Ht.Bezier),connectionRadius:j(20),isValidConnection:j(()=>!0),nodesDraggable:j(!0),nodesConnectable:j(!0),elementsSelectable:j(!0),selectNodesOnDrag:j(!0),markers:pe([]),defaultMarkerColor:j("#b1b1b7"),lib:pe("svelte"),onlyRenderVisibleElements:j(!1),onerror:j(tc),ondelete:j(void 0),onedgecreate:j(void 0),onconnect:j(void 0),onconnectstart:j(void 0),onconnectend:j(void 0),onbeforedelete:j(void 0),nodesInitialized:j(!1),edgesInitialized:j(!1),viewportInitialized:j(!1),initialized:pe(!1)}};function Yf(e){const t=Tt([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,o,l,s,r])=>o&&s&&r?n.filter(u=>{const c=i.get(u.source),d=i.get(u.target);return c&&d&&ac({sourceNode:c,targetNode:d,width:s,height:r,transform:[l.x,l.y,l.zoom]})}):n);return Tt([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,o,l])=>n.reduce((r,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return r;const d=mc({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:l});return d&&r.push({...a,zIndex:sc({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...d}),r},[]))}function Vf(e){return Tt([e.nodes,e.onlyRenderVisibleElements,e.width,e.height,e.viewport],([t,n,i,o,l])=>{const s=[l.x,l.y,l.zoom];return n?ml(t,{x:0,y:0,width:i,height:o},s,!0):t})}const Un=Symbol();function Kl({nodes:e,edges:t,width:n,height:i,fitView:o}){const l=Xf({nodes:e,edges:t,width:n,height:i,fitView:o});function s(O){l.nodeTypes.set({...Vl,...O})}function r(O){l.edgeTypes.set({...Rl,...O})}function a(O){const _=Y(l.edges);l.edges.set(fc(O,_))}const u=(O,_=!1)=>{const N=Y(l.nodeLookup);O.forEach(E=>{var R;const I=N.get(E.id);I&&(I.position=E.position,I.dragging=_,I.computed={...I.computed,positionAbsolute:(R=E.computed)==null?void 0:R.positionAbsolute})}),l.nodes.set(Y(l.nodes))};function c(O){const _=bc(O,Y(l.nodes),Y(l.nodeLookup),Y(l.domNode),Y(l.nodeOrigin));if(_){if(!Y(l.fitViewOnInitDone)&&Y(l.fitViewOnInit)){const N=Y(l.fitViewOptions),E=d(_,{...N,nodes:(N==null?void 0:N.nodes)||_});l.fitViewOnInitDone.set(E)}l.nodes.set(_),Y(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function d(O,_){const N=Y(l.panZoom);return N?ju({nodes:O,width:Y(l.width),height:Y(l.height),minZoom:Y(l.minZoom),maxZoom:Y(l.maxZoom),panZoom:N,nodeOrigin:Y(l.nodeOrigin)},_):!1}function f(O,_){const N=Y(l.panZoom);N&&N.scaleBy(O,_)}function h(O){f(1.2,O)}function y(O){f(1/1.2,O)}function b(O){const _=Y(l.panZoom);_&&(_.setScaleExtent([O,Y(l.maxZoom)]),l.minZoom.set(O))}function P(O){const _=Y(l.panZoom);_&&(_.setScaleExtent([Y(l.minZoom),O]),l.maxZoom.set(O))}function g(O){const _=Y(l.panZoom);_&&(_.setTranslateExtent(O),l.translateExtent.set(O))}function v(O){let _=!1;return O.forEach(N=>{N.selected&&(N.selected=!1,_=!0)}),_}function S(O){v((O==null?void 0:O.nodes)||Y(l.nodes))&&l.nodes.set(Y(l.nodes)),v((O==null?void 0:O.edges)||Y(l.edges))&&l.edges.set(Y(l.edges))}l.deleteKeyPressed.subscribe(async O=>{var _;if(O){const N=Y(l.nodes),E=Y(l.edges),I=N.filter(Z=>Z.selected),R=E.filter(Z=>Z.selected),{nodes:W,edges:q}=await yl({nodesToRemove:I,edgesToRemove:R,nodes:N,edges:E,onBeforeDelete:Y(l.onbeforedelete)});(W.length||q.length)&&(l.nodes.update(Z=>Z.filter(T=>!W.some(p=>p.id===T.id))),l.edges.update(Z=>Z.filter(T=>!q.some(p=>p.id===T.id))),(_=Y(l.ondelete))==null||_({nodes:W,edges:q}))}});function w(O){const _=Y(l.multiselectionKeyPressed);l.nodes.update(N=>N.map(E=>{const I=O.includes(E.id),R=_&&E.selected||I;return E.selected=R,E})),_||l.edges.update(N=>N.map(E=>(E.selected=!1,E)))}function k(O){const _=Y(l.multiselectionKeyPressed);l.edges.update(N=>N.map(E=>{const I=O.includes(E.id),R=_&&E.selected||I;return E.selected=R,E})),_||l.nodes.update(N=>N.map(E=>(E.selected=!1,E)))}function C(O){var N;const _=(N=Y(l.nodes))==null?void 0:N.find(E=>E.id===O);if(!_){console.warn("012",$t.error012(O));return}l.selectionRect.set(null),l.selectionRectMode.set(null),_.selected?_.selected&&Y(l.multiselectionKeyPressed)&&S({nodes:[_],edges:[]}):w([O])}function z(O){const _=Y(l.viewport);return wc({delta:O,panZoom:Y(l.panZoom),transform:[_.x,_.y,_.zoom],translateExtent:Y(l.translateExtent),width:Y(l.width),height:Y(l.height)})}const A={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},D=j(A),H=O=>{D.set(O)};function m(){H(A)}function K(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),l.nodes.set([]),l.edges.set([]),S(),m()}return{...l,connection:Df(l,D),visibleEdges:Yf(l),visibleNodes:Vf(l),markers:Tt([l.edges,l.defaultMarkerColor,l.flowId],([O,_,N])=>yc(O,{defaultColor:_,id:N})),initialized:(()=>{let O=!1;const _=Y(l.nodes).length,N=Y(l.edges).length;return Tt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([E,I,R])=>O||(_===0?O=R:N===0?O=R&&E:O=R&&E&&I,O))})(),syncNodeStores:O=>Af(l.nodes,O),syncEdgeStores:O=>Of(l.edges,O),syncViewport:O=>Cf(l.panZoom,l.viewport,O),setNodeTypes:s,setEdgeTypes:r,addEdge:a,updateNodePositions:u,updateNodeDimensions:c,zoomIn:h,zoomOut:y,fitView:O=>d(Y(l.nodes),O),setMinZoom:b,setMaxZoom:P,setTranslateExtent:g,unselectNodesAndEdges:S,addSelectedNodes:w,addSelectedEdges:k,handleNodeSelection:C,panBy:z,updateConnection:H,cancelConnection:m,reset:K}}function Me(){const e=mn(Un);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function Rf({nodes:e,edges:t,width:n,height:i,fitView:o}){const l=Kl({nodes:e,edges:t,width:n,height:i,fitView:o});return Zt(Un,{getStore:()=>l}),l}function Kf(e,t){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:l,viewport:s,dragging:r,translateExtent:a}=t,u=Dc({domNode:e,minZoom:i,maxZoom:o,translateExtent:a,viewport:l,onTransformChange:d=>s.set({x:d[0],y:d[1],zoom:d[2]}),onDraggingChange:r.set}),c=u.getViewport();return s.set(c),n.set(u),u.update(t),{update(d){u.update(d)}}}function Lf(e){let t,n,i,o,l;const s=e[33].default,r=Ge(s,e,e[32],null);return{c(){t=Pe("div"),r&&r.c(),this.h()},l(a){t=ze(a,"DIV",{class:!0});var u=de(t);r&&r.l(u),u.forEach(F),this.h()},h(){X(t,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){x(a,t,u),r&&r.m(t,null),i=!0,o||(l=He(n=Kf.call(null,t,{viewport:e[17],minZoom:e[11],maxZoom:e[12],initialViewport:e[10],dragging:e[22],panZoom:e[18],onPanZoomStart:e[0],onPanZoom:e[1],onPanZoomEnd:e[2],zoomOnScroll:e[5],zoomOnDoubleClick:e[6],zoomOnPinch:e[7],panOnScroll:e[8],panOnDrag:e[9],panOnScrollSpeed:.5,panOnScrollMode:e[3]||tt.Free,zoomActivationKeyPressed:e[13],preventScrolling:typeof e[4]=="boolean"?e[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:e[14],translateExtent:e[15],lib:e[16]})),o=!0)},p(a,u){r&&r.p&&(!i||u[1]&2)&&Ue(r,s,a,a[32],i?Qe(s,a[32],u,null):Je(a[32]),null),n&&ke(n.update)&&u[0]&131071&&n.update.call(null,{viewport:a[17],minZoom:a[11],maxZoom:a[12],initialViewport:a[10],dragging:a[22],panZoom:a[18],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[8],panOnDrag:a[9],panOnScrollSpeed:.5,panOnScrollMode:a[3]||tt.Free,zoomActivationKeyPressed:a[13],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:a[14],translateExtent:a[15],lib:a[16]})},i(a){i||(U(r,a),i=!0)},o(a){J(r,a),i=!1},d(a){a&&F(t),r&&r.d(a),o=!1,l()}}}function Wf(e,t,n){let i,o,l,s,r,a,u,c,d,f,h,{$$slots:y={},$$scope:b}=t,{initialViewport:P}=t,{onMoveStart:g=void 0}=t,{onMove:v=void 0}=t,{onMoveEnd:S=void 0}=t,{panOnScrollMode:w}=t,{preventScrolling:k}=t,{zoomOnScroll:C}=t,{zoomOnDoubleClick:z}=t,{zoomOnPinch:A}=t,{panOnDrag:D}=t,{panOnScroll:H}=t;const{viewport:m,panZoom:K,selectionKeyPressed:O,minZoom:_,maxZoom:N,dragging:E,translateExtent:I,lib:R,panActivationKeyPressed:W,zoomActivationKeyPressed:q,viewportInitialized:Z}=Me();return Q(e,O,T=>n(14,d=T)),Q(e,_,T=>n(11,a=T)),Q(e,N,T=>n(12,u=T)),Q(e,I,T=>n(15,f=T)),Q(e,R,T=>n(16,h=T)),Q(e,W,T=>n(31,r=T)),Q(e,q,T=>n(13,c=T)),Q(e,Z,T=>n(34,s=T)),Xn(()=>{li(Z,s=!0,s)}),e.$$set=T=>{"initialViewport"in T&&n(28,P=T.initialViewport),"onMoveStart"in T&&n(0,g=T.onMoveStart),"onMove"in T&&n(1,v=T.onMove),"onMoveEnd"in T&&n(2,S=T.onMoveEnd),"panOnScrollMode"in T&&n(3,w=T.panOnScrollMode),"preventScrolling"in T&&n(4,k=T.preventScrolling),"zoomOnScroll"in T&&n(5,C=T.zoomOnScroll),"zoomOnDoubleClick"in T&&n(6,z=T.zoomOnDoubleClick),"zoomOnPinch"in T&&n(7,A=T.zoomOnPinch),"panOnDrag"in T&&n(29,D=T.panOnDrag),"panOnScroll"in T&&n(30,H=T.panOnScroll),"$$scope"in T&&n(32,b=T.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&268435456&&n(10,i=P||{x:0,y:0,zoom:1}),e.$$.dirty[0]&536870912|e.$$.dirty[1]&1&&n(9,o=r||D),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&n(8,l=r||H)},[g,v,S,w,k,C,z,A,l,o,i,a,u,c,d,f,h,m,K,O,_,N,E,I,R,W,q,Z,P,D,H,r,b,y]}class Bf extends ae{constructor(t){super(),ue(this,t,Wf,Lf,fe,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}const Ff=Bf;function qf(e){let t,n,i,o;const l=e[29].default,s=Ge(l,e,e[28],null);return{c(){t=Pe("div"),s&&s.c(),this.h()},l(r){t=ze(r,"DIV",{class:!0});var a=de(t);s&&s.l(a),a.forEach(F),this.h()},h(){X(t,"class","svelte-flow__pane svelte-1esy7hx"),te(t,"draggable",e[0]),te(t,"dragging",e[4]),te(t,"selection",e[1])},m(r,a){x(r,t,a),s&&s.m(t,null),e[30](t),n=!0,i||(o=[be(t,"click",function(){ke(e[3]?void 0:cn(e[15],e[2]))&&(e[3]?void 0:cn(e[15],e[2])).apply(this,arguments)}),be(t,"mousedown",function(){ke(e[3]?e[16]:void 0)&&(e[3]?e[16]:void 0).apply(this,arguments)}),be(t,"mousemove",function(){ke(e[3]?e[17]:void 0)&&(e[3]?e[17]:void 0).apply(this,arguments)}),be(t,"mouseup",function(){ke(e[3]?e[18]:void 0)&&(e[3]?e[18]:void 0).apply(this,arguments)}),be(t,"mouseleave",function(){ke(e[3]?e[19]:void 0)&&(e[3]?e[19]:void 0).apply(this,arguments)}),be(t,"contextmenu",function(){ke(cn(e[20],e[2]))&&cn(e[20],e[2]).apply(this,arguments)})],i=!0)},p(r,a){e=r,s&&s.p&&(!n||a[0]&268435456)&&Ue(s,l,e,e[28],n?Qe(l,e[28],a,null):Je(e[28]),null),(!n||a[0]&1)&&te(t,"draggable",e[0]),(!n||a[0]&16)&&te(t,"dragging",e[4]),(!n||a[0]&2)&&te(t,"selection",e[1])},i(r){n||(U(s,r),n=!0)},o(r){J(s,r),n=!1},d(r){r&&F(t),s&&s.d(r),e[30](null),i=!1,gt(o)}}}function cn(e,t){return n=>{n.target===t&&(e==null||e(n))}}function wo(e){return t=>{const n=e.includes(t.id);return t.selected!==n?{...t,selected:n}:t}}function Zf(e,t,n){let i,o,l,s,r,a,u,c,d,f,h,y,b,{$$slots:P={},$$scope:g}=t,{panOnDrag:v=void 0}=t,{selectionOnDrag:S=void 0}=t;const w=Yn(),{nodes:k,edges:C,viewport:z,dragging:A,elementsSelectable:D,selectionRect:H,selectionRectMode:m,selectionKeyPressed:K,selectionMode:O,panActivationKeyPressed:_,unselectNodesAndEdges:N}=Me();Q(e,k,B=>n(36,c=B)),Q(e,C,B=>n(33,r=B)),Q(e,z,B=>n(35,u=B)),Q(e,A,B=>n(4,b=B)),Q(e,D,B=>n(25,f=B)),Q(e,H,B=>n(24,d=B)),Q(e,m,B=>n(23,s=B)),Q(e,K,B=>n(26,h=B)),Q(e,O,B=>n(34,a=B)),Q(e,_,B=>n(27,y=B));let E,I=null,R=[];function W(B){w("paneclick",{event:B}),N(),m.set(null)}function q(B){if(I=E.getBoundingClientRect(),!D||!o||B.button!==0||B.target!==E||!I)return;const{x:ee,y:oe}=lt(B,I);N(),H.set({width:0,height:0,startX:ee,startY:oe,x:ee,y:oe})}function Z(B){if(!o||!I||!d)return;const ee=lt(B,I),oe=d.startX??0,_e=d.startY??0,L={...d,x:ee.x<oe?ee.x:oe,y:ee.y<_e?ee.y:_e,width:Math.abs(ee.x-oe),height:Math.abs(ee.y-_e)},ve=R.map(me=>me.id),Ve=gi(R,r).map(me=>me.id);R=ml(c,L,[u.x,u.y,u.zoom],a===Pn.Partial,!0);const Ie=gi(R,r).map(me=>me.id),De=R.map(me=>me.id);(ve.length!==De.length||De.some(me=>!ve.includes(me)))&&k.update(me=>me.map(wo(De))),(Ve.length!==Ie.length||Ie.some(me=>!Ve.includes(me)))&&C.update(me=>me.map(wo(Ie))),m.set("user"),H.set(L)}function T(B){B.button===0&&(!o&&s==="user"&&B.target===E&&(W==null||W(B)),H.set(null),R.length>0&&m.set("nodes"))}const p=B=>{s==="user"&&m.set(R.length>0?"nodes":null),H.set(null)},$=B=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){B.preventDefault();return}w("panecontextmenu",{event:B})};function ie(B){_i[B?"unshift":"push"](()=>{E=B,n(2,E)})}return e.$$set=B=>{"panOnDrag"in B&&n(0,v=B.panOnDrag),"selectionOnDrag"in B&&n(21,S=B.selectionOnDrag),"$$scope"in B&&n(28,g=B.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&134217729&&n(22,i=y||v),e.$$.dirty[0]&90177536&&n(1,o=h||d||S&&i!==!0),e.$$.dirty[0]&41943042&&n(3,l=f&&(o||s==="user"))},[v,o,E,l,b,k,C,z,A,D,H,m,K,O,_,W,q,Z,T,p,$,S,i,s,d,f,h,y,g,P,ie]}class Gf extends ae{constructor(t){super(),ue(this,t,Zf,qf,fe,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}const Uf=Gf;function Jf(e){let t,n;const i=e[3].default,o=Ge(i,e,e[2],null);return{c(){t=Pe("div"),o&&o.c(),this.h()},l(l){t=ze(l,"DIV",{class:!0,style:!0});var s=de(t);o&&o.l(s),s.forEach(F),this.h()},h(){X(t,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ge(t,"transform","translate("+e[0].x+"px, "+e[0].y+"px) scale("+e[0].zoom+")")},m(l,s){x(l,t,s),o&&o.m(t,null),n=!0},p(l,[s]){o&&o.p&&(!n||s&4)&&Ue(o,i,l,l[2],n?Qe(i,l[2],s,null):Je(l[2]),null),(!n||s&1)&&ge(t,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},i(l){n||(U(o,l),n=!0)},o(l){J(o,l),n=!1},d(l){l&&F(t),o&&o.d(l)}}}function Qf(e,t,n){let i,{$$slots:o={},$$scope:l}=t;const{viewport:s}=Me();return Q(e,s,r=>n(0,i=r)),e.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[i,s,l,o]}class jf extends ae{constructor(t){super(),ue(this,t,Qf,Jf,fe,{})}}function Ll(e,t){const{store:n,onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:s}=t,r=kc({onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:s,getStoreItems:()=>{const u=Y(n.snapGrid),c=Y(n.viewport);return{nodes:Y(n.nodes),nodeLookup:Y(n.nodeLookup),edges:Y(n.edges),nodeExtent:Y(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:[0,0],multiSelectionActive:Y(n.multiselectionKeyPressed),domNode:Y(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:Y(n.autoPanOnNodeDrag),nodesDraggable:Y(n.nodesDraggable),selectNodesOnDrag:Y(n.selectNodesOnDrag),nodeDragThreshold:Y(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){r.destroy();return}r.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable})}return a(e,t),{update(u){a(e,u)},destroy(){r.destroy()}}}function xf({width:e,height:t,initialWidth:n,initialHeight:i,computedWidth:o,computedHeight:l}){if(o===void 0&&l===void 0){const s=e??n,r=t??i;return{width:s?`width:${s}px;`:"",height:r?`height:${r}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}function vo(e){let t,n,i,o,l,s=`translate(${e[13]}px, ${e[14]}px)`,r,a,u;var c=e[30];function d(f,h){return{props:{data:f[2],id:f[1],selected:f[3],sourcePosition:f[15],targetPosition:f[16],zIndex:f[17],dragging:f[8],dragHandle:f[20],type:f[29],isConnectable:f[25],positionAbsoluteX:f[11],positionAbsoluteY:f[12],width:f[18],height:f[19]}}}return c&&(n=yn(c,d(e))),{c(){t=Pe("div"),n&&le(n.$$.fragment),this.h()},l(f){t=ze(f,"DIV",{"data-id":!0,class:!0,style:!0});var h=de(t);n&&ce(n.$$.fragment,h),h.forEach(F),this.h()},h(){X(t,"data-id",e[1]),X(t,"class",i=Oe(["svelte-flow__node",`svelte-flow__node-${e[29]}`,e[22]])),X(t,"style",o=(e[9]??"")+";"+e[24].width+e[24].height),te(t,"dragging",e[8]),te(t,"selected",e[3]),te(t,"draggable",e[4]),te(t,"connectable",e[6]),te(t,"selectable",e[5]),te(t,"nopan",e[4]),te(t,"parent",e[10]),ge(t,"z-index",e[17]),ge(t,"transform",s),ge(t,"visibility",e[21]?"visible":"hidden")},m(f,h){x(f,t,h),n&&re(n,t,null),e[47](t),r=!0,a||(u=[He(l=Ll.call(null,t,{nodeId:e[1],isSelectable:e[5],disabled:!1,handleSelector:e[20],noDragClass:"nodrag",onNodeMouseDown:e[28],onDrag:e[44],onDragStart:e[45],onDragStop:e[46],store:e[26]})),be(t,"click",e[33]),be(t,"mouseenter",e[48]),be(t,"mouseleave",e[49]),be(t,"mousemove",e[50]),be(t,"contextmenu",e[51])],a=!0)},p(f,h){if(c!==(c=f[30])){if(n){We();const b=n;J(b.$$.fragment,1,0,()=>{se(b,1)}),Be()}c?(n=yn(c,d(f)),le(n.$$.fragment),U(n.$$.fragment,1),re(n,t,null)):n=null}else if(c){const b={};h[0]&4&&(b.data=f[2]),h[0]&2&&(b.id=f[1]),h[0]&8&&(b.selected=f[3]),h[0]&32768&&(b.sourcePosition=f[15]),h[0]&65536&&(b.targetPosition=f[16]),h[0]&131072&&(b.zIndex=f[17]),h[0]&256&&(b.dragging=f[8]),h[0]&1048576&&(b.dragHandle=f[20]),h[0]&33554432&&(b.isConnectable=f[25]),h[0]&2048&&(b.positionAbsoluteX=f[11]),h[0]&4096&&(b.positionAbsoluteY=f[12]),h[0]&262144&&(b.width=f[18]),h[0]&524288&&(b.height=f[19]),n.$set(b)}(!r||h[0]&2)&&X(t,"data-id",f[1]),(!r||h[0]&4194304&&i!==(i=Oe(["svelte-flow__node",`svelte-flow__node-${f[29]}`,f[22]])))&&X(t,"class",i),(!r||h[0]&16777728&&o!==(o=(f[9]??"")+";"+f[24].width+f[24].height))&&X(t,"style",o),l&&ke(l.update)&&h[0]&1048610&&l.update.call(null,{nodeId:f[1],isSelectable:f[5],disabled:!1,handleSelector:f[20],noDragClass:"nodrag",onNodeMouseDown:f[28],onDrag:f[44],onDragStart:f[45],onDragStop:f[46],store:f[26]}),(!r||h[0]&4194560)&&te(t,"dragging",f[8]),(!r||h[0]&4194312)&&te(t,"selected",f[3]),(!r||h[0]&4194320)&&te(t,"draggable",f[4]),(!r||h[0]&4194368)&&te(t,"connectable",f[6]),(!r||h[0]&4194336)&&te(t,"selectable",f[5]),(!r||h[0]&4194320)&&te(t,"nopan",f[4]),(!r||h[0]&4195328)&&te(t,"parent",f[10]);const y=h[0]&16777728;(h[0]&16908800||y)&&ge(t,"z-index",f[17]),(h[0]&16802304&&s!==(s=`translate(${f[13]}px, ${f[14]}px)`)||y)&&ge(t,"transform",s),(h[0]&18874880||y)&&ge(t,"visibility",f[21]?"visible":"hidden")},i(f){r||(n&&U(n.$$.fragment,f),r=!0)},o(f){n&&J(n.$$.fragment,f),r=!1},d(f){f&&F(t),n&&se(n),e[47](null),a=!1,gt(u)}}}function pf(e){let t,n,i=!e[7]&&vo(e);return{c(){i&&i.c(),t=we()},l(o){i&&i.l(o),t=we()},m(o,l){i&&i.m(o,l),x(o,t,l),n=!0},p(o,l){o[7]?i&&(We(),J(i,1,1,()=>{i=null}),Be()):i?(i.p(o,l),l[0]&128&&U(i,1)):(i=vo(o),i.c(),U(i,1),i.m(t.parentNode,t))},i(o){n||(U(i),n=!0)},o(o){J(i),n=!1},d(o){o&&F(t),i&&i.d(o)}}}function $f(e,t,n){let i,o,l,{node:s}=t,{id:r}=t,{data:a={}}=t,{selected:u=!1}=t,{draggable:c=void 0}=t,{selectable:d=void 0}=t,{connectable:f=!0}=t,{hidden:h=!1}=t,{dragging:y=!1}=t,{resizeObserver:b=null}=t,{style:P=void 0}=t,{type:g="default"}=t,{isParent:v=!1}=t,{positionX:S}=t,{positionY:w}=t,{positionOriginX:k}=t,{positionOriginY:C}=t,{sourcePosition:z=void 0}=t,{targetPosition:A=void 0}=t,{zIndex:D}=t,{computedWidth:H=void 0}=t,{computedHeight:m=void 0}=t,{initialWidth:K=void 0}=t,{initialHeight:O=void 0}=t,{width:_=void 0}=t,{height:N=void 0}=t,{dragHandle:E=void 0}=t,{initialized:I=!1}=t,{class:R=""}=t;const W=Me(),{nodeTypes:q,nodeDragThreshold:Z,selectNodesOnDrag:T,handleNodeSelection:p,updateNodeDimensions:$}=W;Q(e,q,V=>n(52,o=V));const ie=g||"default";let B,ee;!!o[ie]||console.warn("003",$t.error003(g));const _e=o[ie]||Il,L=Yn(),ve=j(f);Q(e,ve,V=>n(25,l=V));let Ve,Ie,De;Zt("svelteflow__node_id",r),Zt("svelteflow__node_connectable",ve),bi(()=>{b==null||b.unobserve(B)});function me(V){d&&(!Y(T)||!c||Y(Z)>0)&&p(r),L("nodeclick",{node:s,event:V})}const mt=(V,Fe,G,Ne)=>{L("nodedrag",{event:V,node:G,nodes:Ne})},yt=(V,Fe,G,Ne)=>{L("nodedragstart",{event:V,node:G,nodes:Ne})},st=(V,Fe,G,Ne)=>{L("nodedragstop",{event:V,node:G,nodes:Ne})};function at(V){_i[V?"unshift":"push"](()=>{B=V,n(23,B)})}const ut=V=>L("nodemouseenter",{node:s,event:V}),ct=V=>L("nodemouseleave",{node:s,event:V}),ft=V=>L("nodemousemove",{node:s,event:V}),St=V=>L("nodecontextmenu",{node:s,event:V});return e.$$set=V=>{"node"in V&&n(0,s=V.node),"id"in V&&n(1,r=V.id),"data"in V&&n(2,a=V.data),"selected"in V&&n(3,u=V.selected),"draggable"in V&&n(4,c=V.draggable),"selectable"in V&&n(5,d=V.selectable),"connectable"in V&&n(6,f=V.connectable),"hidden"in V&&n(7,h=V.hidden),"dragging"in V&&n(8,y=V.dragging),"resizeObserver"in V&&n(34,b=V.resizeObserver),"style"in V&&n(9,P=V.style),"type"in V&&n(35,g=V.type),"isParent"in V&&n(10,v=V.isParent),"positionX"in V&&n(11,S=V.positionX),"positionY"in V&&n(12,w=V.positionY),"positionOriginX"in V&&n(13,k=V.positionOriginX),"positionOriginY"in V&&n(14,C=V.positionOriginY),"sourcePosition"in V&&n(15,z=V.sourcePosition),"targetPosition"in V&&n(16,A=V.targetPosition),"zIndex"in V&&n(17,D=V.zIndex),"computedWidth"in V&&n(36,H=V.computedWidth),"computedHeight"in V&&n(37,m=V.computedHeight),"initialWidth"in V&&n(38,K=V.initialWidth),"initialHeight"in V&&n(39,O=V.initialHeight),"width"in V&&n(18,_=V.width),"height"in V&&n(19,N=V.height),"dragHandle"in V&&n(20,E=V.dragHandle),"initialized"in V&&n(21,I=V.initialized),"class"in V&&n(22,R=V.class)},e.$$.update=()=>{e.$$.dirty[0]&786432|e.$$.dirty[1]&480&&n(24,i=xf({width:_,height:N,initialWidth:K,initialHeight:O,computedWidth:H,computedHeight:m})),e.$$.dirty[0]&64&&ve.set(!!f),e.$$.dirty[0]&8486914|e.$$.dirty[1]&7168&&((Ve&&ie!==Ve||Ie&&z!==Ie||De&&A!==De)&&requestAnimationFrame(()=>$(new Map([[r,{id:r,nodeElement:B,forceUpdate:!0}]]))),n(41,Ve=ie),n(42,Ie=z),n(43,De=A)),e.$$.dirty[0]&8388608|e.$$.dirty[1]&616&&B&&(ee?(ee!==B||!H&&!m)&&(b==null||b.unobserve(ee),b==null||b.observe(B),n(40,ee=B)):(b==null||b.observe(B),n(40,ee=B)))},[s,r,a,u,c,d,f,h,y,P,v,S,w,k,C,z,A,D,_,N,E,I,R,B,i,l,W,q,p,ie,_e,L,ve,me,b,g,H,m,K,O,ee,Ve,Ie,De,mt,yt,st,at,ut,ct,ft,St]}class ed extends ae{constructor(t){super(),ue(this,t,$f,pf,Ro,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,hidden:7,dragging:8,resizeObserver:34,style:9,type:35,isParent:10,positionX:11,positionY:12,positionOriginX:13,positionOriginY:14,sourcePosition:15,targetPosition:16,zIndex:17,computedWidth:36,computedHeight:37,initialWidth:38,initialHeight:39,width:18,height:19,dragHandle:20,initialized:21,class:22},null,[-1,-1])}}const td=ed,{Map:nd}=gr;function ko(e,t,n){var s,r,a,u;const i=e.slice();i[18]=t[n];const o=qn(i[18]);i[19]=o;const l=nc({x:((r=(s=i[18].computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)??0,y:((u=(a=i[18].computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y)??0,...i[19],origin:i[18].origin});return i[20]=l,i}function So(e,t){var l,s,r,a,u,c,d,f;let n,i,o;return i=new td({props:{node:t[18],id:t[18].id,data:t[18].data,selected:!!t[18].selected,hidden:!!t[18].hidden,draggable:!!(t[18].draggable||t[1]&&typeof t[18].draggable>"u"),selectable:!!(t[18].selectable||t[2]&&typeof t[18].selectable>"u"),connectable:!!(t[18].connectable||t[3]&&typeof t[18].connectable>"u"),positionX:((s=(l=t[18].computed)==null?void 0:l.positionAbsolute)==null?void 0:s.x)??0,positionY:((a=(r=t[18].computed)==null?void 0:r.positionAbsolute)==null?void 0:a.y)??0,positionOriginX:t[20].x??0,positionOriginY:t[20].y??0,isParent:!!((u=t[18][ye])!=null&&u.isParent),style:t[18].style,class:t[18].class,type:t[18].type??"default",sourcePosition:t[18].sourcePosition,targetPosition:t[18].targetPosition,dragging:t[18].dragging,zIndex:((c=t[18][ye])==null?void 0:c.z)??0,dragHandle:t[18].dragHandle,initialized:oo(t[18]),width:t[18].width,height:t[18].height,initialWidth:t[18].initialWidth,initialHeight:t[18].initialHeight,computedWidth:(d=t[18].computed)==null?void 0:d.width,computedHeight:(f=t[18].computed)==null?void 0:f.height,resizeObserver:t[8]}}),i.$on("nodeclick",t[9]),i.$on("nodemouseenter",t[10]),i.$on("nodemousemove",t[11]),i.$on("nodemouseleave",t[12]),i.$on("nodedrag",t[13]),i.$on("nodedragstart",t[14]),i.$on("nodedragstop",t[15]),i.$on("nodecontextmenu",t[16]),{key:e,first:null,c(){n=we(),le(i.$$.fragment),this.h()},l(h){n=we(),ce(i.$$.fragment,h),this.h()},h(){this.first=n},m(h,y){x(h,n,y),re(i,h,y),o=!0},p(h,y){var P,g,v,S,w,k,C,z;t=h;const b={};y&1&&(b.node=t[18]),y&1&&(b.id=t[18].id),y&1&&(b.data=t[18].data),y&1&&(b.selected=!!t[18].selected),y&1&&(b.hidden=!!t[18].hidden),y&3&&(b.draggable=!!(t[18].draggable||t[1]&&typeof t[18].draggable>"u")),y&5&&(b.selectable=!!(t[18].selectable||t[2]&&typeof t[18].selectable>"u")),y&9&&(b.connectable=!!(t[18].connectable||t[3]&&typeof t[18].connectable>"u")),y&1&&(b.positionX=((g=(P=t[18].computed)==null?void 0:P.positionAbsolute)==null?void 0:g.x)??0),y&1&&(b.positionY=((S=(v=t[18].computed)==null?void 0:v.positionAbsolute)==null?void 0:S.y)??0),y&1&&(b.positionOriginX=t[20].x??0),y&1&&(b.positionOriginY=t[20].y??0),y&1&&(b.isParent=!!((w=t[18][ye])!=null&&w.isParent)),y&1&&(b.style=t[18].style),y&1&&(b.class=t[18].class),y&1&&(b.type=t[18].type??"default"),y&1&&(b.sourcePosition=t[18].sourcePosition),y&1&&(b.targetPosition=t[18].targetPosition),y&1&&(b.dragging=t[18].dragging),y&1&&(b.zIndex=((k=t[18][ye])==null?void 0:k.z)??0),y&1&&(b.dragHandle=t[18].dragHandle),y&1&&(b.initialized=oo(t[18])),y&1&&(b.width=t[18].width),y&1&&(b.height=t[18].height),y&1&&(b.initialWidth=t[18].initialWidth),y&1&&(b.initialHeight=t[18].initialHeight),y&1&&(b.computedWidth=(C=t[18].computed)==null?void 0:C.width),y&1&&(b.computedHeight=(z=t[18].computed)==null?void 0:z.height),i.$set(b)},i(h){o||(U(i.$$.fragment,h),o=!0)},o(h){J(i.$$.fragment,h),o=!1},d(h){h&&F(n),se(i,h)}}}function id(e){let t,n=[],i=new nd,o,l=It(e[0]);const s=r=>r[18].id;for(let r=0;r<l.length;r+=1){let a=ko(e,l,r),u=s(a);i.set(u,n[r]=So(u,a))}return{c(){t=Pe("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){t=ze(r,"DIV",{class:!0});var a=de(t);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(F),this.h()},h(){X(t,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){x(r,t,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null);o=!0},p(r,[a]){a&271&&(l=It(r[0]),We(),n=vi(n,a,s,1,r,l,i,t,wi,So,null,ko),Be())},i(r){if(!o){for(let a=0;a<l.length;a+=1)U(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)J(n[a]);o=!1},d(r){r&&F(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function od(e,t,n){let i,o,l,s;const{visibleNodes:r,nodesDraggable:a,nodesConnectable:u,elementsSelectable:c,updateNodeDimensions:d}=Me();Q(e,r,k=>n(0,i=k)),Q(e,a,k=>n(1,o=k)),Q(e,u,k=>n(3,s=k)),Q(e,c,k=>n(2,l=k));const f=typeof ResizeObserver>"u"?null:new ResizeObserver(k=>{const C=new Map;k.forEach(z=>{const A=z.target.getAttribute("data-id");C.set(A,{id:A,nodeElement:z.target,forceUpdate:!0})}),d(C)});bi(()=>{f==null||f.disconnect()});function h(k){he.call(this,e,k)}function y(k){he.call(this,e,k)}function b(k){he.call(this,e,k)}function P(k){he.call(this,e,k)}function g(k){he.call(this,e,k)}function v(k){he.call(this,e,k)}function S(k){he.call(this,e,k)}function w(k){he.call(this,e,k)}return[i,o,l,s,r,a,u,c,f,h,y,b,P,g,v,S,w]}class ld extends ae{constructor(t){super(),ue(this,t,od,id,fe,{})}}function Eo(e){let t,n,i,o,l,s,r,a;var u=e[25];function c(d,f){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[13],sourceY:d[14],targetX:d[15],targetY:d[16],sourcePosition:d[17],targetPosition:d[18],animated:d[6],selected:d[7],label:d[9],labelStyle:d[10],data:d[3],style:d[4],interactionWidth:d[20],type:d[30],sourceHandleId:d[11],targetHandleId:d[12],markerStart:d[24],markerEnd:d[23]}}}return u&&(i=yn(u,c(e))),{c(){t=Ke("svg"),n=Ke("g"),i&&le(i.$$.fragment),this.h()},l(d){t=Le(d,"svg",{});var f=de(t);n=Le(f,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var h=de(n);i&&ce(i.$$.fragment,h),h.forEach(F),f.forEach(F),this.h()},h(){X(n,"class",o=Oe(["svelte-flow__edge",e[21]])),X(n,"data-id",e[0]),X(n,"aria-label",l=e[19]===null?void 0:e[19]?e[19]:`Edge from ${e[1]} to ${e[2]}`),X(n,"role","img"),te(n,"animated",e[6]),te(n,"selected",e[7]),te(n,"selectable",e[22]),ge(t,"zIndex",e[5])},m(d,f){x(d,t,f),ht(t,n),i&&re(i,n,null),s=!0,r||(a=[be(n,"click",e[31]),be(n,"contextmenu",e[32])],r=!0)},p(d,f){if(f[0]&33554432&&u!==(u=d[25])){if(i){We();const h=i;J(h.$$.fragment,1,0,()=>{se(h,1)}),Be()}u?(i=yn(u,c(d)),le(i.$$.fragment),U(i.$$.fragment,1),re(i,n,null)):i=null}else if(u){const h={};f[0]&1&&(h.id=d[0]),f[0]&2&&(h.source=d[1]),f[0]&4&&(h.target=d[2]),f[0]&8192&&(h.sourceX=d[13]),f[0]&16384&&(h.sourceY=d[14]),f[0]&32768&&(h.targetX=d[15]),f[0]&65536&&(h.targetY=d[16]),f[0]&131072&&(h.sourcePosition=d[17]),f[0]&262144&&(h.targetPosition=d[18]),f[0]&64&&(h.animated=d[6]),f[0]&128&&(h.selected=d[7]),f[0]&512&&(h.label=d[9]),f[0]&1024&&(h.labelStyle=d[10]),f[0]&8&&(h.data=d[3]),f[0]&16&&(h.style=d[4]),f[0]&1048576&&(h.interactionWidth=d[20]),f[0]&2048&&(h.sourceHandleId=d[11]),f[0]&4096&&(h.targetHandleId=d[12]),f[0]&16777216&&(h.markerStart=d[24]),f[0]&8388608&&(h.markerEnd=d[23]),i.$set(h)}(!s||f[0]&2097152&&o!==(o=Oe(["svelte-flow__edge",d[21]])))&&X(n,"class",o),(!s||f[0]&1)&&X(n,"data-id",d[0]),(!s||f[0]&524294&&l!==(l=d[19]===null?void 0:d[19]?d[19]:`Edge from ${d[1]} to ${d[2]}`))&&X(n,"aria-label",l),(!s||f[0]&2097216)&&te(n,"animated",d[6]),(!s||f[0]&2097280)&&te(n,"selected",d[7]),(!s||f[0]&6291456)&&te(n,"selectable",d[22]),f[0]&32&&ge(t,"zIndex",d[5])},i(d){s||(i&&U(i.$$.fragment,d),s=!0)},o(d){i&&J(i.$$.fragment,d),s=!1},d(d){d&&F(t),i&&se(i),r=!1,gt(a)}}}function rd(e){let t,n,i=!e[8]&&Eo(e);return{c(){i&&i.c(),t=we()},l(o){i&&i.l(o),t=we()},m(o,l){i&&i.m(o,l),x(o,t,l),n=!0},p(o,l){o[8]?i&&(We(),J(i,1,1,()=>{i=null}),Be()):i?(i.p(o,l),l[0]&256&&U(i,1)):(i=Eo(o),i.c(),U(i,1),i.m(t.parentNode,t))},i(o){n||(U(i),n=!0)},o(o){J(i),n=!1},d(o){o&&F(t),i&&i.d(o)}}}function sd(e,t,n){let i,o,l,s,r,a,u,c,{id:d}=t,{type:f="default"}=t,{source:h=""}=t,{target:y=""}=t,{data:b={}}=t,{style:P=void 0}=t,{zIndex:g=void 0}=t,{animated:v=!1}=t,{selected:S=!1}=t,{selectable:w=void 0}=t,{hidden:k=!1}=t,{label:C=void 0}=t,{labelStyle:z=void 0}=t,{markerStart:A=void 0}=t,{markerEnd:D=void 0}=t,{sourceHandle:H=void 0}=t,{targetHandle:m=void 0}=t,{sourceX:K}=t,{sourceY:O}=t,{targetX:_}=t,{targetY:N}=t,{sourcePosition:E}=t,{targetPosition:I}=t,{ariaLabel:R=void 0}=t,{interactionWidth:W=void 0}=t,{class:q=""}=t;Zt("svelteflow__edge_id",d);const{edgeLookup:Z,edgeTypes:T,flowId:p,elementsSelectable:$}=Me();Q(e,Z,L=>n(40,r=L)),Q(e,T,L=>n(39,c=L)),Q(e,p,L=>n(38,u=L)),Q(e,$,L=>n(37,a=L));const ie=Yn(),B=f||"default",ee=Dl();function oe(L){const ve=r.get(d);ve&&(ee(d),ie("edgeclick",{event:L,edge:ve}))}function _e(L){const ve=r.get(d);ve&&ie("edgecontextmenu",{event:L,edge:ve})}return e.$$set=L=>{"id"in L&&n(0,d=L.id),"type"in L&&n(33,f=L.type),"source"in L&&n(1,h=L.source),"target"in L&&n(2,y=L.target),"data"in L&&n(3,b=L.data),"style"in L&&n(4,P=L.style),"zIndex"in L&&n(5,g=L.zIndex),"animated"in L&&n(6,v=L.animated),"selected"in L&&n(7,S=L.selected),"selectable"in L&&n(34,w=L.selectable),"hidden"in L&&n(8,k=L.hidden),"label"in L&&n(9,C=L.label),"labelStyle"in L&&n(10,z=L.labelStyle),"markerStart"in L&&n(35,A=L.markerStart),"markerEnd"in L&&n(36,D=L.markerEnd),"sourceHandle"in L&&n(11,H=L.sourceHandle),"targetHandle"in L&&n(12,m=L.targetHandle),"sourceX"in L&&n(13,K=L.sourceX),"sourceY"in L&&n(14,O=L.sourceY),"targetX"in L&&n(15,_=L.targetX),"targetY"in L&&n(16,N=L.targetY),"sourcePosition"in L&&n(17,E=L.sourcePosition),"targetPosition"in L&&n(18,I=L.targetPosition),"ariaLabel"in L&&n(19,R=L.ariaLabel),"interactionWidth"in L&&n(20,W=L.interactionWidth),"class"in L&&n(21,q=L.class)},e.$$.update=()=>{e.$$.dirty[1]&256&&n(25,i=c[B]||Xl),e.$$.dirty[1]&144&&n(24,o=A?`url(#${yi(A,u)})`:void 0),e.$$.dirty[1]&160&&n(23,l=D?`url(#${yi(D,u)})`:void 0),e.$$.dirty[1]&72&&n(22,s=w||a&&typeof w>"u")},[d,h,y,b,P,g,v,S,k,C,z,H,m,K,O,_,N,E,I,R,W,q,s,l,o,i,Z,T,p,$,B,oe,_e,f,w,A,D,a,u,c]}class ad extends ae{constructor(t){super(),ue(this,t,sd,rd,Ro,{id:0,type:33,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:34,hidden:8,label:9,labelStyle:10,markerStart:35,markerEnd:36,sourceHandle:11,targetHandle:12,sourceX:13,sourceY:14,targetX:15,targetY:16,sourcePosition:17,targetPosition:18,ariaLabel:19,interactionWidth:20,class:21},null,[-1,-1])}}const ud=ad;function cd(e,t,n){let{onMount:i=void 0}=t,{onDestroy:o=void 0}=t;return Xn(()=>(i==null||i(),o)),e.$$set=l=>{"onMount"in l&&n(0,i=l.onMount),"onDestroy"in l&&n(1,o=l.onDestroy)},[i,o]}class fd extends ae{constructor(t){super(),ue(this,t,cd,null,fe,{onMount:0,onDestroy:1})}}const dd=fd;function Mo(e,t,n){const i=e.slice();return i[2]=t[n],i}function Po(e,t){let n,i,o;const l=[t[2]];let s={};for(let r=0;r<l.length;r+=1)s=wt(s,l[r]);return i=new vd({props:s}),{key:e,first:null,c(){n=we(),le(i.$$.fragment),this.h()},l(r){n=we(),ce(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,a){x(r,n,a),re(i,r,a),o=!0},p(r,a){t=r;const u=a&1?ki(l,[mr(t[2])]):{};i.$set(u)},i(r){o||(U(i.$$.fragment,r),o=!0)},o(r){J(i.$$.fragment,r),o=!1},d(r){r&&F(n),se(i,r)}}}function hd(e){let t,n=[],i=new Map,o,l=It(e[0]);const s=r=>r[2].id;for(let r=0;r<l.length;r+=1){let a=Mo(e,l,r),u=s(a);i.set(u,n[r]=Po(u,a))}return{c(){t=Ke("defs");for(let r=0;r<n.length;r+=1)n[r].c()},l(r){t=Le(r,"defs",{});var a=de(t);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(F)},m(r,a){x(r,t,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null);o=!0},p(r,[a]){a&1&&(l=It(r[0]),We(),n=vi(n,a,s,1,r,l,i,t,wi,Po,null,Mo),Be())},i(r){if(!o){for(let a=0;a<l.length;a+=1)U(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)J(n[a]);o=!1},d(r){r&&F(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function gd(e,t,n){let i;const{markers:o}=Me();return Q(e,o,l=>n(0,i=l)),[i,o]}class md extends ae{constructor(t){super(),ue(this,t,gd,hd,fe,{})}}function yd(e){let t;return{c(){t=Ke("polyline"),this.h()},l(n){t=Le(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),de(t).forEach(F),this.h()},h(){X(t,"stroke",e[6]),X(t,"stroke-linecap","round"),X(t,"stroke-linejoin","round"),X(t,"stroke-width",e[7]),X(t,"fill",e[6]),X(t,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){x(n,t,i)},p(n,i){i&64&&X(t,"stroke",n[6]),i&128&&X(t,"stroke-width",n[7]),i&64&&X(t,"fill",n[6])},d(n){n&&F(t)}}}function _d(e){let t;return{c(){t=Ke("polyline"),this.h()},l(n){t=Le(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),de(t).forEach(F),this.h()},h(){X(t,"stroke",e[6]),X(t,"stroke-linecap","round"),X(t,"stroke-linejoin","round"),X(t,"stroke-width",e[7]),X(t,"fill","none"),X(t,"points","-5,-4 0,0 -5,4")},m(n,i){x(n,t,i)},p(n,i){i&64&&X(t,"stroke",n[6]),i&128&&X(t,"stroke-width",n[7])},d(n){n&&F(t)}}}function bd(e){let t,n,i;function o(r,a){if(r[1]===zn.Arrow)return _d;if(r[1]===zn.ArrowClosed)return yd}let l=o(e),s=l&&l(e);return{c(){t=Ke("marker"),s&&s.c(),this.h()},l(r){t=Le(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=de(t);s&&s.l(a),a.forEach(F),this.h()},h(){X(t,"class","svelte-flow__arrowhead"),X(t,"id",e[0]),X(t,"markerWidth",n=`${e[2]}`),X(t,"markerHeight",i=`${e[3]}`),X(t,"viewBox","-10 -10 20 20"),X(t,"markerUnits",e[4]),X(t,"orient",e[5]),X(t,"refX","0"),X(t,"refY","0")},m(r,a){x(r,t,a),s&&s.m(t,null)},p(r,[a]){l===(l=o(r))&&s?s.p(r,a):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(t,null))),a&1&&X(t,"id",r[0]),a&4&&n!==(n=`${r[2]}`)&&X(t,"markerWidth",n),a&8&&i!==(i=`${r[3]}`)&&X(t,"markerHeight",i),a&16&&X(t,"markerUnits",r[4]),a&32&&X(t,"orient",r[5])},i:$e,o:$e,d(r){r&&F(t),s&&s.d()}}}function wd(e,t,n){let{id:i}=t,{type:o}=t,{width:l=12.5}=t,{height:s=12.5}=t,{markerUnits:r="strokeWidth"}=t,{orient:a="auto-start-reverse"}=t,{color:u=void 0}=t,{strokeWidth:c=void 0}=t;return e.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,l=d.width),"height"in d&&n(3,s=d.height),"markerUnits"in d&&n(4,r=d.markerUnits),"orient"in d&&n(5,a=d.orient),"color"in d&&n(6,u=d.color),"strokeWidth"in d&&n(7,c=d.strokeWidth)},[i,o,l,s,r,a,u,c]}class vd extends ae{constructor(t){super(),ue(this,t,wd,bd,fe,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function zo(e,t,n){const i=e.slice();return i[10]=t[n],i}function No(e,t){let n,i,o;return i=new ud({props:{id:t[10].id,source:t[10].source,target:t[10].target,data:t[10].data,style:t[10].style,animated:t[10].animated,selected:t[10].selected,selectable:t[10].selectable,hidden:t[10].hidden,label:t[10].label,labelStyle:t[10].labelStyle,markerStart:t[10].markerStart,markerEnd:t[10].markerEnd,sourceHandle:t[10].sourceHandle,targetHandle:t[10].targetHandle,sourceX:t[10].sourceX,sourceY:t[10].sourceY,targetX:t[10].targetX,targetY:t[10].targetY,sourcePosition:t[10].sourcePosition,targetPosition:t[10].targetPosition,ariaLabel:t[10].ariaLabel,interactionWidth:t[10].interactionWidth,class:t[10].class,type:t[10].type||"default",zIndex:t[10].zIndex}}),i.$on("edgeclick",t[5]),i.$on("edgecontextmenu",t[6]),{key:e,first:null,c(){n=we(),le(i.$$.fragment),this.h()},l(l){n=we(),ce(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,s){x(l,n,s),re(i,l,s),o=!0},p(l,s){t=l;const r={};s&1&&(r.id=t[10].id),s&1&&(r.source=t[10].source),s&1&&(r.target=t[10].target),s&1&&(r.data=t[10].data),s&1&&(r.style=t[10].style),s&1&&(r.animated=t[10].animated),s&1&&(r.selected=t[10].selected),s&1&&(r.selectable=t[10].selectable),s&1&&(r.hidden=t[10].hidden),s&1&&(r.label=t[10].label),s&1&&(r.labelStyle=t[10].labelStyle),s&1&&(r.markerStart=t[10].markerStart),s&1&&(r.markerEnd=t[10].markerEnd),s&1&&(r.sourceHandle=t[10].sourceHandle),s&1&&(r.targetHandle=t[10].targetHandle),s&1&&(r.sourceX=t[10].sourceX),s&1&&(r.sourceY=t[10].sourceY),s&1&&(r.targetX=t[10].targetX),s&1&&(r.targetY=t[10].targetY),s&1&&(r.sourcePosition=t[10].sourcePosition),s&1&&(r.targetPosition=t[10].targetPosition),s&1&&(r.ariaLabel=t[10].ariaLabel),s&1&&(r.interactionWidth=t[10].interactionWidth),s&1&&(r.class=t[10].class),s&1&&(r.type=t[10].type||"default"),s&1&&(r.zIndex=t[10].zIndex),i.$set(r)},i(l){o||(U(i.$$.fragment,l),o=!0)},o(l){J(i.$$.fragment,l),o=!1},d(l){l&&F(n),se(i,l)}}}function Ao(e){let t,n;return t=new dd({props:{onMount:e[7],onDestroy:e[8]}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,o){const l={};o&2&&(l.onMount=i[7]),o&2&&(l.onDestroy=i[8]),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function kd(e){let t,n,i,o,l=[],s=new Map,r,a;i=new md({});let u=It(e[0]);const c=f=>f[10].id;for(let f=0;f<u.length;f+=1){let h=zo(e,u,f),y=c(h);s.set(y,l[f]=No(y,h))}let d=e[0].length>0&&Ao(e);return{c(){t=Pe("div"),n=Ke("svg"),le(i.$$.fragment),o=Se();for(let f=0;f<l.length;f+=1)l[f].c();r=Se(),d&&d.c(),this.h()},l(f){t=ze(f,"DIV",{class:!0});var h=de(t);n=Le(h,"svg",{class:!0});var y=de(n);ce(i.$$.fragment,y),y.forEach(F),o=Ee(h);for(let b=0;b<l.length;b+=1)l[b].l(h);r=Ee(h),d&&d.l(h),h.forEach(F),this.h()},h(){X(n,"class","svelte-flow__marker"),X(t,"class","svelte-flow__edges")},m(f,h){x(f,t,h),ht(t,n),re(i,n,null),ht(t,o);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(t,null);ht(t,r),d&&d.m(t,null),a=!0},p(f,[h]){h&1&&(u=It(f[0]),We(),l=vi(l,h,c,1,f,u,s,t,wi,No,r,zo),Be()),f[0].length>0?d?(d.p(f,h),h&1&&U(d,1)):(d=Ao(f),d.c(),U(d,1),d.m(t,null)):d&&(We(),J(d,1,1,()=>{d=null}),Be())},i(f){if(!a){U(i.$$.fragment,f);for(let h=0;h<u.length;h+=1)U(l[h]);U(d),a=!0}},o(f){J(i.$$.fragment,f);for(let h=0;h<l.length;h+=1)J(l[h]);J(d),a=!1},d(f){f&&F(t),se(i);for(let h=0;h<l.length;h+=1)l[h].d();d&&d.d()}}}function Sd(e,t,n){let i,o,{defaultEdgeOptions:l}=t;const{visibleEdges:s,edgesInitialized:r,edges:{setDefaultOptions:a}}=Me();Q(e,s,h=>n(0,i=h)),Q(e,r,h=>n(1,o=h)),Xn(()=>{l&&a(l)});function u(h){he.call(this,e,h)}function c(h){he.call(this,e,h)}const d=()=>{li(r,o=!0,o)},f=()=>{li(r,o=!1,o)};return e.$$set=h=>{"defaultEdgeOptions"in h&&n(4,l=h.defaultEdgeOptions)},[i,o,s,r,l,u,c,d,f]}class Ed extends ae{constructor(t){super(),ue(this,t,Sd,kd,fe,{defaultEdgeOptions:4})}}const Md=Ed;function Oo(e){let t;return{c(){t=Pe("div"),this.h()},l(n){t=ze(n,"DIV",{class:!0}),de(t).forEach(F),this.h()},h(){X(t,"class","svelte-flow__selection svelte-1iugwpu"),ge(t,"width",typeof e[2]=="string"?e[2]:`${e[2]}px`),ge(t,"height",typeof e[3]=="string"?e[3]:`${e[3]}px`),ge(t,"transform",`translate(${e[0]}px, ${e[1]}px)`)},m(n,i){x(n,t,i)},p(n,i){i&4&&ge(t,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ge(t,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ge(t,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&F(t)}}}function Pd(e){let t,n=e[4]&&Oo(e);return{c(){n&&n.c(),t=we()},l(i){n&&n.l(i),t=we()},m(i,o){n&&n.m(i,o),x(i,t,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Oo(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:$e,o:$e,d(i){i&&F(t),n&&n.d(i)}}}function zd(e,t,n){let{x:i=0}=t,{y:o=0}=t,{width:l=0}=t,{height:s=0}=t,{isVisible:r=!0}=t;return e.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,l=a.width),"height"in a&&n(3,s=a.height),"isVisible"in a&&n(4,r=a.isVisible)},[i,o,l,s,r]}class Nd extends ae{constructor(t){super(),ue(this,t,zd,Pd,fe,{x:0,y:1,width:2,height:3,isVisible:4})}}const Wl=Nd;function Ad(e){var i,o,l,s;let t,n;return t=new Wl({props:{isVisible:!!(e[0]&&e[1]==="user"),width:(i=e[0])==null?void 0:i.width,height:(o=e[0])==null?void 0:o.height,x:(l=e[0])==null?void 0:l.x,y:(s=e[0])==null?void 0:s.y}}),{c(){le(t.$$.fragment)},l(r){ce(t.$$.fragment,r)},m(r,a){re(t,r,a),n=!0},p(r,[a]){var c,d,f,h;const u={};a&3&&(u.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(u.width=(c=r[0])==null?void 0:c.width),a&1&&(u.height=(d=r[0])==null?void 0:d.height),a&1&&(u.x=(f=r[0])==null?void 0:f.x),a&1&&(u.y=(h=r[0])==null?void 0:h.y),t.$set(u)},i(r){n||(U(t.$$.fragment,r),n=!0)},o(r){J(t.$$.fragment,r),n=!1},d(r){se(t,r)}}}function Od(e,t,n){let i,o;const{selectionRect:l,selectionRectMode:s}=Me();return Q(e,l,r=>n(0,i=r)),Q(e,s,r=>n(1,o=r)),[i,o,l,s]}class Cd extends ae{constructor(t){super(),ue(this,t,Od,Ad,fe,{})}}function Co(e){let t,n,i,o,l;return n=new Wl({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){t=Pe("div"),le(n.$$.fragment),this.h()},l(s){t=ze(s,"DIV",{class:!0,style:!0});var r=de(t);ce(n.$$.fragment,r),r.forEach(F),this.h()},h(){X(t,"class","selection-wrapper nopan svelte-5pxri"),ge(t,"width",e[1].width+"px"),ge(t,"height",e[1].height+"px"),ge(t,"transform","translate("+e[1].x+"px, "+e[1].y+"px)")},m(s,r){x(s,t,r),re(n,t,null),i=!0,o||(l=[He(Ll.call(null,t,{disabled:!1,store:e[3]})),be(t,"contextmenu",e[6]),be(t,"click",e[7])],o=!0)},p(s,r){(!i||r&2)&&ge(t,"width",s[1].width+"px"),(!i||r&2)&&ge(t,"height",s[1].height+"px"),(!i||r&2)&&ge(t,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(U(n.$$.fragment,s),i=!0)},o(s){J(n.$$.fragment,s),i=!1},d(s){s&&F(t),se(n),o=!1,gt(l)}}}function Hd(e){let t,n,i=e[0]&&e[2]==="nodes"&&Co(e);return{c(){i&&i.c(),t=we()},l(o){i&&i.l(o),t=we()},m(o,l){i&&i.m(o,l),x(o,t,l),n=!0},p(o,[l]){o[0]&&o[2]==="nodes"?i?(i.p(o,l),l&5&&U(i,1)):(i=Co(o),i.c(),U(i,1),i.m(t.parentNode,t)):i&&(We(),J(i,1,1,()=>{i=null}),Be())},i(o){n||(U(i),n=!0)},o(o){J(i),n=!1},d(o){o&&F(t),i&&i.d(o)}}}function Td(e,t,n){let i,o,l,s;const r=Me(),{selectionRectMode:a,nodes:u}=r;Q(e,a,h=>n(2,s=h)),Q(e,u,h=>n(8,l=h));const c=Yn();function d(h){c("selectioncontextmenu",{nodes:i,event:h})}function f(h){c("selectionclick",{nodes:i,event:h})}return e.$$.update=()=>{e.$$.dirty&256&&n(0,i=l.filter(h=>h.selected)),e.$$.dirty&1&&n(1,o=Bn(i))},[i,o,s,r,a,u,d,f,l]}class Id extends ae{constructor(t){super(),ue(this,t,Td,Hd,fe,{})}}function xe(e,t){let{enabled:n=!0,trigger:i,type:o="keydown"}=t;function l(s){const r=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of r){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:f,callback:h,preventDefault:y,enabled:b}=c;if(b){if(d.length&&!(Array.isArray(d)?d:[d]).map(v=>typeof v=="string"?[v]:v).some(v=>v.every(S=>a[S])))continue;if(s.key===f){y&&s.preventDefault();const P={node:e,trigger:c,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:P})),h==null||h(P)}}}}return n&&e.addEventListener(o,l),{update:s=>{const{enabled:r=!0,type:a="keydown"}=s;n&&(!r||o!==a)?e.removeEventListener(o,l):!n&&r&&e.addEventListener(a,l),n=r,o=a,i=s.trigger},destroy:()=>{e.removeEventListener(o,l)}}}function Dd(e){let t,n,i,o,l,s,r,a,u,c,d,f;return{c:$e,l:$e,m(h,y){d||(f=[He(t=xe.call(null,window,{trigger:[{...e[4],enabled:e[4].key!==null,callback:e[15]}],type:"keydown"})),He(n=xe.call(null,window,{trigger:[{...e[4],enabled:e[4].key!==null,callback:e[16]}],type:"keyup"})),He(i=xe.call(null,window,{trigger:[{...e[3],enabled:e[3].key!==null,callback:e[17]}],type:"keydown"})),He(o=xe.call(null,window,{trigger:[{...e[3],enabled:e[3].key!==null,callback:e[18]}],type:"keyup"})),He(l=xe.call(null,window,{trigger:[{...e[2],enabled:e[2].key!==null,callback:e[19]}],type:"keydown"})),He(s=xe.call(null,window,{trigger:[{...e[2],enabled:e[2].key!==null,callback:e[20]}],type:"keyup"})),He(r=xe.call(null,window,{trigger:[{...e[1],enabled:e[1].key!==null,callback:e[21]}],type:"keydown"})),He(a=xe.call(null,window,{trigger:[{...e[1],enabled:e[1].key!==null,callback:e[22]}],type:"keyup"})),He(u=xe.call(null,window,{trigger:[{...e[0],enabled:e[0].key!==null,callback:e[23]}],type:"keydown"})),He(c=xe.call(null,window,{trigger:[{...e[0],enabled:e[0].key!==null,callback:e[24]}],type:"keyup"}))],d=!0)},p(h,[y]){t&&ke(t.update)&&y&16&&t.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[15]}],type:"keydown"}),n&&ke(n.update)&&y&16&&n.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[16]}],type:"keyup"}),i&&ke(i.update)&&y&8&&i.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[17]}],type:"keydown"}),o&&ke(o.update)&&y&8&&o.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[18]}],type:"keyup"}),l&&ke(l.update)&&y&4&&l.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[19]}],type:"keydown"}),s&&ke(s.update)&&y&4&&s.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[20]}],type:"keyup"}),r&&ke(r.update)&&y&2&&r.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[21]}],type:"keydown"}),a&&ke(a.update)&&y&2&&a.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[22]}],type:"keyup"}),u&&ke(u.update)&&y&1&&u.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[23]}],type:"keydown"}),c&&ke(c.update)&&y&1&&c.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[24]}],type:"keyup"})},i:$e,o:$e,d(h){d=!1,gt(f)}}}function Bl(e){return e!==null&&typeof e=="object"}function Lt(e){return Bl(e)?e.modifier||[]:[]}function Wt(e){return e==null?"":Bl(e)?e.key:e}function Xd(e,t,n){let i,o,l,s,r,{selectionKey:a="Shift"}=t,{multiSelectionKey:u=On()?"Meta":"Control"}=t,{deleteKey:c="Backspace"}=t,{panActivationKey:d=" "}=t,{zoomActivationKey:f=On()?"Meta":"Control"}=t;const{selectionKeyPressed:h,multiselectionKeyPressed:y,deleteKeyPressed:b,panActivationKeyPressed:P,zoomActivationKeyPressed:g}=Me(),v=()=>h.set(!0),S=()=>h.set(!1),w=()=>y.set(!0),k=()=>y.set(!1),C=K=>{!(K.originalEvent.ctrlKey||K.originalEvent.metaKey||K.originalEvent.shiftKey)&&!lc(K.originalEvent)&&b.set(!0)},z=()=>b.set(!1),A=()=>P.set(!0),D=()=>P.set(!1),H=()=>g.set(!0),m=()=>g.set(!1);return e.$$set=K=>{"selectionKey"in K&&n(10,a=K.selectionKey),"multiSelectionKey"in K&&n(11,u=K.multiSelectionKey),"deleteKey"in K&&n(12,c=K.deleteKey),"panActivationKey"in K&&n(13,d=K.panActivationKey),"zoomActivationKey"in K&&n(14,f=K.zoomActivationKey)},e.$$.update=()=>{e.$$.dirty&1024&&n(4,i={key:Wt(a),modifier:Lt(a)}),e.$$.dirty&2048&&n(3,o={key:Wt(u),modifier:Lt(u)}),e.$$.dirty&4096&&n(2,l={key:Wt(c),modifier:Lt(c)}),e.$$.dirty&8192&&n(1,s={key:Wt(d),modifier:Lt(d)}),e.$$.dirty&16384&&n(0,r={key:Wt(f),modifier:Lt(f)})},[r,s,l,o,i,h,y,b,P,g,a,u,c,d,f,v,S,w,k,C,z,A,D,H,m]}class Yd extends ae{constructor(t){super(),ue(this,t,Xd,Dd,fe,{selectionKey:10,multiSelectionKey:11,deleteKey:12,panActivationKey:13,zoomActivationKey:14})}}const Vd=Yd,Rd=e=>({}),Ho=e=>({});function To(e){let t,n,i,o;const l=e[10].connectionLine,s=Ge(l,e,e[9],Ho);let r=!e[2]&&Io(e);return{c(){t=Ke("svg"),n=Ke("g"),s&&s.c(),r&&r.c(),this.h()},l(a){t=Le(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=de(t);n=Le(u,"g",{class:!0});var c=de(n);s&&s.l(c),r&&r.l(c),c.forEach(F),u.forEach(F),this.h()},h(){X(n,"class",i=Oe(["svelte-flow__connection",e[3].status])),X(t,"width",e[4]),X(t,"height",e[5]),X(t,"class","svelte-flow__connectionline"),X(t,"style",e[0])},m(a,u){x(a,t,u),ht(t,n),s&&s.m(n,null),r&&r.m(n,null),o=!0},p(a,u){s&&s.p&&(!o||u&512)&&Ue(s,l,a,a[9],o?Qe(l,a[9],u,Rd):Je(a[9]),Ho),a[2]?r&&(r.d(1),r=null):r?r.p(a,u):(r=Io(a),r.c(),r.m(n,null)),(!o||u&8&&i!==(i=Oe(["svelte-flow__connection",a[3].status])))&&X(n,"class",i),(!o||u&16)&&X(t,"width",a[4]),(!o||u&32)&&X(t,"height",a[5]),(!o||u&1)&&X(t,"style",a[0])},i(a){o||(U(s,a),o=!0)},o(a){J(s,a),o=!1},d(a){a&&F(t),s&&s.d(a),r&&r.d()}}}function Io(e){let t,n;return{c(){t=Ke("path"),this.h()},l(i){t=Le(i,"path",{d:!0,style:!0,fill:!0,class:!0}),de(t).forEach(F),this.h()},h(){X(t,"d",n=e[3].path),X(t,"style",e[1]),X(t,"fill","none"),X(t,"class","svelte-flow__connection-path")},m(i,o){x(i,t,o)},p(i,o){o&8&&n!==(n=i[3].path)&&X(t,"d",n),o&2&&X(t,"style",i[1])},d(i){i&&F(t)}}}function Kd(e){let t,n,i=e[3].path&&To(e);return{c(){i&&i.c(),t=we()},l(o){i&&i.l(o),t=we()},m(o,l){i&&i.m(o,l),x(o,t,l),n=!0},p(o,[l]){o[3].path?i?(i.p(o,l),l&8&&U(i,1)):(i=To(o),i.c(),U(i,1),i.m(t.parentNode,t)):i&&(We(),J(i,1,1,()=>{i=null}),Be())},i(o){n||(U(i),n=!0)},o(o){J(i),n=!1},d(o){o&&F(t),i&&i.d(o)}}}function Ld(e,t,n){let i,o,l,{$$slots:s={},$$scope:r}=t,{containerStyle:a=""}=t,{style:u=""}=t,{isCustomComponent:c=!1}=t;const{width:d,height:f,connection:h}=Me();return Q(e,d,y=>n(4,o=y)),Q(e,f,y=>n(5,l=y)),Q(e,h,y=>n(3,i=y)),e.$$set=y=>{"containerStyle"in y&&n(0,a=y.containerStyle),"style"in y&&n(1,u=y.style),"isCustomComponent"in y&&n(2,c=y.isCustomComponent),"$$scope"in y&&n(9,r=y.$$scope)},[a,u,c,i,o,l,d,f,h,r,s]}class Wd extends ae{constructor(t){super(),ue(this,t,Ld,Kd,fe,{containerStyle:0,style:1,isCustomComponent:2})}}const Bd=Wd;function Fd(e){let t,n,i;const o=e[6].default,l=Ge(o,e,e[5],null);let s=[{class:n=Oe(["svelte-flow__panel",e[1],...e[2]])},{style:e[0]},e[3]],r={};for(let a=0;a<s.length;a+=1)r=wt(r,s[a]);return{c(){t=Pe("div"),l&&l.c(),this.h()},l(a){t=ze(a,"DIV",{class:!0,style:!0});var u=de(t);l&&l.l(u),u.forEach(F),this.h()},h(){_n(t,r)},m(a,u){x(a,t,u),l&&l.m(t,null),i=!0},p(a,[u]){l&&l.p&&(!i||u&32)&&Ue(l,o,a,a[5],i?Qe(o,a[5],u,null):Je(a[5]),null),_n(t,r=ki(s,[(!i||u&6&&n!==(n=Oe(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&8&&a[3]]))},i(a){i||(U(l,a),i=!0)},o(a){J(l,a),i=!1},d(a){a&&F(t),l&&l.d(a)}}}function qd(e,t,n){let i;const o=["position","style","class"];let l=bn(t,o),{$$slots:s={},$$scope:r}=t,{position:a="top-right"}=t,{style:u=void 0}=t,{class:c=void 0}=t;return e.$$set=d=>{t=wt(wt({},t),Ko(d)),n(3,l=bn(t,o)),"position"in d&&n(4,a=d.position),"style"in d&&n(0,u=d.style),"class"in d&&n(1,c=d.class),"$$scope"in d&&n(5,r=d.$$scope)},e.$$.update=()=>{e.$$.dirty&16&&n(2,i=`${a}`.split("-"))},[u,c,i,l,a,r,s]}class Zd extends ae{constructor(t){super(),ue(this,t,qd,Fd,fe,{position:4,style:0,class:1})}}const Gd=Zd;function Do(e){let t,n;return t=new Gd({props:{position:e[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Ud]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,o){const l={};o&2&&(l.position=i[1]),o&4&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function Ud(e){let t,n="Svelte Flow";return{c(){t=Pe("a"),t.textContent=n,this.h()},l(i){t=ze(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),sr(t)!=="svelte-2vm8e4"&&(t.textContent=n),this.h()},h(){X(t,"href","https://svelteflow.dev"),X(t,"target","_blank"),X(t,"rel","noopener noreferrer"),X(t,"aria-label","Svelte Flow attribution")},m(i,o){x(i,t,o)},p:$e,d(i){i&&F(t)}}}function Jd(e){var o;let t,n,i=!((o=e[0])!=null&&o.hideAttribution)&&Do(e);return{c(){i&&i.c(),t=we()},l(l){i&&i.l(l),t=we()},m(l,s){i&&i.m(l,s),x(l,t,s),n=!0},p(l,[s]){var r;(r=l[0])!=null&&r.hideAttribution?i&&(We(),J(i,1,1,()=>{i=null}),Be()):i?(i.p(l,s),s&1&&U(i,1)):(i=Do(l),i.c(),U(i,1),i.m(t.parentNode,t))},i(l){n||(U(i),n=!0)},o(l){J(i),n=!1},d(l){l&&F(t),i&&i.d(l)}}}function Qd(e,t,n){let{proOptions:i=void 0}=t,{position:o="bottom-right"}=t;return e.$$set=l=>{"proOptions"in l&&n(0,i=l.proOptions),"position"in l&&n(1,o=l.position)},[i,o]}class jd extends ae{constructor(t){super(),ue(this,t,Qd,Jd,fe,{proOptions:0,position:1})}}const xd=jd;function Xo(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:l}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),o!==void 0&&e.setMaxZoom(o),l!==void 0&&e.setTranslateExtent(l)}const pd=e=>Object.keys(e);function $d(e,t){pd(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function eh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function th(e="light"){return pe("light",n=>{if(e!=="system"){n(e);return}const i=eh(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const nh=e=>({}),Yo=e=>({slot:"connectionLine"});function ih(e){let t;const n=e[70].connectionLine,i=Ge(n,e,e[89],Yo);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,l){i&&i.m(o,l),t=!0},p(o,l){i&&i.p&&(!t||l[2]&134217728)&&Ue(i,n,o,o[89],t?Qe(n,o[89],l,nh):Je(o[89]),Yo)},i(o){t||(U(i,o),t=!0)},o(o){J(i,o),t=!1},d(o){i&&i.d(o)}}}function oh(e){let t,n,i,o,l,s,r,a,u,c,d,f;return t=new Md({props:{defaultEdgeOptions:e[21]}}),t.$on("edgeclick",e[73]),t.$on("edgecontextmenu",e[74]),i=new Bd({props:{containerStyle:e[7],style:e[6],isCustomComponent:e[31].connectionLine,$$slots:{connectionLine:[ih]},$$scope:{ctx:e}}}),u=new ld({}),u.$on("nodeclick",e[75]),u.$on("nodemouseenter",e[76]),u.$on("nodemousemove",e[77]),u.$on("nodemouseleave",e[78]),u.$on("nodedragstart",e[79]),u.$on("nodedrag",e[80]),u.$on("nodedragstop",e[81]),u.$on("nodecontextmenu",e[82]),d=new Id({}),d.$on("selectionclick",e[83]),d.$on("selectioncontextmenu",e[84]),{c(){le(t.$$.fragment),n=Se(),le(i.$$.fragment),o=Se(),l=Pe("div"),s=Se(),r=Pe("div"),a=Se(),le(u.$$.fragment),c=Se(),le(d.$$.fragment),this.h()},l(h){ce(t.$$.fragment,h),n=Ee(h),ce(i.$$.fragment,h),o=Ee(h),l=ze(h,"DIV",{class:!0}),de(l).forEach(F),s=Ee(h),r=ze(h,"DIV",{class:!0}),de(r).forEach(F),a=Ee(h),ce(u.$$.fragment,h),c=Ee(h),ce(d.$$.fragment,h),this.h()},h(){X(l,"class","svelte-flow__edgelabel-renderer"),X(r,"class","svelte-flow__viewport-portal")},m(h,y){re(t,h,y),x(h,n,y),re(i,h,y),x(h,o,y),x(h,l,y),x(h,s,y),x(h,r,y),x(h,a,y),re(u,h,y),x(h,c,y),re(d,h,y),f=!0},p(h,y){const b={};y[0]&2097152&&(b.defaultEdgeOptions=h[21]),t.$set(b);const P={};y[0]&128&&(P.containerStyle=h[7]),y[0]&64&&(P.style=h[6]),y[1]&1&&(P.isCustomComponent=h[31].connectionLine),y[2]&134217728&&(P.$$scope={dirty:y,ctx:h}),i.$set(P)},i(h){f||(U(t.$$.fragment,h),U(i.$$.fragment,h),U(u.$$.fragment,h),U(d.$$.fragment,h),f=!0)},o(h){J(t.$$.fragment,h),J(i.$$.fragment,h),J(u.$$.fragment,h),J(d.$$.fragment,h),f=!1},d(h){h&&(F(n),F(o),F(l),F(s),F(r),F(a),F(c)),se(t,h),se(i,h),se(u,h),se(d,h)}}}function lh(e){let t,n,i,o;return t=new jf({props:{$$slots:{default:[oh]},$$scope:{ctx:e}}}),i=new Cd({}),{c(){le(t.$$.fragment),n=Se(),le(i.$$.fragment)},l(l){ce(t.$$.fragment,l),n=Ee(l),ce(i.$$.fragment,l)},m(l,s){re(t,l,s),x(l,n,s),re(i,l,s),o=!0},p(l,s){const r={};s[0]&2097344|s[1]&1|s[2]&134217728&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){o||(U(t.$$.fragment,l),U(i.$$.fragment,l),o=!0)},o(l){J(t.$$.fragment,l),J(i.$$.fragment,l),o=!1},d(l){l&&F(n),se(t,l),se(i,l)}}}function rh(e){let t,n;return t=new Uf({props:{panOnDrag:e[17]===void 0?!0:e[17],selectionOnDrag:e[18],$$slots:{default:[lh]},$$scope:{ctx:e}}}),t.$on("paneclick",e[85]),t.$on("panecontextmenu",e[86]),{c(){le(t.$$.fragment)},l(i){ce(t.$$.fragment,i)},m(i,o){re(t,i,o),n=!0},p(i,o){const l={};o[0]&131072&&(l.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(l.selectionOnDrag=i[18]),o[0]&2097344|o[1]&1|o[2]&134217728&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function sh(e){let t,n,i,o,l,s,r,a,u,c,d,f;n=new Vd({props:{selectionKey:e[1],deleteKey:e[5],panActivationKey:e[2],multiSelectionKey:e[3],zoomActivationKey:e[4]}}),o=new Ff({props:{initialViewport:e[0],onMoveStart:e[8],onMove:e[9],onMoveEnd:e[10],panOnScrollMode:e[11]===void 0?tt.Free:e[11],preventScrolling:e[12]===void 0?!0:e[12],zoomOnScroll:e[13]===void 0?!0:e[13],zoomOnDoubleClick:e[14]===void 0?!0:e[14],zoomOnPinch:e[15]===void 0?!0:e[15],panOnScroll:e[16]===void 0?!1:e[16],panOnDrag:e[17]===void 0?!0:e[17],$$slots:{default:[rh]},$$scope:{ctx:e}}}),s=new xd({props:{proOptions:e[20],position:e[19]}});const h=e[70].default,y=Ge(h,e,e[89],null);let b=[{style:e[22]},{class:a=Oe(["svelte-flow",e[23],e[28]])},{"data-testid":"svelte-flow__wrapper"},e[30],{role:"application"}],P={};for(let g=0;g<b.length;g+=1)P=wt(P,b[g]);return{c(){t=Pe("div"),le(n.$$.fragment),i=Se(),le(o.$$.fragment),l=Se(),le(s.$$.fragment),r=Se(),y&&y.c(),this.h()},l(g){t=ze(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var v=de(t);ce(n.$$.fragment,v),i=Ee(v),ce(o.$$.fragment,v),l=Ee(v),ce(s.$$.fragment,v),r=Ee(v),y&&y.l(v),v.forEach(F),this.h()},h(){_n(t,P),ar(()=>e[88].call(t)),te(t,"svelte-12wlba6",!0)},m(g,v){x(g,t,v),re(n,t,null),ht(t,i),re(o,t,null),ht(t,l),re(s,t,null),ht(t,r),y&&y.m(t,null),e[87](t),u=ur(t,e[88].bind(t)),c=!0,d||(f=[be(t,"dragover",e[71]),be(t,"drop",e[72])],d=!0)},p(g,v){const S={};v[0]&2&&(S.selectionKey=g[1]),v[0]&32&&(S.deleteKey=g[5]),v[0]&4&&(S.panActivationKey=g[2]),v[0]&8&&(S.multiSelectionKey=g[3]),v[0]&16&&(S.zoomActivationKey=g[4]),n.$set(S);const w={};v[0]&1&&(w.initialViewport=g[0]),v[0]&256&&(w.onMoveStart=g[8]),v[0]&512&&(w.onMove=g[9]),v[0]&1024&&(w.onMoveEnd=g[10]),v[0]&2048&&(w.panOnScrollMode=g[11]===void 0?tt.Free:g[11]),v[0]&4096&&(w.preventScrolling=g[12]===void 0?!0:g[12]),v[0]&8192&&(w.zoomOnScroll=g[13]===void 0?!0:g[13]),v[0]&16384&&(w.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),v[0]&32768&&(w.zoomOnPinch=g[15]===void 0?!0:g[15]),v[0]&65536&&(w.panOnScroll=g[16]===void 0?!1:g[16]),v[0]&131072&&(w.panOnDrag=g[17]===void 0?!0:g[17]),v[0]&2490560|v[1]&1|v[2]&134217728&&(w.$$scope={dirty:v,ctx:g}),o.$set(w);const k={};v[0]&1048576&&(k.proOptions=g[20]),v[0]&524288&&(k.position=g[19]),s.$set(k),y&&y.p&&(!c||v[2]&134217728)&&Ue(y,h,g,g[89],c?Qe(h,g[89],v,null):Je(g[89]),null),_n(t,P=ki(b,[(!c||v[0]&4194304)&&{style:g[22]},(!c||v[0]&276824064&&a!==(a=Oe(["svelte-flow",g[23],g[28]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},v[0]&1073741824&&g[30],{role:"application"}])),te(t,"svelte-12wlba6",!0)},i(g){c||(U(n.$$.fragment,g),U(o.$$.fragment,g),U(s.$$.fragment,g),U(y,g),c=!0)},o(g){J(n.$$.fragment,g),J(o.$$.fragment,g),J(s.$$.fragment,g),J(y,g),c=!1},d(g){g&&F(t),se(n),se(o),se(s),y&&y.d(g),e[87](null),u(),d=!1,gt(f)}}}function ah(e,t,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","defaultMarkerColor","style","class"];let l=bn(t,o),s,r,a=$e,u=()=>(a(),a=dr(i,M=>n(28,r=M)),i);e.$$.on_destroy.push(()=>a());let{$$slots:c={},$$scope:d}=t;const f=cr(c);let{id:h="1"}=t,{nodes:y}=t,{edges:b}=t,{fitView:P=void 0}=t,{fitViewOptions:g=void 0}=t,{minZoom:v=void 0}=t,{maxZoom:S=void 0}=t,{initialViewport:w={x:0,y:0,zoom:1}}=t,{viewport:k=void 0}=t,{nodeTypes:C=void 0}=t,{edgeTypes:z=void 0}=t,{selectionKey:A=void 0}=t,{selectionMode:D=void 0}=t,{panActivationKey:H=void 0}=t,{multiSelectionKey:m=void 0}=t,{zoomActivationKey:K=void 0}=t,{nodesDraggable:O=void 0}=t,{nodesConnectable:_=void 0}=t,{nodeDragThreshold:N=void 0}=t,{elementsSelectable:E=void 0}=t,{snapGrid:I=void 0}=t,{deleteKey:R=void 0}=t,{connectionRadius:W=void 0}=t,{connectionLineType:q=void 0}=t,{connectionMode:Z=kt.Strict}=t,{connectionLineStyle:T=""}=t,{connectionLineContainerStyle:p=""}=t,{onMoveStart:$=void 0}=t,{onMove:ie=void 0}=t,{onMoveEnd:B=void 0}=t,{isValidConnection:ee=void 0}=t,{translateExtent:oe=void 0}=t,{onlyRenderVisibleElements:_e=void 0}=t,{panOnScrollMode:L=tt.Free}=t,{preventScrolling:ve=!0}=t,{zoomOnScroll:Ve=!0}=t,{zoomOnDoubleClick:Ie=!0}=t,{zoomOnPinch:De=!0}=t,{panOnScroll:me=!1}=t,{panOnDrag:mt=!0}=t,{selectionOnDrag:yt=void 0}=t,{autoPanOnConnect:st=!0}=t,{autoPanOnNodeDrag:at=!0}=t,{onerror:ut=void 0}=t,{ondelete:ct=void 0}=t,{onedgecreate:ft=void 0}=t,{attributionPosition:St=void 0}=t,{proOptions:V=void 0}=t,{defaultEdgeOptions:Fe=void 0}=t,{width:G=void 0}=t,{height:Ne=void 0}=t,{colorMode:Ce="light"}=t,{onconnect:Xe=void 0}=t,{onconnectstart:Et=void 0}=t,{onconnectend:Mt=void 0}=t,{onbeforedelete:Pt=void 0}=t,{oninit:Vt=void 0}=t,{defaultMarkerColor:Jn="#b1b1b7"}=t,{style:Ti=void 0}=t,{class:Ii=void 0}=t,tn,zt,Nt;const Ae=fr(Un)?Me():Rf({nodes:Y(y),edges:Y(b),width:G,height:Ne,fitView:P});Xn(()=>(Ae.width.set(zt),Ae.height.set(Nt),Ae.domNode.set(tn),Ae.syncNodeStores(y),Ae.syncEdgeStores(b),Ae.syncViewport(k),P!==void 0&&Ae.fitViewOnInit.set(P),g&&Ae.fitViewOptions.set(g),Xo(Ae,{nodeTypes:C,edgeTypes:z,minZoom:v,maxZoom:S,translateExtent:oe}),()=>{Ae.reset()}));const{initialized:Di}=Ae;Q(e,Di,M=>n(69,s=M));let Qn=!1;function Fl(M){he.call(this,e,M)}function ql(M){he.call(this,e,M)}function Zl(M){he.call(this,e,M)}function Gl(M){he.call(this,e,M)}function Ul(M){he.call(this,e,M)}function Jl(M){he.call(this,e,M)}function Ql(M){he.call(this,e,M)}function jl(M){he.call(this,e,M)}function xl(M){he.call(this,e,M)}function pl(M){he.call(this,e,M)}function $l(M){he.call(this,e,M)}function er(M){he.call(this,e,M)}function tr(M){he.call(this,e,M)}function nr(M){he.call(this,e,M)}function ir(M){he.call(this,e,M)}function or(M){he.call(this,e,M)}function lr(M){_i[M?"unshift":"push"](()=>{tn=M,n(26,tn)})}function rr(){zt=this.clientWidth,Nt=this.clientHeight,n(24,zt),n(25,Nt)}return e.$$set=M=>{t=wt(wt({},t),Ko(M)),n(30,l=bn(t,o)),"id"in M&&n(32,h=M.id),"nodes"in M&&n(33,y=M.nodes),"edges"in M&&n(34,b=M.edges),"fitView"in M&&n(35,P=M.fitView),"fitViewOptions"in M&&n(36,g=M.fitViewOptions),"minZoom"in M&&n(37,v=M.minZoom),"maxZoom"in M&&n(38,S=M.maxZoom),"initialViewport"in M&&n(0,w=M.initialViewport),"viewport"in M&&n(39,k=M.viewport),"nodeTypes"in M&&n(40,C=M.nodeTypes),"edgeTypes"in M&&n(41,z=M.edgeTypes),"selectionKey"in M&&n(1,A=M.selectionKey),"selectionMode"in M&&n(42,D=M.selectionMode),"panActivationKey"in M&&n(2,H=M.panActivationKey),"multiSelectionKey"in M&&n(3,m=M.multiSelectionKey),"zoomActivationKey"in M&&n(4,K=M.zoomActivationKey),"nodesDraggable"in M&&n(43,O=M.nodesDraggable),"nodesConnectable"in M&&n(44,_=M.nodesConnectable),"nodeDragThreshold"in M&&n(45,N=M.nodeDragThreshold),"elementsSelectable"in M&&n(46,E=M.elementsSelectable),"snapGrid"in M&&n(47,I=M.snapGrid),"deleteKey"in M&&n(5,R=M.deleteKey),"connectionRadius"in M&&n(48,W=M.connectionRadius),"connectionLineType"in M&&n(49,q=M.connectionLineType),"connectionMode"in M&&n(50,Z=M.connectionMode),"connectionLineStyle"in M&&n(6,T=M.connectionLineStyle),"connectionLineContainerStyle"in M&&n(7,p=M.connectionLineContainerStyle),"onMoveStart"in M&&n(8,$=M.onMoveStart),"onMove"in M&&n(9,ie=M.onMove),"onMoveEnd"in M&&n(10,B=M.onMoveEnd),"isValidConnection"in M&&n(51,ee=M.isValidConnection),"translateExtent"in M&&n(52,oe=M.translateExtent),"onlyRenderVisibleElements"in M&&n(53,_e=M.onlyRenderVisibleElements),"panOnScrollMode"in M&&n(11,L=M.panOnScrollMode),"preventScrolling"in M&&n(12,ve=M.preventScrolling),"zoomOnScroll"in M&&n(13,Ve=M.zoomOnScroll),"zoomOnDoubleClick"in M&&n(14,Ie=M.zoomOnDoubleClick),"zoomOnPinch"in M&&n(15,De=M.zoomOnPinch),"panOnScroll"in M&&n(16,me=M.panOnScroll),"panOnDrag"in M&&n(17,mt=M.panOnDrag),"selectionOnDrag"in M&&n(18,yt=M.selectionOnDrag),"autoPanOnConnect"in M&&n(54,st=M.autoPanOnConnect),"autoPanOnNodeDrag"in M&&n(55,at=M.autoPanOnNodeDrag),"onerror"in M&&n(56,ut=M.onerror),"ondelete"in M&&n(57,ct=M.ondelete),"onedgecreate"in M&&n(58,ft=M.onedgecreate),"attributionPosition"in M&&n(19,St=M.attributionPosition),"proOptions"in M&&n(20,V=M.proOptions),"defaultEdgeOptions"in M&&n(21,Fe=M.defaultEdgeOptions),"width"in M&&n(59,G=M.width),"height"in M&&n(60,Ne=M.height),"colorMode"in M&&n(61,Ce=M.colorMode),"onconnect"in M&&n(62,Xe=M.onconnect),"onconnectstart"in M&&n(63,Et=M.onconnectstart),"onconnectend"in M&&n(64,Mt=M.onconnectend),"onbeforedelete"in M&&n(65,Pt=M.onbeforedelete),"oninit"in M&&n(66,Vt=M.oninit),"defaultMarkerColor"in M&&n(67,Jn=M.defaultMarkerColor),"style"in M&&n(22,Ti=M.style),"class"in M&&n(23,Ii=M.class),"$$scope"in M&&n(89,d=M.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&50331648&&zt!==void 0&&Nt!==void 0&&(Ae.width.set(zt),Ae.height.set(Nt)),e.$$.dirty[2]&208&&!Qn&&s&&(Vt==null||Vt(),n(68,Qn=!0)),e.$$.dirty[1]&266336258|e.$$.dirty[2]&47&&$d(Ae,{flowId:h,connectionLineType:q,connectionRadius:W,selectionMode:D,snapGrid:I,defaultMarkerColor:Jn,nodesDraggable:O,nodesConnectable:_,elementsSelectable:E,onlyRenderVisibleElements:_e,isValidConnection:ee,autoPanOnConnect:st,autoPanOnNodeDrag:at,onerror:ut,ondelete:ct,onedgecreate:ft,connectionMode:Z,nodeDragThreshold:N,onconnect:Xe,onconnectstart:Et,onconnectend:Mt,onbeforedelete:Pt}),e.$$.dirty[1]&2098880&&Xo(Ae,{nodeTypes:C,edgeTypes:z,minZoom:v,maxZoom:S,translateExtent:oe}),e.$$.dirty[1]&1073741824&&u(n(27,i=th(Ce)))},[w,A,H,m,K,R,T,p,$,ie,B,L,ve,Ve,Ie,De,me,mt,yt,St,V,Fe,Ti,Ii,zt,Nt,tn,i,r,Di,l,f,h,y,b,P,g,v,S,k,C,z,D,O,_,N,E,I,W,q,Z,ee,oe,_e,st,at,ut,ct,ft,G,Ne,Ce,Xe,Et,Mt,Pt,Vt,Jn,Qn,s,c,Fl,ql,Zl,Gl,Ul,Jl,Ql,jl,xl,pl,$l,er,tr,nr,ir,or,lr,rr,d]}class uh extends ae{constructor(t){super(),ue(this,t,ah,sh,fe,{id:32,nodes:33,edges:34,fitView:35,fitViewOptions:36,minZoom:37,maxZoom:38,initialViewport:0,viewport:39,nodeTypes:40,edgeTypes:41,selectionKey:1,selectionMode:42,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:43,nodesConnectable:44,nodeDragThreshold:45,elementsSelectable:46,snapGrid:47,deleteKey:5,connectionRadius:48,connectionLineType:49,connectionMode:50,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:51,translateExtent:52,onlyRenderVisibleElements:53,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:54,autoPanOnNodeDrag:55,onerror:56,ondelete:57,onedgecreate:58,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:59,height:60,colorMode:61,onconnect:62,onconnectstart:63,onconnectend:64,onbeforedelete:65,oninit:66,defaultMarkerColor:67,style:22,class:23},null,[-1,-1,-1])}}const vh=uh;function ch(e){let t;const n=e[6].default,i=Ge(n,e,e[5],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,l){i&&i.m(o,l),t=!0},p(o,[l]){i&&i.p&&(!t||l&32)&&Ue(i,n,o,o[5],t?Qe(n,o[5],l,null):Je(o[5]),null)},i(o){t||(U(i,o),t=!0)},o(o){J(i,o),t=!1},d(o){i&&i.d(o)}}}function fh(e,t,n){let{$$slots:i={},$$scope:o}=t,{initialNodes:l=void 0}=t,{initialEdges:s=void 0}=t,{initialWidth:r=void 0}=t,{initialHeight:a=void 0}=t,{fitView:u=void 0}=t;const c=Kl({nodes:l,edges:s,width:r,height:a,fitView:u});return Zt(Un,{getStore:()=>c}),bi(()=>{c.reset()}),e.$$set=d=>{"initialNodes"in d&&n(0,l=d.initialNodes),"initialEdges"in d&&n(1,s=d.initialEdges),"initialWidth"in d&&n(2,r=d.initialWidth),"initialHeight"in d&&n(3,a=d.initialHeight),"fitView"in d&&n(4,u=d.fitView),"$$scope"in d&&n(5,o=d.$$scope)},[l,s,r,a,u,o,i]}class kh extends ae{constructor(t){super(),ue(this,t,fh,ch,fe,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4})}}const dh=e=>Qu(e);function hh(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:o,viewport:l,width:s,height:r,minZoom:a,maxZoom:u,panZoom:c,nodes:d,edges:f,domNode:h,nodeLookup:y,edgeLookup:b}=Me(),P=v=>{const S=ec(v),w=S?null:Y(d).find(C=>C.id===v.id);return!S&&!w?[null,null,S]:[S?v:mi(w),w,S]},g=(v,S,w={replace:!1})=>{d.update(k=>k.map(C=>{if(C.id===v){const z=typeof S=="function"?S(C):S;return w.replace&&dh(z)?z:{...C,...z}}return C}))};return{zoomIn:e,zoomOut:t,getNode:v=>Y(y).get(v),getNodes:v=>v===void 0?Y(d):Vo(Y(y),v),getEdge:v=>Y(b).get(v),getEdges:v=>v===void 0?Y(f):Vo(Y(b),v),setZoom:(v,S)=>{var w;(w=Y(c))==null||w.scaleTo(v,{duration:S==null?void 0:S.duration})},getZoom:()=>Y(l).zoom,setViewport:(v,S)=>{var k;const w=Y(l);(k=Y(c))==null||k.setViewport({x:v.x??w.x,y:v.y??w.y,zoom:v.zoom??w.zoom},{duration:S==null?void 0:S.duration})},getViewport:()=>Y(l),setCenter:(v,S,w)=>{var C;const k=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:Y(u);(C=Y(c))==null||C.setViewport({x:Y(s)/2-v*k,y:Y(r)/2-S*k,zoom:k},{duration:w==null?void 0:w.duration})},fitView:n,fitBounds:(v,S)=>{var k;const w=Hi(v,Y(s),Y(r),Y(a),Y(u),(S==null?void 0:S.padding)??.1);(k=Y(c))==null||k.setViewport(w,{duration:S==null?void 0:S.duration})},getIntersectingNodes:(v,S=!0,w)=>{const[k,C,z]=P(v);return k?(w||Y(d)).filter(A=>{var K;if(!z&&(A.id===C.id||!((K=A.computed)!=null&&K.positionAbsolute)))return!1;const D=mi(A),H=An(D,k);return S&&H>0||H>=k.width*k.height}):[]},isNodeIntersecting:(v,S,w=!0)=>{const[k]=P(v);if(!k)return!1;const C=An(k,S);return w&&C>0||C>=k.width*k.height},deleteElements:async({nodes:v=[],edges:S=[]})=>{const{nodes:w,edges:k}=await yl({nodesToRemove:v,edgesToRemove:S,nodes:Y(d),edges:Y(f),onBeforeDelete:Y(i)});return w&&d.update(C=>C.filter(z=>!w.some(({id:A})=>A===z.id))),k&&f.update(C=>C.filter(z=>!k.some(({id:A})=>A===z.id))),{deletedNodes:w,deletedEdges:k}},screenToFlowPosition:(v,S={snapToGrid:!0})=>{const w=Y(h);if(!w)return v;const k=S.snapToGrid?Y(o):!1,{x:C,y:z,zoom:A}=Y(l),{x:D,y:H}=w.getBoundingClientRect(),m={x:v.x-D,y:v.y-H};return Fn(m,[C,z,A],k!==null,k||[1,1])},flowToScreenPosition:v=>{const S=Y(h);if(!S)return v;const{x:w,y:k,zoom:C}=Y(l),{x:z,y:A}=S.getBoundingClientRect(),D=bl(v,[w,k,C]);return{x:D.x+z,y:D.y+A}},toObject:()=>({nodes:Y(d).map(v=>({...v,position:{...v.position},data:{...v.data}})),edges:Y(f).map(v=>({...v})),viewport:{...Y(l)}}),updateNode:g,updateNodeData:(v,S,w)=>{g(v,k=>{const C=typeof S=="function"?S(k):S;return w!=null&&w.replace?{...k,data:C}:{...k,data:{...k.data,...C}}})},viewport:l}}function Vo(e,t){const n=[];for(const i of t){const o=e.get(i);o&&n.push(o)}return n}const Sh=e=>{const{getNode:t}=hh(),n=t(e[0].source),i=t(e[0].target),o=e[0].sourceHandle,l=e[0].targetHandle;n&&i&&o&&l&&hr.addEdge(n.id,i.id,o,l,"EdgeSmooth")};export{Gn as B,kt as C,Hn as H,Gd as P,vh as S,wh as X,mr as a,bh as b,Oe as c,Bn as d,It as e,vi as f,ki as g,en as h,qn as i,ne as j,Sh as k,kl as l,kh as m,oo as n,wi as o,hh as p,Me as u};
